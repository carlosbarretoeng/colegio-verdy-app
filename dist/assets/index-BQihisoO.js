(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function s1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rv={exports:{}},Eu={},bv={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=Symbol.for("react.element"),i1=Symbol.for("react.portal"),o1=Symbol.for("react.fragment"),a1=Symbol.for("react.strict_mode"),l1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),d1=Symbol.for("react.forward_ref"),h1=Symbol.for("react.suspense"),f1=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),Rp=Symbol.iterator;function p1(t){return t===null||typeof t!="object"?null:(t=Rp&&t[Rp]||t["@@iterator"],typeof t=="function"?t:null)}var Dv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jv=Object.assign,Vv={};function yi(t,e,n){this.props=t,this.context=e,this.refs=Vv,this.updater=n||Dv}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mv(){}Mv.prototype=yi.prototype;function Qh(t,e,n){this.props=t,this.context=e,this.refs=Vv,this.updater=n||Dv}var Yh=Qh.prototype=new Mv;Yh.constructor=Qh;jv(Yh,yi.prototype);Yh.isPureReactComponent=!0;var bp=Array.isArray,Ov=Object.prototype.hasOwnProperty,Jh={current:null},Lv={key:!0,ref:!0,__self:!0,__source:!0};function Fv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ov.call(e,r)&&!Lv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ea,type:t,key:i,ref:o,props:s,_owner:Jh.current}}function g1(t,e){return{$$typeof:ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ea}function y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dp=/\/+/g;function Pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y1(""+t.key):e.toString(36)}function il(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ea:case i1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pc(o,0):r,bp(s)?(n="",t!=null&&(n=t.replace(Dp,"$&/")+"/"),il(s,e,n,"",function(d){return d})):s!=null&&(Xh(s)&&(s=g1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Pc(i,l);o+=il(i,e,n,u,s)}else if(u=p1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Pc(i,l++),o+=il(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(t,e,n){if(t==null)return t;var r=[],s=0;return il(t,r,"","",function(i){return e.call(n,i,s++)}),r}function v1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},ol={transition:null},_1={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:ol,ReactCurrentOwner:Jh};function Uv(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ja,forEach:function(t,e,n){ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ja(t,function(){e++}),e},toArray:function(t){return ja(t,function(e){return e})||[]},only:function(t){if(!Xh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=yi;he.Fragment=o1;he.Profiler=l1;he.PureComponent=Qh;he.StrictMode=a1;he.Suspense=h1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_1;he.act=Uv;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Jh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ov.call(e,u)&&!Lv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ea,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:c1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u1,_context:t},t.Consumer=t};he.createElement=Fv;he.createFactory=function(t){var e=Fv.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:d1,render:t}};he.isValidElement=Xh;he.lazy=function(t){return{$$typeof:m1,_payload:{_status:-1,_result:t},_init:v1}};he.memo=function(t,e){return{$$typeof:f1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=ol.transition;ol.transition={};try{t()}finally{ol.transition=e}};he.unstable_act=Uv;he.useCallback=function(t,e){return xt.current.useCallback(t,e)};he.useContext=function(t){return xt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};he.useEffect=function(t,e){return xt.current.useEffect(t,e)};he.useId=function(){return xt.current.useId()};he.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return xt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};he.useRef=function(t){return xt.current.useRef(t)};he.useState=function(t){return xt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return xt.current.useTransition()};he.version="18.3.1";bv.exports=he;var O=bv.exports;const x1=s1(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=O,E1=Symbol.for("react.element"),T1=Symbol.for("react.fragment"),I1=Object.prototype.hasOwnProperty,S1=w1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A1={key:!0,ref:!0,__self:!0,__source:!0};function zv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)I1.call(e,r)&&!A1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:E1,type:t,key:i,ref:o,props:s,_owner:S1.current}}Eu.Fragment=T1;Eu.jsx=zv;Eu.jsxs=zv;Rv.exports=Eu;var c=Rv.exports,Sd={},Bv={exports:{}},Ft={},$v={exports:{}},qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,b){var H=B.length;B.push(b);e:for(;0<H;){var X=H-1>>>1,Y=B[X];if(0<s(Y,b))B[X]=b,B[H]=Y,H=X;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var b=B[0],H=B.pop();if(H!==b){B[0]=H;e:for(var X=0,Y=B.length,fe=Y>>>1;X<fe;){var Re=2*(X+1)-1,gt=B[Re],Me=Re+1,Et=B[Me];if(0>s(gt,H))Me<Y&&0>s(Et,gt)?(B[X]=Et,B[Me]=H,X=Me):(B[X]=gt,B[Re]=H,X=Re);else if(Me<Y&&0>s(Et,H))B[X]=Et,B[Me]=H,X=Me;else break e}}return b}function s(B,b){var H=B.sortIndex-b.sortIndex;return H!==0?H:B.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,S=!1,A=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(B){for(var b=n(d);b!==null;){if(b.callback===null)r(d);else if(b.startTime<=B)r(d),b.sortIndex=b.expirationTime,e(u,b);else break;b=n(d)}}function j(B){if(k=!1,N(B),!A)if(n(u)!==null)A=!0,ue(M);else{var b=n(d);b!==null&&W(j,b.startTime-B)}}function M(B,b){A=!1,k&&(k=!1,T(v),v=-1),S=!0;var H=g;try{for(N(b),p=n(u);p!==null&&(!(p.expirationTime>b)||B&&!C());){var X=p.callback;if(typeof X=="function"){p.callback=null,g=p.priorityLevel;var Y=X(p.expirationTime<=b);b=t.unstable_now(),typeof Y=="function"?p.callback=Y:p===n(u)&&r(u),N(b)}else r(u);p=n(u)}if(p!==null)var fe=!0;else{var Re=n(d);Re!==null&&W(j,Re.startTime-b),fe=!1}return fe}finally{p=null,g=H,S=!1}}var $=!1,x=null,v=-1,E=5,I=-1;function C(){return!(t.unstable_now()-I<E)}function P(){if(x!==null){var B=t.unstable_now();I=B;var b=!0;try{b=x(!0,B)}finally{b?_():($=!1,x=null)}}else $=!1}var _;if(typeof w=="function")_=function(){w(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,de=z.port2;z.port1.onmessage=P,_=function(){de.postMessage(null)}}else _=function(){V(P,0)};function ue(B){x=B,$||($=!0,_())}function W(B,b){v=V(function(){B(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){A||S||(A=!0,ue(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var b=3;break;default:b=g}var H=g;g=b;try{return B()}finally{g=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,b){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=g;g=B;try{return b()}finally{g=H}},t.unstable_scheduleCallback=function(B,b,H){var X=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,B){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=H+Y,B={id:f++,callback:b,priorityLevel:B,startTime:H,expirationTime:Y,sortIndex:-1},H>X?(B.sortIndex=H,e(d,B),n(u)===null&&B===n(d)&&(k?(T(v),v=-1):k=!0,W(j,H-X))):(B.sortIndex=Y,e(u,B),A||S||(A=!0,ue(M))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var b=g;return function(){var H=g;g=b;try{return B.apply(this,arguments)}finally{g=H}}}})(qv);$v.exports=qv;var N1=$v.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=O,Lt=N1;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hv=new Set,Co={};function ys(t,e){ni(t,e),ni(t+"Capture",e)}function ni(t,e){for(Co[t]=e,t=0;t<e.length;t++)Hv.add(e[t])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ad=Object.prototype.hasOwnProperty,k1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jp={},Vp={};function P1(t){return Ad.call(Vp,t)?!0:Ad.call(jp,t)?!1:k1.test(t)?Vp[t]=!0:(jp[t]=!0,!1)}function R1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b1(t,e,n,r){if(e===null||typeof e>"u"||R1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zh=/[\-:]([a-z])/g;function ef(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zh,ef);ot[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zh,ef);ot[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zh,ef);ot[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function tf(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b1(e,n,s,r)&&(n=null),r||s===null?P1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qn=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Va=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),nf=Symbol.for("react.strict_mode"),Nd=Symbol.for("react.profiler"),Wv=Symbol.for("react.provider"),Gv=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),Cd=Symbol.for("react.suspense"),kd=Symbol.for("react.suspense_list"),sf=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),Kv=Symbol.for("react.offscreen"),Mp=Symbol.iterator;function qi(t){return t===null||typeof t!="object"?null:(t=Mp&&t[Mp]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,Rc;function eo(t){if(Rc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rc=e&&e[1]||""}return`
`+Rc+t}var bc=!1;function Dc(t,e){if(!t||bc)return"";bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?eo(t):""}function D1(t){switch(t.tag){case 5:return eo(t.type);case 16:return eo("Lazy");case 13:return eo("Suspense");case 19:return eo("SuspenseList");case 0:case 2:case 15:return t=Dc(t.type,!1),t;case 11:return t=Dc(t.type.render,!1),t;case 1:return t=Dc(t.type,!0),t;default:return""}}function Pd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bs:return"Fragment";case Rs:return"Portal";case Nd:return"Profiler";case nf:return"StrictMode";case Cd:return"Suspense";case kd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gv:return(t.displayName||"Context")+".Consumer";case Wv:return(t._context.displayName||"Context")+".Provider";case rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sf:return e=t.displayName||null,e!==null?e:Pd(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return Pd(t(e))}catch{}}return null}function j1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pd(e);case 8:return e===nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function V1(t){var e=Qv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ma(t){t._valueTracker||(t._valueTracker=V1(t))}function Yv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rd(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Op(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jv(t,e){e=e.checked,e!=null&&tf(t,"checked",e,!1)}function bd(t,e){Jv(t,e);var n=Sr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dd(t,e.type,Sr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dd(t,e,n){(e!=="number"||Cl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var to=Array.isArray;function qs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(to(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sr(n)}}function Xv(t,e){var n=Sr(e.value),r=Sr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Up(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,e0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ko(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M1=["Webkit","ms","Moz","O"];Object.keys(ho).forEach(function(t){M1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ho[e]=ho[t]})});function t0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ho.hasOwnProperty(t)&&ho[t]?(""+e).trim():e+"px"}function n0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var O1=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Md(t,e){if(e){if(O1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Od(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=null;function of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fd=null,Hs=null,Ws=null;function zp(t){if(t=ra(t)){if(typeof Fd!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Nu(e),Fd(t.stateNode,t.type,e))}}function r0(t){Hs?Ws?Ws.push(t):Ws=[t]:Hs=t}function s0(){if(Hs){var t=Hs,e=Ws;if(Ws=Hs=null,zp(t),e)for(t=0;t<e.length;t++)zp(e[t])}}function i0(t,e){return t(e)}function o0(){}var jc=!1;function a0(t,e,n){if(jc)return t(e,n);jc=!0;try{return i0(t,e,n)}finally{jc=!1,(Hs!==null||Ws!==null)&&(o0(),s0())}}function Po(t,e){var n=t.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Ud=!1;if(Mn)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){Ud=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{Ud=!1}function L1(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var fo=!1,kl=null,Pl=!1,zd=null,F1={onError:function(t){fo=!0,kl=t}};function U1(t,e,n,r,s,i,o,l,u){fo=!1,kl=null,L1.apply(F1,arguments)}function z1(t,e,n,r,s,i,o,l,u){if(U1.apply(this,arguments),fo){if(fo){var d=kl;fo=!1,kl=null}else throw Error(q(198));Pl||(Pl=!0,zd=d)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bp(t){if(vs(t)!==t)throw Error(q(188))}function B1(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bp(s),t;if(i===r)return Bp(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function u0(t){return t=B1(t),t!==null?c0(t):null}function c0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c0(t);if(e!==null)return e;t=t.sibling}return null}var d0=Lt.unstable_scheduleCallback,$p=Lt.unstable_cancelCallback,$1=Lt.unstable_shouldYield,q1=Lt.unstable_requestPaint,ze=Lt.unstable_now,H1=Lt.unstable_getCurrentPriorityLevel,af=Lt.unstable_ImmediatePriority,h0=Lt.unstable_UserBlockingPriority,Rl=Lt.unstable_NormalPriority,W1=Lt.unstable_LowPriority,f0=Lt.unstable_IdlePriority,Tu=null,gn=null;function G1(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Tu,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:Y1,K1=Math.log,Q1=Math.LN2;function Y1(t){return t>>>=0,t===0?32:31-(K1(t)/Q1|0)|0}var La=64,Fa=4194304;function no(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=no(l):(i&=o,i!==0&&(r=no(i)))}else o=n&~s,o!==0?r=no(o):i!==0&&(r=no(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),s=1<<n,r|=t[n],e&=~s;return r}function J1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=J1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m0(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function Vc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function Z1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function p0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g0,uf,y0,v0,_0,$d=!1,Ua=[],hr=null,fr=null,mr=null,Ro=new Map,bo=new Map,rr=[],eT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qp(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(e.pointerId)}}function Wi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ra(e),e!==null&&uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tT(t,e,n,r,s){switch(e){case"focusin":return hr=Wi(hr,t,e,n,r,s),!0;case"dragenter":return fr=Wi(fr,t,e,n,r,s),!0;case"mouseover":return mr=Wi(mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ro.set(i,Wi(Ro.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bo.set(i,Wi(bo.get(i)||null,t,e,n,r,s)),!0}return!1}function x0(t){var e=Yr(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=l0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){y0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function al(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ld=r,n.target.dispatchEvent(r),Ld=null}else return e=ra(n),e!==null&&uf(e),t.blockedOn=n,!1;e.shift()}return!0}function Hp(t,e,n){al(t)&&n.delete(e)}function nT(){$d=!1,hr!==null&&al(hr)&&(hr=null),fr!==null&&al(fr)&&(fr=null),mr!==null&&al(mr)&&(mr=null),Ro.forEach(Hp),bo.forEach(Hp)}function Gi(t,e){t.blockedOn===e&&(t.blockedOn=null,$d||($d=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,nT)))}function Do(t){function e(s){return Gi(s,t)}if(0<Ua.length){Gi(Ua[0],t);for(var n=1;n<Ua.length;n++){var r=Ua[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hr!==null&&Gi(hr,t),fr!==null&&Gi(fr,t),mr!==null&&Gi(mr,t),Ro.forEach(e),bo.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)x0(n),n.blockedOn===null&&rr.shift()}var Gs=qn.ReactCurrentBatchConfig,Dl=!0;function rT(t,e,n,r){var s=we,i=Gs.transition;Gs.transition=null;try{we=1,cf(t,e,n,r)}finally{we=s,Gs.transition=i}}function sT(t,e,n,r){var s=we,i=Gs.transition;Gs.transition=null;try{we=4,cf(t,e,n,r)}finally{we=s,Gs.transition=i}}function cf(t,e,n,r){if(Dl){var s=qd(t,e,n,r);if(s===null)Hc(t,e,r,jl,n),qp(t,r);else if(tT(s,t,e,n,r))r.stopPropagation();else if(qp(t,r),e&4&&-1<eT.indexOf(t)){for(;s!==null;){var i=ra(s);if(i!==null&&g0(i),i=qd(t,e,n,r),i===null&&Hc(t,e,r,jl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hc(t,e,r,null,n)}}var jl=null;function qd(t,e,n,r){if(jl=null,t=of(r),t=Yr(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function w0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H1()){case af:return 1;case h0:return 4;case Rl:case W1:return 16;case f0:return 536870912;default:return 16}default:return 16}}var ur=null,df=null,ll=null;function E0(){if(ll)return ll;var t,e=df,n=e.length,r,s="value"in ur?ur.value:ur.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ll=s.slice(t,1<r?1-r:void 0)}function ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function za(){return!0}function Wp(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?za:Wp,this.isPropagationStopped=Wp,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=Ut(vi),na=je({},vi,{view:0,detail:0}),iT=Ut(na),Mc,Oc,Ki,Iu=je({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ki&&(Ki&&t.type==="mousemove"?(Mc=t.screenX-Ki.screenX,Oc=t.screenY-Ki.screenY):Oc=Mc=0,Ki=t),Mc)},movementY:function(t){return"movementY"in t?t.movementY:Oc}}),Gp=Ut(Iu),oT=je({},Iu,{dataTransfer:0}),aT=Ut(oT),lT=je({},na,{relatedTarget:0}),Lc=Ut(lT),uT=je({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),cT=Ut(uT),dT=je({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hT=Ut(dT),fT=je({},vi,{data:0}),Kp=Ut(fT),mT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gT[t])?!!e[t]:!1}function ff(){return yT}var vT=je({},na,{key:function(t){if(t.key){var e=mT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(t){return t.type==="keypress"?ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_T=Ut(vT),xT=je({},Iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qp=Ut(xT),wT=je({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),ET=Ut(wT),TT=je({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),IT=Ut(TT),ST=je({},Iu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AT=Ut(ST),NT=[9,13,27,32],mf=Mn&&"CompositionEvent"in window,mo=null;Mn&&"documentMode"in document&&(mo=document.documentMode);var CT=Mn&&"TextEvent"in window&&!mo,T0=Mn&&(!mf||mo&&8<mo&&11>=mo),Yp=" ",Jp=!1;function I0(t,e){switch(t){case"keyup":return NT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ds=!1;function kT(t,e){switch(t){case"compositionend":return S0(e);case"keypress":return e.which!==32?null:(Jp=!0,Yp);case"textInput":return t=e.data,t===Yp&&Jp?null:t;default:return null}}function PT(t,e){if(Ds)return t==="compositionend"||!mf&&I0(t,e)?(t=E0(),ll=df=ur=null,Ds=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T0&&e.locale!=="ko"?null:e.data;default:return null}}var RT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RT[t.type]:e==="textarea"}function A0(t,e,n,r){r0(r),e=Vl(e,"onChange"),0<e.length&&(n=new hf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var po=null,jo=null;function bT(t){O0(t,0)}function Su(t){var e=Ms(t);if(Yv(e))return t}function DT(t,e){if(t==="change")return e}var N0=!1;if(Mn){var Fc;if(Mn){var Uc="oninput"in document;if(!Uc){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),Uc=typeof Zp.oninput=="function"}Fc=Uc}else Fc=!1;N0=Fc&&(!document.documentMode||9<document.documentMode)}function eg(){po&&(po.detachEvent("onpropertychange",C0),jo=po=null)}function C0(t){if(t.propertyName==="value"&&Su(jo)){var e=[];A0(e,jo,t,of(t)),a0(bT,e)}}function jT(t,e,n){t==="focusin"?(eg(),po=e,jo=n,po.attachEvent("onpropertychange",C0)):t==="focusout"&&eg()}function VT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Su(jo)}function MT(t,e){if(t==="click")return Su(e)}function OT(t,e){if(t==="input"||t==="change")return Su(e)}function LT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:LT;function Vo(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ad.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ng(t,e){var n=tg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tg(n)}}function k0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function P0(){for(var t=window,e=Cl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cl(t.document)}return e}function pf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FT(t){var e=P0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k0(n.ownerDocument.documentElement,n)){if(r!==null&&pf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ng(n,i);var o=ng(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var UT=Mn&&"documentMode"in document&&11>=document.documentMode,js=null,Hd=null,go=null,Wd=!1;function rg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wd||js==null||js!==Cl(r)||(r=js,"selectionStart"in r&&pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),go&&Vo(go,r)||(go=r,r=Vl(Hd,"onSelect"),0<r.length&&(e=new hf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=js)))}function Ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vs={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},zc={},R0={};Mn&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Au(t){if(zc[t])return zc[t];if(!Vs[t])return t;var e=Vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R0)return zc[t]=e[n];return t}var b0=Au("animationend"),D0=Au("animationiteration"),j0=Au("animationstart"),V0=Au("transitionend"),M0=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){M0.set(t,e),ys(e,[t])}for(var Bc=0;Bc<sg.length;Bc++){var $c=sg[Bc],zT=$c.toLowerCase(),BT=$c[0].toUpperCase()+$c.slice(1);Vr(zT,"on"+BT)}Vr(b0,"onAnimationEnd");Vr(D0,"onAnimationIteration");Vr(j0,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(V0,"onTransitionEnd");ni("onMouseEnter",["mouseout","mouseover"]);ni("onMouseLeave",["mouseout","mouseover"]);ni("onPointerEnter",["pointerout","pointerover"]);ni("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function ig(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z1(r,e,void 0,t),t.currentTarget=null}function O0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;ig(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;ig(s,l,d),i=u}}}if(Pl)throw t=zd,Pl=!1,zd=null,t}function Ae(t,e){var n=e[Jd];n===void 0&&(n=e[Jd]=new Set);var r=t+"__bubble";n.has(r)||(L0(e,t,2,!1),n.add(r))}function qc(t,e,n){var r=0;e&&(r|=4),L0(n,t,r,e)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[$a]){t[$a]=!0,Hv.forEach(function(n){n!=="selectionchange"&&($T.has(n)||qc(n,!1,t),qc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$a]||(e[$a]=!0,qc("selectionchange",!1,e))}}function L0(t,e,n,r){switch(w0(e)){case 1:var s=rT;break;case 4:s=sT;break;default:s=cf}n=s.bind(null,e,n,t),s=void 0,!Ud||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Yr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}a0(function(){var d=i,f=of(n),p=[];e:{var g=M0.get(t);if(g!==void 0){var S=hf,A=t;switch(t){case"keypress":if(ul(n)===0)break e;case"keydown":case"keyup":S=_T;break;case"focusin":A="focus",S=Lc;break;case"focusout":A="blur",S=Lc;break;case"beforeblur":case"afterblur":S=Lc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=aT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=ET;break;case b0:case D0:case j0:S=cT;break;case V0:S=IT;break;case"scroll":S=iT;break;case"wheel":S=AT;break;case"copy":case"cut":case"paste":S=hT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Qp}var k=(e&4)!==0,V=!k&&t==="scroll",T=k?g!==null?g+"Capture":null:g;k=[];for(var w=d,N;w!==null;){N=w;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,T!==null&&(j=Po(w,T),j!=null&&k.push(Oo(w,j,N)))),V)break;w=w.return}0<k.length&&(g=new S(g,A,null,n,f),p.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==Ld&&(A=n.relatedTarget||n.fromElement)&&(Yr(A)||A[On]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(A=n.relatedTarget||n.toElement,S=d,A=A?Yr(A):null,A!==null&&(V=vs(A),A!==V||A.tag!==5&&A.tag!==6)&&(A=null)):(S=null,A=d),S!==A)){if(k=Gp,j="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(k=Qp,j="onPointerLeave",T="onPointerEnter",w="pointer"),V=S==null?g:Ms(S),N=A==null?g:Ms(A),g=new k(j,w+"leave",S,n,f),g.target=V,g.relatedTarget=N,j=null,Yr(f)===d&&(k=new k(T,w+"enter",A,n,f),k.target=N,k.relatedTarget=V,j=k),V=j,S&&A)t:{for(k=S,T=A,w=0,N=k;N;N=As(N))w++;for(N=0,j=T;j;j=As(j))N++;for(;0<w-N;)k=As(k),w--;for(;0<N-w;)T=As(T),N--;for(;w--;){if(k===T||T!==null&&k===T.alternate)break t;k=As(k),T=As(T)}k=null}else k=null;S!==null&&og(p,g,S,k,!1),A!==null&&V!==null&&og(p,V,A,k,!0)}}e:{if(g=d?Ms(d):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var M=DT;else if(Xp(g))if(N0)M=OT;else{M=VT;var $=jT}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=MT);if(M&&(M=M(t,d))){A0(p,M,n,f);break e}$&&$(t,g,d),t==="focusout"&&($=g._wrapperState)&&$.controlled&&g.type==="number"&&Dd(g,"number",g.value)}switch($=d?Ms(d):window,t){case"focusin":(Xp($)||$.contentEditable==="true")&&(js=$,Hd=d,go=null);break;case"focusout":go=Hd=js=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,rg(p,n,f);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":rg(p,n,f)}var x;if(mf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ds?I0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(T0&&n.locale!=="ko"&&(Ds||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ds&&(x=E0()):(ur=f,df="value"in ur?ur.value:ur.textContent,Ds=!0)),$=Vl(d,v),0<$.length&&(v=new Kp(v,t,null,n,f),p.push({event:v,listeners:$}),x?v.data=x:(x=S0(n),x!==null&&(v.data=x)))),(x=CT?kT(t,n):PT(t,n))&&(d=Vl(d,"onBeforeInput"),0<d.length&&(f=new Kp("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=x))}O0(p,e)})}function Oo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Po(t,n),i!=null&&r.unshift(Oo(t,i,s)),i=Po(t,e),i!=null&&r.push(Oo(t,i,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function og(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Po(n,i),u!=null&&o.unshift(Oo(n,u,l))):s||(u=Po(n,i),u!=null&&o.push(Oo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qT=/\r\n?/g,HT=/\u0000|\uFFFD/g;function ag(t){return(typeof t=="string"?t:""+t).replace(qT,`
`).replace(HT,"")}function qa(t,e,n){if(e=ag(e),ag(t)!==e&&n)throw Error(q(425))}function Ml(){}var Gd=null,Kd=null;function Qd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,WT=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,GT=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(t){return lg.resolve(null).then(t).catch(KT)}:Yd;function KT(t){setTimeout(function(){throw t})}function Wc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Do(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Do(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _i=Math.random().toString(36).slice(2),mn="__reactFiber$"+_i,Lo="__reactProps$"+_i,On="__reactContainer$"+_i,Jd="__reactEvents$"+_i,QT="__reactListeners$"+_i,YT="__reactHandles$"+_i;function Yr(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ug(t);t!==null;){if(n=t[mn])return n;t=ug(t)}return e}t=n,n=t.parentNode}return null}function ra(t){return t=t[mn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Nu(t){return t[Lo]||null}var Xd=[],Os=-1;function Mr(t){return{current:t}}function Ce(t){0>Os||(t.current=Xd[Os],Xd[Os]=null,Os--)}function Ie(t,e){Os++,Xd[Os]=t.current,t.current=e}var Ar={},mt=Mr(Ar),kt=Mr(!1),ss=Ar;function ri(t,e){var n=t.type.contextTypes;if(!n)return Ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Ol(){Ce(kt),Ce(mt)}function cg(t,e,n){if(mt.current!==Ar)throw Error(q(168));Ie(mt,e),Ie(kt,n)}function F0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,j1(t)||"Unknown",s));return je({},n,r)}function Ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ar,ss=mt.current,Ie(mt,t),Ie(kt,kt.current),!0}function dg(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=F0(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Ce(kt),Ce(mt),Ie(mt,t)):Ce(kt),Ie(kt,n)}var Cn=null,Cu=!1,Gc=!1;function U0(t){Cn===null?Cn=[t]:Cn.push(t)}function JT(t){Cu=!0,U0(t)}function Or(){if(!Gc&&Cn!==null){Gc=!0;var t=0,e=we;try{var n=Cn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,Cu=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),d0(af,Or),s}finally{we=e,Gc=!1}}return null}var Ls=[],Fs=0,Fl=null,Ul=0,zt=[],Bt=0,is=null,kn=1,Pn="";function Gr(t,e){Ls[Fs++]=Ul,Ls[Fs++]=Fl,Fl=t,Ul=e}function z0(t,e,n){zt[Bt++]=kn,zt[Bt++]=Pn,zt[Bt++]=is,is=t;var r=kn;t=Pn;var s=32-Zt(r)-1;r&=~(1<<s),n+=1;var i=32-Zt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kn=1<<32-Zt(e)+s|n<<s|r,Pn=i+t}else kn=1<<i|n<<s|r,Pn=t}function gf(t){t.return!==null&&(Gr(t,1),z0(t,1,0))}function yf(t){for(;t===Fl;)Fl=Ls[--Fs],Ls[Fs]=null,Ul=Ls[--Fs],Ls[Fs]=null;for(;t===is;)is=zt[--Bt],zt[Bt]=null,Pn=zt[--Bt],zt[Bt]=null,kn=zt[--Bt],zt[Bt]=null}var Ot=null,Vt=null,ke=!1,Jt=null;function B0(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Vt=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:kn,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Vt=null,!0):!1;default:return!1}}function Zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eh(t){if(ke){var e=Vt;if(e){var n=e;if(!hg(t,e)){if(Zd(t))throw Error(q(418));e=pr(n.nextSibling);var r=Ot;e&&hg(t,e)?B0(r,n):(t.flags=t.flags&-4097|2,ke=!1,Ot=t)}}else{if(Zd(t))throw Error(q(418));t.flags=t.flags&-4097|2,ke=!1,Ot=t}}}function fg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Ha(t){if(t!==Ot)return!1;if(!ke)return fg(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qd(t.type,t.memoizedProps)),e&&(e=Vt)){if(Zd(t))throw $0(),Error(q(418));for(;e;)B0(t,e),e=pr(e.nextSibling)}if(fg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Ot?pr(t.stateNode.nextSibling):null;return!0}function $0(){for(var t=Vt;t;)t=pr(t.nextSibling)}function si(){Vt=Ot=null,ke=!1}function vf(t){Jt===null?Jt=[t]:Jt.push(t)}var XT=qn.ReactCurrentBatchConfig;function Qi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Wa(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mg(t){var e=t._init;return e(t._payload)}function q0(t){function e(T,w){if(t){var N=T.deletions;N===null?(T.deletions=[w],T.flags|=16):N.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function s(T,w){return T=_r(T,w),T.index=0,T.sibling=null,T}function i(T,w,N){return T.index=N,t?(N=T.alternate,N!==null?(N=N.index,N<w?(T.flags|=2,w):N):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,w,N,j){return w===null||w.tag!==6?(w=ed(N,T.mode,j),w.return=T,w):(w=s(w,N),w.return=T,w)}function u(T,w,N,j){var M=N.type;return M===bs?f(T,w,N.props.children,j,N.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===tr&&mg(M)===w.type)?(j=s(w,N.props),j.ref=Qi(T,w,N),j.return=T,j):(j=gl(N.type,N.key,N.props,null,T.mode,j),j.ref=Qi(T,w,N),j.return=T,j)}function d(T,w,N,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=td(N,T.mode,j),w.return=T,w):(w=s(w,N.children||[]),w.return=T,w)}function f(T,w,N,j,M){return w===null||w.tag!==7?(w=ts(N,T.mode,j,M),w.return=T,w):(w=s(w,N),w.return=T,w)}function p(T,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ed(""+w,T.mode,N),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Va:return N=gl(w.type,w.key,w.props,null,T.mode,N),N.ref=Qi(T,null,w),N.return=T,N;case Rs:return w=td(w,T.mode,N),w.return=T,w;case tr:var j=w._init;return p(T,j(w._payload),N)}if(to(w)||qi(w))return w=ts(w,T.mode,N,null),w.return=T,w;Wa(T,w)}return null}function g(T,w,N,j){var M=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:l(T,w,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Va:return N.key===M?u(T,w,N,j):null;case Rs:return N.key===M?d(T,w,N,j):null;case tr:return M=N._init,g(T,w,M(N._payload),j)}if(to(N)||qi(N))return M!==null?null:f(T,w,N,j,null);Wa(T,N)}return null}function S(T,w,N,j,M){if(typeof j=="string"&&j!==""||typeof j=="number")return T=T.get(N)||null,l(w,T,""+j,M);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Va:return T=T.get(j.key===null?N:j.key)||null,u(w,T,j,M);case Rs:return T=T.get(j.key===null?N:j.key)||null,d(w,T,j,M);case tr:var $=j._init;return S(T,w,N,$(j._payload),M)}if(to(j)||qi(j))return T=T.get(N)||null,f(w,T,j,M,null);Wa(w,j)}return null}function A(T,w,N,j){for(var M=null,$=null,x=w,v=w=0,E=null;x!==null&&v<N.length;v++){x.index>v?(E=x,x=null):E=x.sibling;var I=g(T,x,N[v],j);if(I===null){x===null&&(x=E);break}t&&x&&I.alternate===null&&e(T,x),w=i(I,w,v),$===null?M=I:$.sibling=I,$=I,x=E}if(v===N.length)return n(T,x),ke&&Gr(T,v),M;if(x===null){for(;v<N.length;v++)x=p(T,N[v],j),x!==null&&(w=i(x,w,v),$===null?M=x:$.sibling=x,$=x);return ke&&Gr(T,v),M}for(x=r(T,x);v<N.length;v++)E=S(x,T,v,N[v],j),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?v:E.key),w=i(E,w,v),$===null?M=E:$.sibling=E,$=E);return t&&x.forEach(function(C){return e(T,C)}),ke&&Gr(T,v),M}function k(T,w,N,j){var M=qi(N);if(typeof M!="function")throw Error(q(150));if(N=M.call(N),N==null)throw Error(q(151));for(var $=M=null,x=w,v=w=0,E=null,I=N.next();x!==null&&!I.done;v++,I=N.next()){x.index>v?(E=x,x=null):E=x.sibling;var C=g(T,x,I.value,j);if(C===null){x===null&&(x=E);break}t&&x&&C.alternate===null&&e(T,x),w=i(C,w,v),$===null?M=C:$.sibling=C,$=C,x=E}if(I.done)return n(T,x),ke&&Gr(T,v),M;if(x===null){for(;!I.done;v++,I=N.next())I=p(T,I.value,j),I!==null&&(w=i(I,w,v),$===null?M=I:$.sibling=I,$=I);return ke&&Gr(T,v),M}for(x=r(T,x);!I.done;v++,I=N.next())I=S(x,T,v,I.value,j),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?v:I.key),w=i(I,w,v),$===null?M=I:$.sibling=I,$=I);return t&&x.forEach(function(P){return e(T,P)}),ke&&Gr(T,v),M}function V(T,w,N,j){if(typeof N=="object"&&N!==null&&N.type===bs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Va:e:{for(var M=N.key,$=w;$!==null;){if($.key===M){if(M=N.type,M===bs){if($.tag===7){n(T,$.sibling),w=s($,N.props.children),w.return=T,T=w;break e}}else if($.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===tr&&mg(M)===$.type){n(T,$.sibling),w=s($,N.props),w.ref=Qi(T,$,N),w.return=T,T=w;break e}n(T,$);break}else e(T,$);$=$.sibling}N.type===bs?(w=ts(N.props.children,T.mode,j,N.key),w.return=T,T=w):(j=gl(N.type,N.key,N.props,null,T.mode,j),j.ref=Qi(T,w,N),j.return=T,T=j)}return o(T);case Rs:e:{for($=N.key;w!==null;){if(w.key===$)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(T,w.sibling),w=s(w,N.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=td(N,T.mode,j),w.return=T,T=w}return o(T);case tr:return $=N._init,V(T,w,$(N._payload),j)}if(to(N))return A(T,w,N,j);if(qi(N))return k(T,w,N,j);Wa(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(T,w.sibling),w=s(w,N),w.return=T,T=w):(n(T,w),w=ed(N,T.mode,j),w.return=T,T=w),o(T)):n(T,w)}return V}var ii=q0(!0),H0=q0(!1),zl=Mr(null),Bl=null,Us=null,_f=null;function xf(){_f=Us=Bl=null}function wf(t){var e=zl.current;Ce(zl),t._currentValue=e}function th(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){Bl=t,_f=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(_f!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(Bl===null)throw Error(q(308));Us=t,Bl.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var Jr=null;function Ef(t){Jr===null?Jr=[t]:Jr.push(t)}function W0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ef(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ln(t,r)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function Tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ln(t,n)}return s=r.interleaved,s===null?(e.next=e,Ef(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ln(t,n)}function cl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}function pg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $l(t,e,n,r){var s=t.updateQueue;nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,k=l;switch(g=e,S=n,k.tag){case 1:if(A=k.payload,typeof A=="function"){p=A.call(S,p,g);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=k.payload,g=typeof A=="function"?A.call(S,p,g):A,g==null)break e;p=je({},p,g);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=S,u=p):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=p}}function gg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var sa={},yn=Mr(sa),Fo=Mr(sa),Uo=Mr(sa);function Xr(t){if(t===sa)throw Error(q(174));return t}function If(t,e){switch(Ie(Uo,e),Ie(Fo,t),Ie(yn,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vd(e,t)}Ce(yn),Ie(yn,e)}function oi(){Ce(yn),Ce(Fo),Ce(Uo)}function K0(t){Xr(Uo.current);var e=Xr(yn.current),n=Vd(e,t.type);e!==n&&(Ie(Fo,t),Ie(yn,n))}function Sf(t){Fo.current===t&&(Ce(yn),Ce(Fo))}var be=Mr(0);function ql(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kc=[];function Af(){for(var t=0;t<Kc.length;t++)Kc[t]._workInProgressVersionPrimary=null;Kc.length=0}var dl=qn.ReactCurrentDispatcher,Qc=qn.ReactCurrentBatchConfig,os=0,De=null,Ke=null,Ze=null,Hl=!1,yo=!1,zo=0,ZT=0;function lt(){throw Error(q(321))}function Nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Cf(t,e,n,r,s,i){if(os=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dl.current=t===null||t.memoizedState===null?rI:sI,t=n(r,s),yo){i=0;do{if(yo=!1,zo=0,25<=i)throw Error(q(301));i+=1,Ze=Ke=null,e.updateQueue=null,dl.current=iI,t=n(r,s)}while(yo)}if(dl.current=Wl,e=Ke!==null&&Ke.next!==null,os=0,Ze=Ke=De=null,Hl=!1,e)throw Error(q(300));return t}function kf(){var t=zo!==0;return zo=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?De.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Gt(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?De.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error(q(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?De.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Bo(t,e){return typeof e=="function"?e(t):e}function Yc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((os&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,De.lanes|=f,as|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,sn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,as|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q0(){}function Y0(t,e){var n=De,r=Gt(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,Pf(Z0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,$o(9,X0.bind(null,n,r,s,e),void 0,null),et===null)throw Error(q(349));os&30||J0(n,e,s)}return s}function J0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function X0(t,e,n,r){e.value=n,e.getSnapshot=r,e_(e)&&t_(t)}function Z0(t,e,n){return n(function(){e_(e)&&t_(t)})}function e_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function t_(t){var e=Ln(t,1);e!==null&&en(e,t,1,-1)}function yg(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:t},e.queue=t,t=t.dispatch=nI.bind(null,De,t),[e.memoizedState,t]}function $o(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function n_(){return Gt().memoizedState}function hl(t,e,n,r){var s=hn();De.flags|=t,s.memoizedState=$o(1|e,n,void 0,r===void 0?null:r)}function ku(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Nf(r,o.deps)){s.memoizedState=$o(e,n,i,r);return}}De.flags|=t,s.memoizedState=$o(1|e,n,i,r)}function vg(t,e){return hl(8390656,8,t,e)}function Pf(t,e){return ku(2048,8,t,e)}function r_(t,e){return ku(4,2,t,e)}function s_(t,e){return ku(4,4,t,e)}function i_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o_(t,e,n){return n=n!=null?n.concat([t]):null,ku(4,4,i_.bind(null,e,t),n)}function Rf(){}function a_(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function l_(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function u_(t,e,n){return os&21?(sn(n,e)||(n=m0(),De.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function eI(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Qc.transition;Qc.transition={};try{t(!1),e()}finally{we=n,Qc.transition=r}}function c_(){return Gt().memoizedState}function tI(t,e,n){var r=vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d_(t))h_(e,n);else if(n=W0(t,e,n,r),n!==null){var s=_t();en(n,t,r,s),f_(n,e,r)}}function nI(t,e,n){var r=vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d_(t))h_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,sn(l,o)){var u=e.interleaved;u===null?(s.next=s,Ef(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=W0(t,e,s,r),n!==null&&(s=_t(),en(n,t,r,s),f_(n,e,r))}}function d_(t){var e=t.alternate;return t===De||e!==null&&e===De}function h_(t,e){yo=Hl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function f_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lf(t,n)}}var Wl={readContext:Wt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},rI={readContext:Wt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:vg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,i_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tI.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:yg,useDebugValue:Rf,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=yg(!1),e=t[0];return t=eI.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=hn();if(ke){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),et===null)throw Error(q(349));os&30||J0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vg(Z0.bind(null,r,i,t),[t]),r.flags|=2048,$o(9,X0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=et.identifierPrefix;if(ke){var n=Pn,r=kn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sI={readContext:Wt,useCallback:a_,useContext:Wt,useEffect:Pf,useImperativeHandle:o_,useInsertionEffect:r_,useLayoutEffect:s_,useMemo:l_,useReducer:Yc,useRef:n_,useState:function(){return Yc(Bo)},useDebugValue:Rf,useDeferredValue:function(t){var e=Gt();return u_(e,Ke.memoizedState,t)},useTransition:function(){var t=Yc(Bo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:c_,unstable_isNewReconciler:!1},iI={readContext:Wt,useCallback:a_,useContext:Wt,useEffect:Pf,useImperativeHandle:o_,useInsertionEffect:r_,useLayoutEffect:s_,useMemo:l_,useReducer:Jc,useRef:n_,useState:function(){return Jc(Bo)},useDebugValue:Rf,useDeferredValue:function(t){var e=Gt();return Ke===null?e.memoizedState=t:u_(e,Ke.memoizedState,t)},useTransition:function(){var t=Jc(Bo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:Y0,useId:c_,unstable_isNewReconciler:!1};function Qt(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pu={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=vr(t),i=jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,s),e!==null&&(en(e,t,s,r),cl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=vr(t),i=jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gr(t,i,s),e!==null&&(en(e,t,s,r),cl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=vr(t),s=jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=gr(t,s,r),e!==null&&(en(e,t,r,n),cl(e,t,r))}};function _g(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Vo(n,r)||!Vo(s,i):!0}function m_(t,e,n){var r=!1,s=Ar,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=Pt(e)?ss:mt.current,r=e.contextTypes,i=(r=r!=null)?ri(t,s):Ar),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function xg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pu.enqueueReplaceState(e,e.state,null)}function rh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=Pt(e)?ss:mt.current,s.context=ri(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pu.enqueueReplaceState(s,s.state,null),$l(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ai(t,e){try{var n="",r=e;do n+=D1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oI=typeof WeakMap=="function"?WeakMap:Map;function p_(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kl||(Kl=!0,mh=r),sh(t,e)},n}function g_(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sh(t,e),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xI.bind(null,t,e,n),e.then(t,t))}function Eg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var aI=qn.ReactCurrentOwner,At=!1;function vt(t,e,n,r){e.child=t===null?H0(e,null,n,r):ii(e,t.child,n,r)}function Ig(t,e,n,r,s){n=n.render;var i=e.ref;return Ks(e,s),r=Cf(t,e,n,r,i,s),n=kf(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(ke&&n&&gf(e),e.flags|=1,vt(t,e,r,s),e.child)}function Sg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ff(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,y_(t,e,i,r,s)):(t=gl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vo,n(o,r)&&t.ref===e.ref)return Fn(t,e,s)}return e.flags|=1,t=_r(i,r),t.ref=e.ref,t.return=e,e.child=t}function y_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vo(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Fn(t,e,s)}return ih(t,e,n,r,s)}function v_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Bs,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Bs,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(Bs,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(Bs,Dt),Dt|=r;return vt(t,e,s,n),e.child}function __(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ih(t,e,n,r,s){var i=Pt(n)?ss:mt.current;return i=ri(e,i),Ks(e,s),n=Cf(t,e,n,r,i,s),r=kf(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(ke&&r&&gf(e),e.flags|=1,vt(t,e,n,s),e.child)}function Ag(t,e,n,r,s){if(Pt(n)){var i=!0;Ll(e)}else i=!1;if(Ks(e,s),e.stateNode===null)fl(t,e),m_(e,n,r),rh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Wt(d):(d=Pt(n)?ss:mt.current,d=ri(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&xg(e,o,r,d),nr=!1;var g=e.memoizedState;o.state=g,$l(e,r,o,s),u=e.memoizedState,l!==r||g!==u||kt.current||nr?(typeof f=="function"&&(nh(e,n,f,r),u=e.memoizedState),(l=nr||_g(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,G0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Qt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wt(u):(u=Pt(n)?ss:mt.current,u=ri(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&xg(e,o,r,u),nr=!1,g=e.memoizedState,o.state=g,$l(e,r,o,s);var A=e.memoizedState;l!==p||g!==A||kt.current||nr?(typeof S=="function"&&(nh(e,n,S,r),A=e.memoizedState),(d=nr||_g(e,n,d,r,g,A,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return oh(t,e,n,r,i,s)}function oh(t,e,n,r,s,i){__(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&dg(e,n,!1),Fn(t,e,i);r=e.stateNode,aI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ii(e,t.child,null,i),e.child=ii(e,null,l,i)):vt(t,e,l,i),e.memoizedState=r.state,s&&dg(e,n,!0),e.child}function x_(t){var e=t.stateNode;e.pendingContext?cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cg(t,e.context,!1),If(t,e.containerInfo)}function Ng(t,e,n,r,s){return si(),vf(s),e.flags|=256,vt(t,e,n,r),e.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(t){return{baseLanes:t,cachePool:null,transitions:null}}function w_(t,e,n){var r=e.pendingProps,s=be.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(be,s&1),t===null)return eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Du(o,r,0,null),t=ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lh(n),e.memoizedState=ah,t):bf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return lI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=_r(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=_r(l,i):(i=ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?lh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ah,r}return i=t.child,t=i.sibling,r=_r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bf(t,e){return e=Du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ga(t,e,n,r){return r!==null&&vf(r),ii(e,t.child,null,n),t=bf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xc(Error(q(422))),Ga(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Du({mode:"visible",children:r.children},s,0,null),i=ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ii(e,t.child,null,o),e.child.memoizedState=lh(o),e.memoizedState=ah,i);if(!(e.mode&1))return Ga(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(q(419)),r=Xc(i,r,void 0),Ga(t,e,o,r)}if(l=(o&t.childLanes)!==0,At||l){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(t,s),en(r,t,s,-1))}return Lf(),r=Xc(Error(q(421))),Ga(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=wI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=pr(s.nextSibling),Ot=e,ke=!0,Jt=null,t!==null&&(zt[Bt++]=kn,zt[Bt++]=Pn,zt[Bt++]=is,kn=t.id,Pn=t.overflow,is=e),e=bf(e,r.children),e.flags|=4096,e)}function Cg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),th(t.return,e,n)}function Zc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function E_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cg(t,n,e);else if(t.tag===19)Cg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(be,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ql(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ql(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zc(e,!0,n,null,i);break;case"together":Zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uI(t,e,n){switch(e.tag){case 3:x_(e),si();break;case 5:K0(e);break;case 1:Pt(e.type)&&Ll(e);break;case 4:If(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(zl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?w_(t,e,n):(Ie(be,be.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);Ie(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return E_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,v_(t,e,n)}return Fn(t,e,n)}var T_,uh,I_,S_;T_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uh=function(){};I_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xr(yn.current);var i=null;switch(n){case"input":s=Rd(t,s),r=Rd(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=jd(t,s),r=jd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ml)}Md(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Co.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ae("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};S_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yi(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cI(t,e,n){var r=e.pendingProps;switch(yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Pt(e.type)&&Ol(),ut(e),null;case 3:return r=e.stateNode,oi(),Ce(kt),Ce(mt),Af(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(yh(Jt),Jt=null))),uh(t,e),ut(e),null;case 5:Sf(e);var s=Xr(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)I_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ut(e),null}if(t=Xr(yn.current),Ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mn]=e,r[Lo]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<ro.length;s++)Ae(ro[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Op(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Fp(r,i),Ae("invalid",r)}Md(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&qa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qa(r.textContent,l,t),s=["children",""+l]):Co.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Ma(r),Lp(r,i,!0);break;case"textarea":Ma(r),Up(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ml)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mn]=e,t[Lo]=r,T_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Od(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<ro.length;s++)Ae(ro[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":Op(t,r),s=Rd(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Fp(t,r),s=jd(t,r),Ae("invalid",t);break;default:s=r}Md(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?n0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&e0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ko(t,u):typeof u=="number"&&ko(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Co.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&tf(t,i,u,o))}switch(n){case"input":Ma(t),Lp(t,r,!1);break;case"textarea":Ma(t),Up(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?qs(t,!!r.multiple,i,!1):r.defaultValue!=null&&qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)S_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Xr(Uo.current),Xr(yn.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:qa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ce(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Vt!==null&&e.mode&1&&!(e.flags&128))$0(),si(),e.flags|=98560,i=!1;else if(i=Ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[mn]=e}else si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else Jt!==null&&(yh(Jt),Jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Qe===0&&(Qe=3):Lf())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return oi(),uh(t,e),t===null&&Mo(e.stateNode.containerInfo),ut(e),null;case 10:return wf(e.type._context),ut(e),null;case 17:return Pt(e.type)&&Ol(),ut(e),null;case 19:if(Ce(be),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Yi(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ql(t),o!==null){for(e.flags|=128,Yi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(be,be.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>li&&(e.flags|=128,r=!0,Yi(i,!1),e.lanes=4194304)}else{if(!r)if(t=ql(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return ut(e),null}else 2*ze()-i.renderingStartTime>li&&n!==1073741824&&(e.flags|=128,r=!0,Yi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,n=be.current,Ie(be,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function dI(t,e){switch(yf(e),e.tag){case 1:return Pt(e.type)&&Ol(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oi(),Ce(kt),Ce(mt),Af(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sf(e),null;case 13:if(Ce(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(be),null;case 4:return oi(),null;case 10:return wf(e.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var Ka=!1,ht=!1,hI=typeof WeakSet=="function"?WeakSet:Set,J=null;function zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function ch(t,e,n){try{n()}catch(r){Le(t,e,r)}}var kg=!1;function fI(t,e){if(Gd=Dl,t=P0(),pf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var S;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(S=p.firstChild)!==null;)g=p,p=S;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(S=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},Dl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var k=A.memoizedProps,V=A.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?k:Qt(e.type,k),V);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){Le(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return A=kg,kg=!1,A}function vo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ch(e,n,i)}s=s.next}while(s!==r)}}function Ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function A_(t){var e=t.alternate;e!==null&&(t.alternate=null,A_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[Lo],delete e[Jd],delete e[QT],delete e[YT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N_(t){return t.tag===5||t.tag===3||t.tag===4}function Pg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ml));else if(r!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}function fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}var tt=null,Yt=!1;function Zn(t,e,n){for(n=n.child;n!==null;)C_(t,e,n),n=n.sibling}function C_(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Tu,n)}catch{}switch(n.tag){case 5:ht||zs(n,e);case 6:var r=tt,s=Yt;tt=null,Zn(t,e,n),tt=r,Yt=s,tt!==null&&(Yt?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Yt?(t=tt,n=n.stateNode,t.nodeType===8?Wc(t.parentNode,n):t.nodeType===1&&Wc(t,n),Do(t)):Wc(tt,n.stateNode));break;case 4:r=tt,s=Yt,tt=n.stateNode.containerInfo,Yt=!0,Zn(t,e,n),tt=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ch(n,e,o),s=s.next}while(s!==r)}Zn(t,e,n);break;case 1:if(!ht&&(zs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}Zn(t,e,n);break;case 21:Zn(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Zn(t,e,n),ht=r):Zn(t,e,n);break;default:Zn(t,e,n)}}function Rg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hI),e.forEach(function(r){var s=EI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,Yt=!1;break e;case 3:tt=l.stateNode.containerInfo,Yt=!0;break e;case 4:tt=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(tt===null)throw Error(q(160));C_(i,o,s),tt=null,Yt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k_(e,t),e=e.sibling}function k_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),dn(t),r&4){try{vo(3,t,t.return),Ru(3,t)}catch(k){Le(t,t.return,k)}try{vo(5,t,t.return)}catch(k){Le(t,t.return,k)}}break;case 1:Kt(e,t),dn(t),r&512&&n!==null&&zs(n,n.return);break;case 5:if(Kt(e,t),dn(t),r&512&&n!==null&&zs(n,n.return),t.flags&32){var s=t.stateNode;try{ko(s,"")}catch(k){Le(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Jv(s,i),Od(l,o);var d=Od(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?n0(s,p):f==="dangerouslySetInnerHTML"?e0(s,p):f==="children"?ko(s,p):tf(s,f,p,d)}switch(l){case"input":bd(s,i);break;case"textarea":Xv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?qs(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?qs(s,!!i.multiple,i.defaultValue,!0):qs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lo]=i}catch(k){Le(t,t.return,k)}}break;case 6:if(Kt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Le(t,t.return,k)}}break;case 3:if(Kt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Do(e.containerInfo)}catch(k){Le(t,t.return,k)}break;case 4:Kt(e,t),dn(t);break;case 13:Kt(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vf=ze())),r&4&&Rg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,Kt(e,t),ht=d):Kt(e,t),dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(J=t,f=t.child;f!==null;){for(p=J=f;J!==null;){switch(g=J,S=g.child,g.tag){case 0:case 11:case 14:case 15:vo(4,g,g.return);break;case 1:zs(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(k){Le(r,n,k)}}break;case 5:zs(g,g.return);break;case 22:if(g.memoizedState!==null){Dg(p);continue}}S!==null?(S.return=g,J=S):Dg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=t0("display",o))}catch(k){Le(t,t.return,k)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){Le(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Kt(e,t),dn(t),r&4&&Rg(t);break;case 21:break;default:Kt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N_(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ko(s,""),r.flags&=-33);var i=Pg(t);fh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Pg(t);hh(t,l,o);break;default:throw Error(q(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mI(t,e,n){J=t,P_(t)}function P_(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ka;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ht;l=Ka;var d=ht;if(Ka=o,(ht=u)&&!d)for(J=s;J!==null;)o=J,u=o.child,o.tag===22&&o.memoizedState!==null?jg(s):u!==null?(u.return=o,J=u):jg(s);for(;i!==null;)J=i,P_(i),i=i.sibling;J=s,Ka=l,ht=d}bg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):bg(t)}}function bg(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Do(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ht||e.flags&512&&dh(e)}catch(g){Le(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Dg(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function jg(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ru(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{dh(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{dh(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var pI=Math.ceil,Gl=qn.ReactCurrentDispatcher,Df=qn.ReactCurrentOwner,Ht=qn.ReactCurrentBatchConfig,ve=0,et=null,qe=null,it=0,Dt=0,Bs=Mr(0),Qe=0,qo=null,as=0,bu=0,jf=0,_o=null,It=null,Vf=0,li=1/0,Nn=null,Kl=!1,mh=null,yr=null,Qa=!1,cr=null,Ql=0,xo=0,ph=null,ml=-1,pl=0;function _t(){return ve&6?ze():ml!==-1?ml:ml=ze()}function vr(t){return t.mode&1?ve&2&&it!==0?it&-it:XT.transition!==null?(pl===0&&(pl=m0()),pl):(t=we,t!==0||(t=window.event,t=t===void 0?16:w0(t.type)),t):1}function en(t,e,n,r){if(50<xo)throw xo=0,ph=null,Error(q(185));ta(t,n,r),(!(ve&2)||t!==et)&&(t===et&&(!(ve&2)&&(bu|=n),Qe===4&&sr(t,it)),Rt(t,r),n===1&&ve===0&&!(e.mode&1)&&(li=ze()+500,Cu&&Or()))}function Rt(t,e){var n=t.callbackNode;X1(t,e);var r=bl(t,t===et?it:0);if(r===0)n!==null&&$p(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$p(n),e===1)t.tag===0?JT(Vg.bind(null,t)):U0(Vg.bind(null,t)),GT(function(){!(ve&6)&&Or()}),n=null;else{switch(p0(r)){case 1:n=af;break;case 4:n=h0;break;case 16:n=Rl;break;case 536870912:n=f0;break;default:n=Rl}n=L_(n,R_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R_(t,e){if(ml=-1,pl=0,ve&6)throw Error(q(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=bl(t,t===et?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yl(t,r);else{e=r;var s=ve;ve|=2;var i=D_();(et!==t||it!==e)&&(Nn=null,li=ze()+500,es(t,e));do try{vI();break}catch(l){b_(t,l)}while(!0);xf(),Gl.current=i,ve=s,qe!==null?e=0:(et=null,it=0,e=Qe)}if(e!==0){if(e===2&&(s=Bd(t),s!==0&&(r=s,e=gh(t,s))),e===1)throw n=qo,es(t,0),sr(t,r),Rt(t,ze()),n;if(e===6)sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!gI(s)&&(e=Yl(t,r),e===2&&(i=Bd(t),i!==0&&(r=i,e=gh(t,i))),e===1))throw n=qo,es(t,0),sr(t,r),Rt(t,ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Kr(t,It,Nn);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=Vf+500-ze(),10<e)){if(bl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yd(Kr.bind(null,t,It,Nn),e);break}Kr(t,It,Nn);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pI(r/1960))-r,10<r){t.timeoutHandle=Yd(Kr.bind(null,t,It,Nn),r);break}Kr(t,It,Nn);break;case 5:Kr(t,It,Nn);break;default:throw Error(q(329))}}}return Rt(t,ze()),t.callbackNode===n?R_.bind(null,t):null}function gh(t,e){var n=_o;return t.current.memoizedState.isDehydrated&&(es(t,e).flags|=256),t=Yl(t,e),t!==2&&(e=It,It=n,e!==null&&yh(e)),t}function yh(t){It===null?It=t:It.push.apply(It,t)}function gI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~jf,e&=~bu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function Vg(t){if(ve&6)throw Error(q(327));Qs();var e=bl(t,0);if(!(e&1))return Rt(t,ze()),null;var n=Yl(t,e);if(t.tag!==0&&n===2){var r=Bd(t);r!==0&&(e=r,n=gh(t,r))}if(n===1)throw n=qo,es(t,0),sr(t,e),Rt(t,ze()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,It,Nn),Rt(t,ze()),null}function Mf(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(li=ze()+500,Cu&&Or())}}function ls(t){cr!==null&&cr.tag===0&&!(ve&6)&&Qs();var e=ve;ve|=1;var n=Ht.transition,r=we;try{if(Ht.transition=null,we=1,t)return t()}finally{we=r,Ht.transition=n,ve=e,!(ve&6)&&Or()}}function Of(){Dt=Bs.current,Ce(Bs)}function es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WT(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ol();break;case 3:oi(),Ce(kt),Ce(mt),Af();break;case 5:Sf(r);break;case 4:oi();break;case 13:Ce(be);break;case 19:Ce(be);break;case 10:wf(r.type._context);break;case 22:case 23:Of()}n=n.return}if(et=t,qe=t=_r(t.current,null),it=Dt=e,Qe=0,qo=null,jf=bu=as=0,It=_o=null,Jr!==null){for(e=0;e<Jr.length;e++)if(n=Jr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Jr=null}return t}function b_(t,e){do{var n=qe;try{if(xf(),dl.current=Wl,Hl){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hl=!1}if(os=0,Ze=Ke=De=null,yo=!1,zo=0,Df.current=null,n===null||n.return===null){Qe=1,qo=e,qe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Eg(o);if(S!==null){S.flags&=-257,Tg(S,o,l,i,e),S.mode&1&&wg(i,d,e),e=S,u=d;var A=e.updateQueue;if(A===null){var k=new Set;k.add(u),e.updateQueue=k}else A.add(u);break e}else{if(!(e&1)){wg(i,d,e),Lf();break e}u=Error(q(426))}}else if(ke&&l.mode&1){var V=Eg(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Tg(V,o,l,i,e),vf(ai(u,l));break e}}i=u=ai(u,l),Qe!==4&&(Qe=2),_o===null?_o=[i]:_o.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=p_(i,u,e);pg(i,T);break e;case 1:l=u;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(yr===null||!yr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=g_(i,l,e);pg(i,j);break e}}i=i.return}while(i!==null)}V_(n)}catch(M){e=M,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function D_(){var t=Gl.current;return Gl.current=Wl,t===null?Wl:t}function Lf(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(as&268435455)&&!(bu&268435455)||sr(et,it)}function Yl(t,e){var n=ve;ve|=2;var r=D_();(et!==t||it!==e)&&(Nn=null,es(t,e));do try{yI();break}catch(s){b_(t,s)}while(!0);if(xf(),ve=n,Gl.current=r,qe!==null)throw Error(q(261));return et=null,it=0,Qe}function yI(){for(;qe!==null;)j_(qe)}function vI(){for(;qe!==null&&!$1();)j_(qe)}function j_(t){var e=O_(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?V_(t):qe=e,Df.current=null}function V_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dI(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,qe=null;return}}else if(n=cI(n,e,Dt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Qe===0&&(Qe=5)}function Kr(t,e,n){var r=we,s=Ht.transition;try{Ht.transition=null,we=1,_I(t,e,n,r)}finally{Ht.transition=s,we=r}return null}function _I(t,e,n,r){do Qs();while(cr!==null);if(ve&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Z1(t,i),t===et&&(qe=et=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,L_(Rl,function(){return Qs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var o=we;we=1;var l=ve;ve|=4,Df.current=null,fI(t,n),k_(n,t),FT(Kd),Dl=!!Gd,Kd=Gd=null,t.current=n,mI(n),q1(),ve=l,we=o,Ht.transition=i}else t.current=n;if(Qa&&(Qa=!1,cr=t,Ql=s),i=t.pendingLanes,i===0&&(yr=null),G1(n.stateNode),Rt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kl)throw Kl=!1,t=mh,mh=null,t;return Ql&1&&t.tag!==0&&Qs(),i=t.pendingLanes,i&1?t===ph?xo++:(xo=0,ph=t):xo=0,Or(),null}function Qs(){if(cr!==null){var t=p0(Ql),e=Ht.transition,n=we;try{if(Ht.transition=null,we=16>t?16:t,cr===null)var r=!1;else{if(t=cr,cr=null,Ql=0,ve&6)throw Error(q(331));var s=ve;for(ve|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(J=d;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:vo(8,f,i)}var p=f.child;if(p!==null)p.return=f,J=p;else for(;J!==null;){f=J;var g=f.sibling,S=f.return;if(A_(f),f===d){J=null;break}if(g!==null){g.return=S,J=g;break}J=S}}}var A=i.alternate;if(A!==null){var k=A.child;if(k!==null){A.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vo(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,J=T;break e}J=i.return}}var w=t.current;for(J=w;J!==null;){o=J;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,J=N;else e:for(o=w;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ru(9,l)}}catch(M){Le(l,l.return,M)}if(l===o){J=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,J=j;break e}J=l.return}}if(ve=s,Or(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Tu,t)}catch{}r=!0}return r}finally{we=n,Ht.transition=e}}return!1}function Mg(t,e,n){e=ai(n,e),e=p_(t,e,1),t=gr(t,e,1),e=_t(),t!==null&&(ta(t,1,e),Rt(t,e))}function Le(t,e,n){if(t.tag===3)Mg(t,t,n);else for(;e!==null;){if(e.tag===3){Mg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yr===null||!yr.has(r))){t=ai(n,t),t=g_(e,t,1),e=gr(e,t,1),t=_t(),e!==null&&(ta(e,1,t),Rt(e,t));break}}e=e.return}}function xI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(it&n)===n&&(Qe===4||Qe===3&&(it&130023424)===it&&500>ze()-Vf?es(t,0):jf|=n),Rt(t,e)}function M_(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var n=_t();t=Ln(t,e),t!==null&&(ta(t,e,n),Rt(t,n))}function wI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M_(t,n)}function EI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),M_(t,n)}var O_;O_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,uI(t,e,n);At=!!(t.flags&131072)}else At=!1,ke&&e.flags&1048576&&z0(e,Ul,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fl(t,e),t=e.pendingProps;var s=ri(e,mt.current);Ks(e,n),s=Cf(null,e,r,t,s,n);var i=kf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,Ll(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tf(e),s.updater=Pu,e.stateNode=s,s._reactInternals=e,rh(e,r,t,n),e=oh(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&gf(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=II(r),t=Qt(r,t),s){case 0:e=ih(null,e,r,t,n);break e;case 1:e=Ag(null,e,r,t,n);break e;case 11:e=Ig(null,e,r,t,n);break e;case 14:e=Sg(null,e,r,Qt(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),ih(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),Ag(t,e,r,s,n);case 3:e:{if(x_(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G0(t,e),$l(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ai(Error(q(423)),e),e=Ng(t,e,r,n,s);break e}else if(r!==s){s=ai(Error(q(424)),e),e=Ng(t,e,r,n,s);break e}else for(Vt=pr(e.stateNode.containerInfo.firstChild),Ot=e,ke=!0,Jt=null,n=H0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(si(),r===s){e=Fn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return K0(e),t===null&&eh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qd(r,s)?o=null:i!==null&&Qd(r,i)&&(e.flags|=32),__(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&eh(e),null;case 13:return w_(t,e,n);case 4:return If(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ii(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),Ig(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(zl,r._currentValue),r._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===s.children&&!kt.current){e=Fn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=jn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),th(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),th(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ks(e,n),s=Wt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Qt(r,e.pendingProps),s=Qt(r.type,s),Sg(t,e,r,s,n);case 15:return y_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),fl(t,e),e.tag=1,Pt(r)?(t=!0,Ll(e)):t=!1,Ks(e,n),m_(e,r,s),rh(e,r,s,n),oh(null,e,r,!0,t,n);case 19:return E_(t,e,n);case 22:return v_(t,e,n)}throw Error(q(156,e.tag))};function L_(t,e){return d0(t,e)}function TI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new TI(t,e,n,r)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function II(t){if(typeof t=="function")return Ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rf)return 11;if(t===sf)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bs:return ts(n.children,s,i,e);case nf:o=8,s|=8;break;case Nd:return t=qt(12,n,e,s|2),t.elementType=Nd,t.lanes=i,t;case Cd:return t=qt(13,n,e,s),t.elementType=Cd,t.lanes=i,t;case kd:return t=qt(19,n,e,s),t.elementType=kd,t.lanes=i,t;case Kv:return Du(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wv:o=10;break e;case Gv:o=9;break e;case rf:o=11;break e;case sf:o=14;break e;case tr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ts(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Du(t,e,n,r){return t=qt(22,t,r,e),t.elementType=Kv,t.lanes=n,t.stateNode={isHidden:!1},t}function ed(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function td(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uf(t,e,n,r,s,i,o,l,u){return t=new SI(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tf(i),t}function AI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function F_(t){if(!t)return Ar;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Pt(n))return F0(t,n,e)}return e}function U_(t,e,n,r,s,i,o,l,u){return t=Uf(n,r,!0,t,s,i,o,l,u),t.context=F_(null),n=t.current,r=_t(),s=vr(n),i=jn(r,s),i.callback=e??null,gr(n,i,s),t.current.lanes=s,ta(t,s,r),Rt(t,r),t}function ju(t,e,n,r){var s=e.current,i=_t(),o=vr(s);return n=F_(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gr(s,e,o),t!==null&&(en(t,s,o,i),cl(t,s,o)),o}function Jl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Og(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zf(t,e){Og(t,e),(t=t.alternate)&&Og(t,e)}function NI(){return null}var z_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bf(t){this._internalRoot=t}Vu.prototype.render=Bf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));ju(t,e,null,null)};Vu.prototype.unmount=Bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){ju(null,t,null,null)}),e[On]=null}};function Vu(t){this._internalRoot=t}Vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&x0(t)}};function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function CI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Jl(o);i.call(d)}}var o=U_(e,r,t,0,null,!1,!1,"",Lg);return t._reactRootContainer=o,t[On]=o.current,Mo(t.nodeType===8?t.parentNode:t),ls(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Jl(u);l.call(d)}}var u=Uf(t,0,!1,null,null,!1,!1,"",Lg);return t._reactRootContainer=u,t[On]=u.current,Mo(t.nodeType===8?t.parentNode:t),ls(function(){ju(e,u,n,r)}),u}function Ou(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Jl(o);l.call(u)}}ju(e,o,t,s)}else o=CI(n,e,t,s,r);return Jl(o)}g0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=no(e.pendingLanes);n!==0&&(lf(e,n|1),Rt(e,ze()),!(ve&6)&&(li=ze()+500,Or()))}break;case 13:ls(function(){var r=Ln(t,1);if(r!==null){var s=_t();en(r,t,1,s)}}),zf(t,1)}};uf=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=_t();en(e,t,134217728,n)}zf(t,134217728)}};y0=function(t){if(t.tag===13){var e=vr(t),n=Ln(t,e);if(n!==null){var r=_t();en(n,t,e,r)}zf(t,e)}};v0=function(){return we};_0=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Fd=function(t,e,n){switch(e){case"input":if(bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nu(r);if(!s)throw Error(q(90));Yv(r),bd(r,s)}}}break;case"textarea":Xv(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};i0=Mf;o0=ls;var kI={usingClientEntryPoint:!1,Events:[ra,Ms,Nu,r0,s0,Mf]},Ji={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PI={bundleType:Ji.bundleType,version:Ji.version,rendererPackageName:Ji.rendererPackageName,rendererConfig:Ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ji.findFiberByHostInstance||NI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Tu=Ya.inject(PI),gn=Ya}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kI;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(e))throw Error(q(200));return AI(t,e,null,n)};Ft.createRoot=function(t,e){if(!$f(t))throw Error(q(299));var n=!1,r="",s=z_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uf(t,1,!1,null,null,n,!1,r,s),t[On]=e.current,Mo(t.nodeType===8?t.parentNode:t),new Bf(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=u0(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return ls(t)};Ft.hydrate=function(t,e,n){if(!Mu(e))throw Error(q(200));return Ou(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!$f(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=z_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=U_(e,null,t,1,n??null,s,!1,i,o),t[On]=e.current,Mo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vu(e)};Ft.render=function(t,e,n){if(!Mu(e))throw Error(q(200));return Ou(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!Mu(t))throw Error(q(40));return t._reactRootContainer?(ls(function(){Ou(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Ft.unstable_batchedUpdates=Mf;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mu(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Ou(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function B_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B_)}catch(t){console.error(t)}}B_(),Bv.exports=Ft;var RI=Bv.exports,Fg=RI;Sd.createRoot=Fg.createRoot,Sd.hydrateRoot=Fg.hydrateRoot;const bI="modulepreload",DI=function(t){return"/"+t},Ug={},jI=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=DI(u),u in Ug)return;Ug[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":bI,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((g,S)=>{p.addEventListener("load",g),p.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function VI(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let l,u;const d=async(p=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(l=await jI(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/sw.js",{scope:"/",type:"classic"})).catch(p=>{o==null||o(p)}),!l)return;l.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),l.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),l.register({immediate:e}).then(p=>{i?i("/sw.js",p):s==null||s(p)}).catch(p=>{o==null||o(p)})}}return u=f(),d}var MI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const OI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),le=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},d)=>O.createElement("svg",{ref:d,...MI,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${OI(t)}`,...u},[...e.map(([f,p])=>O.createElement(f,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n},LI=le("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),zg=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),$_=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Lu=le("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Bg=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),vh=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),q_=le("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),Xl=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),FI=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),UI=le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ia=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),zI=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),BI=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),H_=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),$I=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),qf=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),qI=le("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),HI=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),WI=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),GI=le("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),_h=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),KI=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),QI=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),nd=le("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),YI=le("MessageSquareDashed",[["path",{d:"M3 6V5c0-1.1.9-2 2-2h2",key:"9usibi"}],["path",{d:"M11 3h3",key:"1c3ji7"}],["path",{d:"M18 3h1c1.1 0 2 .9 2 2",key:"19esxn"}],["path",{d:"M21 9v2",key:"p14lih"}],["path",{d:"M21 15c0 1.1-.9 2-2 2h-1",key:"1fo1j8"}],["path",{d:"M14 17h-3",key:"1w4p2m"}],["path",{d:"m7 17-4 4v-5",key:"ph9x1h"}],["path",{d:"M3 12v-2",key:"856n1q"}]]),W_=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),JI=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),XI=le("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),ZI=le("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),eS=le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),tS=le("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Fu=le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),$g=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),G_=le("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),xh=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),K_=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),nS=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),wh=le("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),wo=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Uu=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),rS=[{id:"t1",nome:"Berrio II",periodo:"Integral",totalAlunos:12,preenchidas:4,cor:"from-emerald-400 to-emerald-600"},{id:"t2",nome:"Maternal I",periodo:"Matutino",totalAlunos:15,preenchidas:15,cor:"from-blue-400 to-blue-600"}],qg=({onOpenTurma:t})=>c.jsxs("div",{className:"flex flex-col gap-6 max-w-4xl mx-auto h-full",children:[c.jsxs("div",{className:"mb-2 lg:mb-6",children:[c.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-800",children:"Minhas Turmas"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Selecione uma turma para preencher os dirios de hoje."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:rS.map(e=>{const n=e.preenchidas===e.totalAlunos,r=e.preenchidas/e.totalAlunos*100;return c.jsxs("div",{onClick:()=>t(e),className:"glass-panel cursor-pointer hover:border-primary/30 transition-all hover:shadow-lg group flex flex-col gap-4 relative overflow-hidden",children:[c.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full bg-gradient-to-b ${e.cor}`}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"pl-2",children:[c.jsx("div",{className:"text-xs font-semibold text-primary mb-1 tracking-wide uppercase",children:e.periodo}),c.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[c.jsx(Uu,{size:20,className:"text-slate-400"})," ",e.nome]})]}),c.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 group-hover:bg-primary group-hover:text-white transition-colors",children:c.jsx(H_,{size:20})})]}),c.jsxs("div",{className:"mt-4 bg-slate-50 rounded-xl p-4 border border-slate-100 flex flex-col gap-2",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsxs("span",{className:"text-slate-500 font-medium flex items-center gap-1.5",children:[c.jsx(vh,{size:16})," Dirios Preenchidos"]}),c.jsxs("span",{className:`font-bold ${n?"text-primary":"text-slate-700"}`,children:[e.preenchidas," / ",e.totalAlunos]})]}),c.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden mt-1",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${n?"bg-primary":"bg-accent"}`,style:{width:`${r}%`}})}),!n&&c.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[c.jsx(qf,{size:14,className:"text-accent"})," Faltam ",e.totalAlunos-e.preenchidas," cadernetas para enviar hoje."]}),n&&c.jsx("div",{className:"text-xs text-primary-dark font-medium mt-2 flex items-center gap-1",children:" Todas as cadernetas enviadas!"})]})]},e.id)})})]}),sS=({turma:t,onBack:e,onOpenStudent:n,studentsStatus:r})=>{const[s,i]=O.useState(""),l=Object.values(r).filter(d=>d.turmaId===t.id).filter(d=>d.name.toLowerCase().includes(s.toLowerCase())),u=d=>{switch(d){case"sent":return{icon:UI,color:"text-primary",bg:"bg-primary/10",label:"Enviado"};case"draft":return{icon:qf,color:"text-accent",bg:"bg-accent/10",label:"Pendente (Rascunho)"};case"absent":return{icon:wh,color:"text-red-500",bg:"bg-red-50",label:"Faltou"};default:return{icon:$I,color:"text-slate-300",bg:"bg-slate-50",label:"No iniciado"}}};return c.jsxs("div",{className:"flex flex-col gap-6 max-w-4xl mx-auto h-full",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-2 lg:mb-6 flex-wrap",children:[c.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-500 hover:text-primary hover:border-primary transition-all shadow-sm shrink-0",children:c.jsx($_,{size:20})}),c.jsxs("div",{className:"flex-1 min-w-[200px]",children:[c.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-800 truncate",children:"Dirio de Classe"}),c.jsxs("p",{className:"text-sm font-medium text-primary mt-1",children:[t.nome," (",t.periodo,")"]})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:c.jsx(xh,{size:18,className:"text-slate-400"})}),c.jsx("input",{type:"text",placeholder:"Buscar aluno na turma...",className:"form-control !pl-10 !py-3 bg-white shadow-sm border-transparent",value:s,onChange:d=>i(d.target.value)})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col",children:[c.jsxs("div",{className:"bg-slate-50 px-6 py-3 border-b border-slate-200 flex justify-between items-center text-xs font-semibold text-slate-500 uppercase tracking-wider",children:[c.jsxs("span",{children:[l.length," Alunos"]}),c.jsx("span",{children:"Status de Envio"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto divide-y divide-slate-100",children:[l.map(d=>{const f=u(d.status),p=f.icon;return c.jsxs("div",{onClick:()=>n(d.id),className:"flex items-center justify-between p-4 px-6 hover:bg-slate-50 cursor-pointer transition-colors group",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 shrink-0 relative",children:c.jsx("img",{src:d.avatar,alt:d.name,className:`w-full h-full rounded-full object-cover ${d.status==="absent"?"grayscale opacity-60":""}`})}),c.jsxs("div",{children:[c.jsx("h4",{className:`font-semibold text-[15px] ${d.status==="absent"?"text-slate-500 line-through":"text-slate-800"}`,children:d.name}),c.jsx("span",{className:"text-xs text-slate-400",children:"Ver dirio"})]})]}),c.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg ${f.bg}`,children:[c.jsx(p,{size:16,className:f.color}),c.jsx("span",{className:`text-xs font-semibold ${f.color}`,children:f.label})]})]},d.id)}),l.length===0&&c.jsxs("div",{className:"p-10 flex flex-col items-center justify-center text-slate-400 text-center",children:[c.jsx(wh,{size:48,className:"mb-4 text-slate-300"}),"Nenhum aluno encontrado correspondente  busca."]})]})]})]})},Ja=({options:t,active:e,onChange:n})=>c.jsx("div",{className:"flex bg-slate-100/50 p-0.5 rounded-xl w-full",children:t.map(r=>c.jsx("button",{className:`segment-btn ${e===r?"active":""}`,onClick:()=>n(r),children:r},r))}),rd={meals:{"Lanche Manh":null,Almoo:null,"Lanche Tarde":null,Jantar:null},rest:{"Sono Manh":null,"Sono Tarde":null},activities:{Manh:null,Tarde:null},evacuation:{Manh:null,Tarde:null},obs:""},sd={},iS=({student:t,turma:e,onBack:n,onUpdateStatus:r})=>{const[s,i]=O.useState(rd),[o,l]=O.useState(!1);O.useEffect(()=>{t.status==="absent"?(l(!0),i(sd[t.id]||rd)):(l(!1),i(sd[t.id]||rd))},[t.id,t.status]);const u=(p,g,S)=>{if(o)return;const A={...s,[p]:{...s[p],[g]:S}};p==="obs"&&(A.obs=S),i(A),sd[t.id]=A,t.status!=="sent"&&r("draft")},d=()=>{o?(l(!1),r("pending")):(l(!0),r("absent"))},f=()=>{if(o){alert(`O registro de falta de ${t.name} j consta no sistema.`),n();return}alert(`Caderneta preenchida e enviada para os responsveis de ${t.name}!`),r("sent"),n()};return c.jsxs("div",{className:"flex flex-col gap-0 max-w-4xl mx-auto",children:[c.jsxs("div",{className:`flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-2 lg:mb-6 glass-panel !p-4 transition-colors ${o?"bg-red-50/80 border-red-200":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full border border-slate-200 flex items-center justify-center text-slate-500 hover:text-primary transition-colors bg-white",children:c.jsx($_,{size:20})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-full p-0.5 bg-slate-200",children:c.jsx("img",{src:t.avatar,alt:"Avatar",className:`w-full h-full rounded-full object-cover ${o?"grayscale":""}`})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-widest",children:e==null?void 0:e.nome}),c.jsx("div",{className:`font-bold text-lg ${o?"text-red-700 line-through":"text-slate-800"}`,children:t.name})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:d,className:`px-4 py-2.5 rounded-xl font-semibold text-sm transition-all flex items-center gap-1.5 ${o?"bg-red-500 text-white shadow-md":"bg-red-50 text-red-500 hover:bg-red-100"}`,children:[c.jsx(wh,{size:18})," ",o?"Marcado como Falta":"Indicar Falta"]}),c.jsxs("button",{className:`btn-primary px-5 py-2.5 ${o?"opacity-50 pointer-events-none":""}`,onClick:f,children:[c.jsx(K_,{size:18})," Enviar"]})]})]}),c.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 transition-opacity duration-300 ${o?"opacity-30 pointer-events-none":"opacity-100"}`,children:[c.jsxs("div",{className:"glass-panel",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[17px] font-semibold text-primary-dark mb-4",children:[c.jsx(qI,{className:"text-primary",size:20})," Refeies"]}),c.jsx("div",{className:"flex flex-col gap-3",children:Object.keys(s.meals).map(p=>c.jsxs("div",{className:"flex flex-col lg:flex-row justify-between lg:items-center gap-3",children:[c.jsx("span",{className:"font-medium text-slate-700 text-sm",children:p}),c.jsx("div",{className:"w-full lg:w-[320px]",children:c.jsx(Ja,{options:["Total","Suficiente","Insuficiente","Recusou"],active:s.meals[p],onChange:g=>u("meals",p,g)})})]},p))})]}),c.jsxs("div",{className:"glass-panel",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[17px] font-semibold text-primary-dark mb-4",children:[c.jsx(JI,{className:"text-primary",size:20})," Descanso"]}),c.jsx("div",{className:"flex flex-col gap-3",children:Object.keys(s.rest).map(p=>c.jsxs("div",{className:"flex flex-col lg:flex-row justify-between lg:items-center gap-3",children:[c.jsx("span",{className:"font-medium text-slate-700 text-sm",children:p}),c.jsx("div",{className:"w-full lg:w-[180px]",children:c.jsx(Ja,{options:["Sim","No"],active:s.rest[p],onChange:g=>u("rest",p,g)})})]},p))})]}),c.jsxs("div",{className:"glass-panel lg:col-span-full flex flex-col lg:flex-row gap-8 lg:gap-12",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[17px] font-semibold text-primary-dark mb-4",children:[c.jsx(LI,{className:"text-primary",size:20})," Atividades"]}),c.jsx("div",{className:"flex flex-col gap-3",children:["Manh","Tarde"].map(p=>c.jsxs("div",{className:"flex flex-col justify-between gap-3",children:[c.jsx("span",{className:"font-medium text-slate-700 text-sm",children:p}),c.jsx(Ja,{options:["Ativa","Parcial","Sem Participao"],active:s.activities[p],onChange:g=>u("activities",p,g)})]},p))})]}),c.jsx("div",{className:"hidden lg:block w-px bg-slate-200"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[17px] font-semibold text-primary-dark mb-4",children:[c.jsx(ia,{className:"text-primary",size:20})," Evacuao"]}),c.jsx("div",{className:"flex flex-col gap-3",children:["Manh","Tarde"].map(p=>c.jsxs("div",{className:"flex flex-col justify-between gap-3",children:[c.jsx("span",{className:"font-medium text-slate-700 text-sm",children:p}),c.jsx(Ja,{options:["Normal","Alterado","No houve"],active:s.evacuation[p],onChange:g=>u("evacuation",p,g)})]},p))})]})]}),c.jsxs("div",{className:"glass-panel lg:col-span-full",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[17px] font-semibold text-primary-dark mb-4",children:[c.jsx(eS,{className:"text-primary",size:20})," Observaes e Recados"]}),c.jsx("textarea",{className:"form-control min-h-[120px] resize-none",placeholder:`Escreva notas importantes sobre o dia de ${t==null?void 0:t.name.split(" ")[0]}...`,value:s.obs,onChange:p=>u("obs",null,p.target.value)})]})]})]})},Hg=[{id:"1",title:"Festa Junina",date:"2024-06-24",time:"14:00 - 18:00",location:"Ptio Principal",type:"Festa",color:"bg-orange-500",participants:"Todas as Turmas",description:"Nossa tradicional festa junina com comidas tpicas e danas."},{id:"2",title:"Reunio de Pais",date:"2024-06-15",time:"19:00 - 21:00",location:"Auditrio",type:"Institucional",color:"bg-primary",participants:"Berrio e Maternal",description:"Apresentao do fechamento de semestre e novas metodologias."},{id:"3",title:"Passeio ao Zoolgico",date:"2024-06-10",time:"08:00 - 12:00",location:"Zoolgico Municipal",type:"Excurso",color:"bg-blue-500",participants:"Ensino Fundamental I",description:"Alunos devem vir com agasalho leve e trazer cantil de gua."},{id:"4",title:"Vacinao (Gripe)",date:"2024-06-05",time:"09:00 - 16:00",location:"Enfermaria",type:"Sade",color:"bg-red-400",participants:"Todas as Turmas",description:"Campanha interna de vacinao. Trazer carteirinha!"}],Wg=()=>{const[t,e]=O.useState(new Date(2024,5,1)),[n,r]=O.useState(null),[s,i]=O.useState("Todos"),o=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),l=new Date(t.getFullYear(),t.getMonth(),1).getDay(),u=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],f=()=>e(new Date(t.getFullYear(),t.getMonth()-1,1)),p=()=>e(new Date(t.getFullYear(),t.getMonth()+1,1)),g=()=>{const A=[],k=new Date().toISOString().split("T")[0];for(let V=0;V<l;V++)A.push(c.jsx("div",{className:"h-10 lg:h-24 bg-slate-50/50 rounded-xl border border-transparent"},`empty-${V}`));for(let V=1;V<=o;V++){const T=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(V).padStart(2,"0")}`,w=Hg.filter(M=>M.date===T),N=T===k,j=n===T;A.push(c.jsxs("div",{onClick:()=>r(j?null:T),className:`relative h-12 lg:h-24 p-1 lg:p-2 rounded-xl border transition-all cursor-pointer flex flex-col items-center lg:items-start
             ${j?"border-primary ring-2 ring-primary/20 bg-primary/5":"border-slate-100 hover:border-primary/40 bg-white shadow-sm"}
           `,children:[c.jsx("span",{className:`text-[13px] lg:text-sm font-semibold w-7 h-7 flex items-center justify-center rounded-full
             ${N?"bg-primary text-white":"text-slate-700"}
           `,children:V}),c.jsx("div",{className:"flex lg:hidden gap-1 mt-1",children:w.slice(0,3).map(M=>c.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${M.color}`},M.id))}),c.jsxs("div",{className:"hidden lg:flex flex-col gap-1 mt-1 w-full overflow-hidden",children:[w.slice(0,2).map(M=>c.jsxs("div",{className:`text-[10px] text-white font-medium px-1.5 py-0.5 rounded truncate ${M.color}`,children:[M.time.split(" ")[0]," - ",M.title]},M.id)),w.length>2&&c.jsxs("div",{className:"text-[10px] text-slate-500 font-medium px-1",children:["+ ",w.length-2," mais"]})]})]},V))}return A},S=Hg.filter(A=>{if(n&&A.date!==n||s!=="Todos"&&A.type!==s)return!1;if(!n){const k=parseInt(A.date.split("-")[1],10)-1,V=parseInt(A.date.split("-")[0],10);if(k!==t.getMonth()||V!==t.getFullYear())return!1}return!0});return c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 max-w-7xl mx-auto h-full",children:[c.jsxs("div",{className:"flex-[2] flex flex-col bg-white rounded-2xl border border-slate-200 shadow-sm p-4 lg:p-6 h-fit shrink-0",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-xl lg:text-2xl font-bold text-slate-800 flex items-center gap-3",children:[c.jsx(Xl,{className:"text-primary hidden sm:block",size:24}),u[t.getMonth()]," ",t.getFullYear()]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:f,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-600 transition-colors",children:c.jsx(BI,{size:20})}),c.jsx("button",{onClick:p,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 text-slate-600 transition-colors",children:c.jsx(H_,{size:20})})]})]}),c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2 lg:mb-4",children:d.map(A=>c.jsx("div",{className:"text-center text-[11px] lg:text-xs font-bold text-slate-400 uppercase tracking-wider",children:A},A))}),c.jsx("div",{className:"grid grid-cols-7 gap-1 lg:gap-2",children:g()})]}),c.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[c.jsxs("div",{className:"flex justify-between items-center px-1",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:n?`Eventos de ${n.split("-").reverse().join("/")}`:"Prximos Eventos"}),c.jsxs("button",{className:"hidden lg:flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary-dark transition-colors bg-primary/10 px-3 py-1.5 rounded-lg",children:[c.jsx($g,{size:16})," Novo Evento"]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide px-1",children:["Todos","Institucional","Festa","Excurso"].map(A=>c.jsx("button",{onClick:()=>i(A),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border
                  ${s===A?"bg-slate-800 text-white border-transparent shadow-sm":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}
                `,children:A},A))}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2 pb-20 lg:pb-0 flex flex-col gap-3",children:S.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-slate-400 text-center bg-slate-50 rounded-2xl border border-slate-100/50 h-40",children:[c.jsx(Xl,{size:40,className:"mb-3 text-slate-300"}),"Nenhum evento programado para esta seleo."]}):S.map(A=>c.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden hover:shadow-md transition-shadow group cursor-pointer relative",children:[c.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${A.color}`}),c.jsxs("div",{className:"p-4 pl-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide text-white ${A.color}`,children:A.type}),c.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2 py-1 rounded-md",children:A.date.split("-").reverse().join("/")})]}),c.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-1",children:A.title}),c.jsx("p",{className:"text-sm text-slate-500 mb-4 line-clamp-2",children:A.description}),c.jsxs("div",{className:"flex flex-col gap-1.5 mt-auto",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[c.jsx(qf,{size:14,className:"text-slate-400"})," ",A.time]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[c.jsx(QI,{size:14,className:"text-slate-400"})," ",A.location]})]})]})]},A.id))}),c.jsx("button",{className:"lg:hidden fixed bottom-20 right-4 w-14 h-14 bg-primary text-white rounded-full shadow-[0_8px_16px_rgba(16,185,129,0.3)] flex items-center justify-center hover:-translate-y-1 transition-transform z-40",children:c.jsx($g,{size:24})})]})]})},Gg=[{id:"1",type:"broadcast",name:"Comunicados Gerais",role:"Escola",lastMessage:"Lembrando que amanh no haver aula na educao infantil.",time:"14:30",unread:0},{id:"2",type:"direct",name:"Me do Joo Pedro",role:"Famlia",lastMessage:"Ele est melhor da gripe, amanh ir.",time:"10:15",unread:2},{id:"3",type:"direct",name:"Pai do Lucas T.",role:"Famlia",lastMessage:"Hoje a av vai buscar o Lucas s 17h, ok?",time:"Ontem",unread:0},{id:"4",type:"direct",name:"Me da Maria Clara",role:"Famlia",lastMessage:"Obrigada pelo cuidado de sempre!",time:"Segunda",unread:0}],oS=[{id:"m1",sender:"them",text:"Bom dia professora, o Joo Pedro acordou com um pouco de tosse.",time:"08:00"},{id:"m2",sender:"me",text:"Bom dia mame! Entendido, vamos observar ele por aqui. Fique tranquila.",time:"08:15"},{id:"m3",sender:"them",text:"Muito obrigada, se tiver febre pode me ligar que eu vou buscar.",time:"08:30"},{id:"m4",sender:"me",text:"Combinado.",time:"08:35"},{id:"m5",sender:"them",text:"Ele est melhor da gripe, amanh ir.",time:"10:15"}],Kg=()=>{const[t,e]=O.useState(Gg[1]),[n,r]=O.useState("all"),[s,i]=O.useState(""),o=Gg.filter(l=>n==="all"?!0:l.type===n);return c.jsxs("div",{className:"flex h-[calc(100vh-140px)] lg:h-[calc(100vh-160px)] gap-0 lg:gap-6 antialiased -mx-4 lg:mx-0",children:[c.jsxs("div",{className:`${t?"hidden lg:flex":"flex"} flex-col w-full lg:w-[340px] bg-white lg:rounded-2xl border-r lg:border border-slate-200 overflow-hidden shrink-0 shadow-sm h-full`,children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Mensagens"}),c.jsx("button",{className:"w-9 h-9 flex items-center justify-center bg-primary/10 text-primary rounded-full hover:bg-primary/20 transition-colors",children:c.jsx(tS,{size:18})})]}),c.jsxs("div",{className:"relative mb-4",children:[c.jsx("input",{type:"text",placeholder:"Pesquisar conversas...",className:"w-full bg-slate-100/80 border-transparent rounded-xl py-2 pl-10 pr-4 text-sm focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all placeholder-slate-400"}),c.jsx(xh,{size:16,className:"absolute left-3.5 top-2.5 text-slate-400"})]}),c.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-lg",children:[c.jsx("button",{className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-colors ${n==="all"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,onClick:()=>r("all"),children:"Todas"}),c.jsx("button",{className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-colors ${n==="broadcast"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,onClick:()=>r("broadcast"),children:"Mural"}),c.jsx("button",{className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-colors ${n==="direct"?"bg-white shadow-sm text-slate-800":"text-slate-500 hover:text-slate-700"}`,onClick:()=>r("direct"),children:"Diretas"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto w-full",children:o.map(l=>c.jsxs("div",{onClick:()=>e(l),className:`flex items-center gap-3 p-4 cursor-pointer border-b border-slate-50 transition-colors ${(t==null?void 0:t.id)===l.id?"bg-primary/5 relative":"hover:bg-slate-50"}`,children:[(t==null?void 0:t.id)===l.id&&c.jsx("div",{className:"hidden lg:block absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r-md"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white ${l.type==="broadcast"?"bg-accent":"bg-slate-300"}`,children:l.type==="broadcast"?c.jsx(nd,{size:20}):c.jsx(wo,{size:20})}),l.unread>0&&c.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full border-2 border-white flex items-center justify-center text-[10px] font-bold text-white shadow-sm",children:l.unread})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[c.jsx("h4",{className:"font-bold text-sm text-slate-800 truncate pr-2",children:l.name}),c.jsx("span",{className:`text-[11px] whitespace-nowrap ${l.unread>0?"text-primary font-bold":"text-slate-400"}`,children:l.time})]}),c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("p",{className:`text-xs truncate mr-2 ${l.unread>0?"text-slate-800 font-medium":"text-slate-500"}`,children:l.lastMessage})})]})]},l.id))})]}),c.jsx("div",{className:`${t?"flex":"hidden lg:flex"} flex-1 flex-col bg-white lg:rounded-2xl lg:border border-slate-200 overflow-hidden lg:shadow-sm h-full w-full`,children:t?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"h-[72px] bg-white border-b border-slate-100 px-4 lg:px-6 flex justify-between items-center shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[c.jsx("button",{onClick:()=>e(null),className:"lg:hidden w-8 h-8 flex items-center justify-center text-slate-500 hover:bg-slate-100 rounded-full shrink-0",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m15 18-6-6 6-6"})})}),c.jsx("div",{className:`w-10 h-10 rounded-full shrink-0 flex items-center justify-center text-white ${t.type==="broadcast"?"bg-accent":"bg-slate-300"}`,children:t.type==="broadcast"?c.jsx(nd,{size:18}):c.jsx(wo,{size:18})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"font-bold text-slate-800 text-[15px] truncate",children:t.name}),c.jsx("span",{className:"text-[10px] lg:text-xs text-primary font-medium bg-primary/10 px-2 py-0.5 rounded-md inline-block mt-0.5",children:t.role})]})]}),c.jsxs("div",{className:"flex items-center gap-1 lg:gap-2 shrink-0",children:[c.jsx("button",{className:"w-10 h-10 rounded-full hidden sm:flex items-center justify-center text-slate-400 hover:bg-slate-100 transition-colors",children:c.jsx(xh,{size:20})}),c.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center text-slate-400 hover:bg-slate-100 transition-colors",children:c.jsx(XI,{size:20})})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 bg-[#f4f7f6]/50 flex flex-col gap-4",children:[c.jsx("div",{className:"text-center my-4",children:c.jsx("span",{className:"bg-slate-200/70 text-slate-500 text-[11px] font-bold px-3 py-1 rounded-lg uppercase tracking-wider",children:"Hoje"})}),oS.map(l=>{const u=l.sender==="me";return c.jsx("div",{className:`flex max-w-[85%] lg:max-w-[70%] ${u?"self-end":"self-start"}`,children:c.jsxs("div",{className:`flex flex-col ${u?"items-end":"items-start"}`,children:[c.jsx("div",{className:`px-4 py-2.5 rounded-2xl ${u?"bg-primary text-white rounded-tr-sm":"bg-white border border-slate-100 text-slate-700 shadow-sm rounded-tl-sm"}`,children:c.jsx("p",{className:"text-[15px] leading-relaxed",children:l.text})}),c.jsxs("div",{className:"flex items-center gap-1 mt-1 px-1",children:[c.jsx("span",{className:"text-[11px] text-slate-400 font-medium",children:l.time}),u&&c.jsx(FI,{size:14,className:"text-primary"})]})]})},l.id)})]}),c.jsxs("div",{className:"p-4 bg-white border-t border-slate-100 flex gap-3 items-end",children:[c.jsx("button",{className:"w-12 h-12 flex shrink-0 items-center justify-center text-slate-400 hover:text-primary hover:bg-slate-50 rounded-xl transition-colors",children:c.jsx(ZI,{size:22})}),c.jsx("div",{className:"flex-1 bg-slate-100/80 rounded-2xl flex items-center border border-transparent focus-within:border-primary/30 transition-colors px-4",children:c.jsx("input",{type:"text",value:s,onChange:l=>i(l.target.value),onKeyDown:l=>{l.key==="Enter"&&i("")},placeholder:"Digite uma mensagem...",className:"w-full bg-transparent border-none py-3.5 outline-none text-[15px] text-slate-800 placeholder-slate-400"})}),c.jsx("button",{onClick:()=>i(""),disabled:!s.trim(),className:`w-12 h-12 flex shrink-0 items-center justify-center rounded-xl transition-all ${s.trim()?"bg-primary text-white shadow-md hover:bg-primary-dark hover:-translate-y-0.5":"bg-slate-100 text-slate-300"}`,children:c.jsx(K_,{size:20,className:s.trim()?"translate-x-0.5":""})})]})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 p-8",children:[c.jsx(nd,{size:64,className:"mb-6 opacity-20 text-primary"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Central de Comunicao"}),c.jsx("p",{className:"text-center max-w-sm",children:"Selecione uma conversa  esquerda para trocar mensagens com os responsveis ou envie um novo Comunicado Geral ao mural."})]})})]})},aS=()=>{};var Qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},lS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,S=d&63;u||(S=64,o||(g=64)),r.push(n[f],n[p],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Q_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new uS;const g=i<<2|l>>4;if(r.push(g),d!==64){const S=l<<4&240|d>>2;if(r.push(S),p!==64){const A=d<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cS=function(t){const e=Q_(t);return Y_.encodeByteArray(e,!0)},Zl=function(t){return cS(t).replace(/\./g,"")},J_=function(t){try{return Y_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=()=>dS().__FIREBASE_DEFAULTS__,fS=()=>{if(typeof process>"u"||typeof Qg>"u")return;const t=Qg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&J_(t[1]);return e&&JSON.parse(e)},zu=()=>{try{return aS()||hS()||fS()||mS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X_=t=>{var e,n;return(n=(e=zu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Z_=t=>{const e=X_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ex=()=>{var t;return(t=zu())==null?void 0:t.config},tx=t=>{var e;return(e=zu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zl(JSON.stringify(n)),Zl(JSON.stringify(o)),""].join(".")}const Eo={};function yS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eo))Eo[e]?t.emulator.push(e):t.prod.push(e);return t}function vS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yg=!1;function Wf(t,e){if(typeof window>"u"||typeof document>"u"||!Lr(window.location.host)||Eo[t]===e||Eo[t]||Yg)return;Eo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=yS().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Yg=!0,o()},g}function f(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=vS(r),S=n("text"),A=document.getElementById(S)||document.createElement("span"),k=n("learnmore"),V=document.getElementById(k)||document.createElement("a"),T=n("preprendIcon"),w=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;l(N),f(V,k);const j=d();u(w,T),N.append(w,A,V,j),document.body.appendChild(N)}i?(A.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function xS(){var e;const t=(e=zu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ES(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IS(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SS(){return!xS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AS(){try{return typeof indexedDB=="object"}catch{return!1}}function NS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CS,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?kS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Sn(s,l,r)}}function kS(t,e){return t.replace(PS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PS=/\{\$([^}]+)}/g;function RS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function us(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Jg(i)&&Jg(o)){if(!us(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function so(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function io(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bS(t,e){const n=new DS(t,e);return n.subscribe.bind(n)}class DS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=id),s.error===void 0&&(s.error=id),s.complete===void 0&&(s.complete=id);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function id(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OS(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MS(t){return t===Qr?void 0:t}function OS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const FS={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},US=me.INFO,zS={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},BS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gf{constructor(e){this.name=e,this._logLevel=US,this._logHandler=BS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const $S=(t,e)=>e.some(n=>t instanceof n);let Xg,Zg;function qS(){return Xg||(Xg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HS(){return Zg||(Zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nx=new WeakMap,Eh=new WeakMap,rx=new WeakMap,od=new WeakMap,Kf=new WeakMap;function WS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nx.set(n,t)}).catch(()=>{}),Kf.set(e,t),e}function GS(t){if(Eh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Eh.set(t,e)}let Th={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Eh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KS(t){Th=t(Th)}function QS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ad(this),e,...n);return rx.set(r,e.sort?e.sort():[e]),xr(r)}:HS().includes(t)?function(...e){return t.apply(ad(this),e),xr(nx.get(this))}:function(...e){return xr(t.apply(ad(this),e))}}function YS(t){return typeof t=="function"?QS(t):(t instanceof IDBTransaction&&GS(t),$S(t,qS())?new Proxy(t,Th):t)}function xr(t){if(t instanceof IDBRequest)return WS(t);if(od.has(t))return od.get(t);const e=YS(t);return e!==t&&(od.set(t,e),Kf.set(e,t)),e}const ad=t=>Kf.get(t);function JS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=xr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xr(o.result),u.oldVersion,u.newVersion,xr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const XS=["get","getKey","getAll","getAllKeys","count"],ZS=["put","add","delete","clear"],ld=new Map;function ey(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ld.get(e))return ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||XS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return ld.set(e,i),i}KS(t=>({...t,get:(e,n,r)=>ey(e,n)||t.get(e,n,r),has:(e,n)=>!!ey(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ih="@firebase/app",ty="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new Gf("@firebase/app"),nA="@firebase/app-compat",rA="@firebase/analytics-compat",sA="@firebase/analytics",iA="@firebase/app-check-compat",oA="@firebase/app-check",aA="@firebase/auth",lA="@firebase/auth-compat",uA="@firebase/database",cA="@firebase/data-connect",dA="@firebase/database-compat",hA="@firebase/functions",fA="@firebase/functions-compat",mA="@firebase/installations",pA="@firebase/installations-compat",gA="@firebase/messaging",yA="@firebase/messaging-compat",vA="@firebase/performance",_A="@firebase/performance-compat",xA="@firebase/remote-config",wA="@firebase/remote-config-compat",EA="@firebase/storage",TA="@firebase/storage-compat",IA="@firebase/firestore",SA="@firebase/ai",AA="@firebase/firestore-compat",NA="firebase",CA="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="[DEFAULT]",kA={[Ih]:"fire-core",[nA]:"fire-core-compat",[sA]:"fire-analytics",[rA]:"fire-analytics-compat",[oA]:"fire-app-check",[iA]:"fire-app-check-compat",[aA]:"fire-auth",[lA]:"fire-auth-compat",[uA]:"fire-rtdb",[cA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[hA]:"fire-fn",[fA]:"fire-fn-compat",[mA]:"fire-iid",[pA]:"fire-iid-compat",[gA]:"fire-fcm",[yA]:"fire-fcm-compat",[vA]:"fire-perf",[_A]:"fire-perf-compat",[xA]:"fire-rc",[wA]:"fire-rc-compat",[EA]:"fire-gcs",[TA]:"fire-gcs-compat",[IA]:"fire-fst",[AA]:"fire-fst-compat",[SA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,PA=new Map,Ah=new Map;function ny(t,e){try{t.container.addComponent(e)}catch(n){Un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cs(t){const e=t.name;if(Ah.has(e))return Un.debug(`There were multiple attempts to register component ${e}.`),!1;Ah.set(e,t);for(const n of eu.values())ny(n,t);for(const n of PA.values())ny(n,t);return!0}function Bu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new oa("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=CA;function sx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Sh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw wr.create("bad-app-name",{appName:String(s)});if(n||(n=ex()),!n)throw wr.create("no-options");const i=eu.get(s);if(i){if(us(n,i.options)&&us(r,i.config))return i;throw wr.create("duplicate-app",{appName:s})}const o=new LS(s);for(const u of Ah.values())o.addComponent(u);const l=new bA(n,r,o);return eu.set(s,l),l}function Qf(t=Sh){const e=eu.get(t);if(!e&&t===Sh&&ex())return sx();if(!e)throw wr.create("no-app",{appName:t});return e}function vn(t,e,n){let r=kA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Un.warn(o.join(" "));return}cs(new Nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="firebase-heartbeat-database",jA=1,Ho="firebase-heartbeat-store";let ud=null;function ix(){return ud||(ud=JS(DA,jA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw wr.create("idb-open",{originalErrorMessage:t.message})})),ud}async function VA(t){try{const n=(await ix()).transaction(Ho),r=await n.objectStore(Ho).get(ox(t));return await n.done,r}catch(e){if(e instanceof Sn)Un.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Un.warn(n.message)}}}async function ry(t,e){try{const r=(await ix()).transaction(Ho,"readwrite");await r.objectStore(Ho).put(e,ox(t)),await r.done}catch(n){if(n instanceof Sn)Un.warn(n.message);else{const r=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Un.warn(r.message)}}}function ox(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1024,OA=30;class LA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>OA){const o=zA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Un.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sy(),{heartbeatsToSend:r,unsentEntries:s}=FA(this._heartbeatsCache.heartbeats),i=Zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Un.warn(n),""}}}function sy(){return new Date().toISOString().substring(0,10)}function FA(t,e=MA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),iy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),iy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AS()?NS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ry(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ry(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iy(t){return Zl(JSON.stringify({version:2,heartbeats:t})).length}function zA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){cs(new Nr("platform-logger",e=>new eA(e),"PRIVATE")),cs(new Nr("heartbeat",e=>new LA(e),"PRIVATE")),vn(Ih,ty,t),vn(Ih,ty,"esm2020"),vn("fire-js","")}BA("");var $A="firebase",qA="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn($A,qA,"app");function ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=ax,lx=new oa("auth","Firebase",ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Gf("@firebase/auth");function WA(t,...e){tu.logLevel<=me.WARN&&tu.warn(`Auth (${xi}): ${t}`,...e)}function yl(t,...e){tu.logLevel<=me.ERROR&&tu.error(`Auth (${xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw Yf(t,...e)}function _n(t,...e){return Yf(t,...e)}function ux(t,e,n){const r={...HA(),[e]:n};return new oa("auth","Firebase",r).create(e,{appName:t.name})}function Vn(t){return ux(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lx.create(t,...e)}function ee(t,e,...n){if(!t)throw Yf(e,...n)}function Rn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yl(e),new Error(e)}function zn(t,e){t||Rn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function GA(){return oy()==="http:"||oy()==="https:"}function oy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GA()||ES()||"connection"in navigator)?navigator.onLine:!0}function QA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.shortDelay=e,this.longDelay=n,zn(n>e,"Short delay should be less than long delay!"),this.isMobile=_S()||TS()}get(){return KA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e){zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XA=new la(3e4,6e4);function Hn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function An(t,e,n,r,s={}){return dx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=aa({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return wS()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(d.credentials="include"),cx.fetch()(await hx(t,t.config.apiHost,n,l),d)})}async function dx(t,e,n){t._canInitEmulator=!1;const r={...YA,...e};try{const s=new eN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Xa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Xa(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ux(t,f,d);on(t,f)}}catch(s){if(s instanceof Sn)throw s;on(t,"network-request-failed",{message:String(s)})}}async function ua(t,e,n,r,s={}){const i=await An(t,e,n,r,s);return"mfaPendingCredential"in i&&on(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function hx(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Jf(t.config,s):`${t.config.apiScheme}://${s}`;return JA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ZA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),XA.get())})}}function Xa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_n(t,e,r);return s.customData._tokenResponse=n,s}function ay(t){return t!==void 0&&t.enterprise!==void 0}class tN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nN(t,e){return An(t,"GET","/v2/recaptchaConfig",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e){return An(t,"POST","/v1/accounts:delete",e)}async function nu(t,e){return An(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sN(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),s=Xf(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:To(cd(s.auth_time)),issuedAtTime:To(cd(s.iat)),expirationTime:To(cd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function cd(t){return Number(t)*1e3}function Xf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yl("JWT malformed, contained fewer than 3 sections"),null;try{const s=J_(n);return s?JSON.parse(s):(yl("Failed to decode base64 JWT payload"),null)}catch(s){return yl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ly(t){const e=Xf(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&iN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=To(this.lastLoginAt),this.creationTime=To(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t){var p;const e=t.auth,n=await t.getIdToken(),r=await ui(t,nu(e,{idToken:n}));ee(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?fx(s.providerUserInfo):[],o=lN(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ch(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function aN(t){const e=Pe(t);await ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function fx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e){const n=await dx(t,{},async()=>{const r=aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await hx(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Lr(t.emulatorConfig.host)&&(u.credentials="include"),cx.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cN(t,e){return An(t,"POST","/v2/accounts:revokeToken",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ly(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=ly(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await uN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ys;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return Rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new oN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ch(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ui(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sN(this,e)}reload(){return aN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ru(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(Vn(this.auth));const e=await this.getIdToken();return await ui(this,rN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:S,providerData:A,stsTokenManager:k}=n;ee(p&&k,e,"internal-error");const V=Ys.fromJSON(this.name,k);ee(typeof p=="string",e,"internal-error"),er(r,e.name),er(s,e.name),ee(typeof g=="boolean",e,"internal-error"),ee(typeof S=="boolean",e,"internal-error"),er(i,e.name),er(o,e.name),er(l,e.name),er(u,e.name),er(d,e.name),er(f,e.name);const T=new Xt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:V,createdAt:d,lastLoginAt:f});return A&&Array.isArray(A)&&(T.providerData=A.map(w=>({...w}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ys;s.updateFromServerResponse(n);const i=new Xt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ru(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?fx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ys;l.updateFromIdToken(r);const u=new Xt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ch(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=new Map;function bn(t){zn(t instanceof Function,"Expected a class definition");let e=uy.get(t);return e?(zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mx.type="NONE";const cy=mx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e,n){return`firebase:${t}:${e}:${n}`}class Js{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vl(this.userKey,s.apiKey,i),this.fullPersistenceKey=vl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nu(this.auth,{idToken:e}).catch(()=>{});return n?Xt._fromGetAccountInfoResponse(this.auth,n,e):null}return Xt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Js(bn(cy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||bn(cy);const o=vl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){let p;if(typeof f=="string"){const g=await nu(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Xt._fromGetAccountInfoResponse(e,g,f)}else p=Xt._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Js(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Js(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(px(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xx(e))return"Blackberry";if(wx(e))return"Webos";if(gx(e))return"Safari";if((e.includes("chrome/")||yx(e))&&!e.includes("edge/"))return"Chrome";if(_x(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function px(t=pt()){return/firefox\//i.test(t)}function gx(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yx(t=pt()){return/crios\//i.test(t)}function vx(t=pt()){return/iemobile/i.test(t)}function _x(t=pt()){return/android/i.test(t)}function xx(t=pt()){return/blackberry/i.test(t)}function wx(t=pt()){return/webos/i.test(t)}function Zf(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dN(t=pt()){var e;return Zf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function hN(){return IS()&&document.documentMode===10}function Ex(t=pt()){return Zf(t)||_x(t)||wx(t)||xx(t)||/windows phone/i.test(t)||vx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e=[]){let n;switch(t){case"Browser":n=dy(pt());break;case"Worker":n=`${dy(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e={}){return An(t,"GET","/v2/passwordPolicy",Hn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=6;class gN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hy(this),this.idTokenSubscription=new hy(this),this.beforeStateQueue=new fN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nu(this,{idToken:e}),r=await Xt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(jt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(Vn(this));const n=e?Pe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(Vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(Vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mN(this),n=new gN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&WA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fr(t){return Pe(t)}class hy{constructor(e){this.auth=e,this.observer=null,this.addObserver=bS(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vN(t){$u=t}function Ix(t){return $u.loadJS(t)}function _N(){return $u.recaptchaEnterpriseScript}function xN(){return $u.gapiScript}function wN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class EN{constructor(){this.enterprise=new TN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class TN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const IN="recaptcha-enterprise",Sx="NO_RECAPTCHA";class SN{constructor(e){this.type=IN,this.auth=Fr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{nN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new tN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;ay(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Sx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&ay(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_N();u.length!==0&&(u+=l),Ix(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function fy(t,e,n,r=!1,s=!1){const i=new SN(t);let o;if(s)o=Sx;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function su(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await fy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await fy(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e){const n=Bu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(us(i,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function NN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CN(t,e,n){const r=Fr(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Ax(e),{host:o,port:l}=kN(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(us(d,r.config.emulator)&&us(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Lr(o)?(Hf(`${i}//${o}${u}`),Wf("Auth",!0)):PN()}function Ax(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kN(t){const e=Ax(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:my(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:my(o)}}}function my(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rn("not implemented")}_getIdTokenResponse(e){return Rn("not implemented")}_linkToIdToken(e,n){return Rn("not implemented")}_getReauthenticationResolver(e){return Rn("not implemented")}}async function RN(t,e){return An(t,"POST","/v1/accounts:update",e)}async function bN(t,e){return An(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e){return ua(t,"POST","/v1/accounts:signInWithPassword",Hn(t,e))}async function jN(t,e){return An(t,"POST","/v1/accounts:sendOobCode",Hn(t,e))}async function VN(t,e){return jN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,e))}async function ON(t,e){return ua(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,n,"signInWithPassword",DN);case"emailLink":return MN(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(e,r,"signUpPassword",bN);case"emailLink":return ON(e,{idToken:n,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return ua(t,"POST","/v1/accounts:signInWithIdp",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="http://localhost";class ds extends em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:LN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=aa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UN(t){const e=so(io(t)).link,n=e?so(io(e)).deep_link_id:null,r=so(io(t)).deep_link_id;return(r?so(io(r)).link:null)||r||n||e||t}class tm{constructor(e){const n=so(io(e)),r=n.apiKey??null,s=n.oobCode??null,i=FN(n.mode??null);ee(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=UN(e);try{return new tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.providerId=_s.PROVIDER_ID}static credential(e,n){return Wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tm.parseLink(n);return ee(r,"argument-error"),Wo._fromEmailAndCode(e,r.code,r.tenantId)}}_s.PROVIDER_ID="password";_s.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_s.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Nx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends ca{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return or.credential(n,r)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ca{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ca{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return ua(t,"POST","/v1/accounts:signUp",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xt._fromIdTokenResponse(e,r,s),o=py(r);return new hs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=py(r);return new hs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function py(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Sn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,iu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new iu(e,n,r,s)}}function Cx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?iu._fromErrorAndOperation(t,i,e,r):i})}async function BN(t,e,n=!1){const r=await ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(t,e,n=!1){const{auth:r}=t;if(jt(r.app))return Promise.reject(Vn(r));const s="reauthenticate";try{const i=await ui(t,Cx(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=Xf(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),hs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&on(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(t,e,n=!1){if(jt(t.app))return Promise.reject(Vn(t));const r="signIn",s=await Cx(t,r,e),i=await hs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function $N(t,e){return Px(Fr(t),e)}async function qN(t,e){return kx(Pe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t){const e=Fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bx(t,e,n){const r=Fr(t);await su(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",VN)}async function HN(t,e,n){if(jt(t.app))return Promise.reject(Vn(t));const r=Fr(t),o=await su(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Rx(t),u}),l=await hs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function WN(t,e,n){return jt(t.app)?Promise.reject(Vn(t)):$N(Pe(t),_s.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Rx(t),r})}function GN(t,e){return KN(Pe(t),null,e)}async function KN(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await ui(t,RN(r,i));await t._updateTokensIfNecessary(o,!0)}function QN(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function YN(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function JN(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function XN(t){return Pe(t).signOut()}const ou="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ou,"1"),this.storage.removeItem(ou),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1e3,eC=10;class jx extends Dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ex(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);hN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jx.type="LOCAL";const tC=jx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends Dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vx.type="SESSION";const Mx=Vx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await nC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=nm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function sC(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function iC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aC(){return Ox()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="firebaseLocalStorageDb",lC=1,au="firebaseLocalStorage",Fx="fbase_key";class da{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hu(t,e){return t.transaction([au],e?"readwrite":"readonly").objectStore(au)}function uC(){const t=indexedDB.deleteDatabase(Lx);return new da(t).toPromise()}function kh(){const t=indexedDB.open(Lx,lC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(au,{keyPath:Fx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(au)?e(r):(r.close(),await uC(),e(await kh()))})})}async function gy(t,e,n){const r=Hu(t,!0).put({[Fx]:e,value:n});return new da(r).toPromise()}async function cC(t,e){const n=Hu(t,!1).get(e),r=await new da(n).toPromise();return r===void 0?null:r.value}function yy(t,e){const n=Hu(t,!0).delete(e);return new da(n).toPromise()}const dC=800,hC=3;class Ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ox()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qu._getInstance(aC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new rC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kh();return await gy(e,ou,"1"),await yy(e,ou),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>cC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hu(s,!1).getAll();return new da(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ux.type="LOCAL";const fC=Ux;new la(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){return e?bn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pC(t){return Px(t.auth,new rm(t),t.bypassAuthState)}function gC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),kx(n,new rm(t),t.bypassAuthState)}async function yC(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),BN(n,new rm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return gC;default:on(this.auth,"internal-error")}}resolve(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new la(2e3,1e4);class $s extends zx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){zn(this.filter.length===1,"Popup operations only handle one event");const e=nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="pendingRedirect",_l=new Map;class xC extends zx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_l.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_l.set(this.auth._key(),e)}return this.bypassAuthState||_l.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(t,e){const n=IC(e),r=TC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function EC(t,e){_l.set(t._key(),e)}function TC(t){return bn(t._redirectPersistence)}function IC(t){return vl(_C,t.config.apiKey,t.name)}async function SC(t,e,n=!1){if(jt(t.app))return Promise.reject(Vn(t));const r=Fr(t),s=mC(r,e),o=await new xC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=10*60*1e3;class NC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Bx(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(vy(e))}saveEventToCache(e){this.cachedEventUids.add(vy(e)),this.lastProcessedEventTime=Date.now()}}function vy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Bx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(t,e={}){return An(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RC=/^https?/;async function bC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kC(t);for(const n of e)try{if(DC(n))return}catch{}on(t,"unauthorized-domain")}function DC(t){const e=Nh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RC.test(n))return!1;if(PC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new la(3e4,6e4);function _y(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VC(t){return new Promise((e,n)=>{var s,i,o;function r(){_y(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_y(),n(_n(t,"network-request-failed"))},timeout:jC.get()})}if((i=(s=xn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=xn().gapi)!=null&&o.load)r();else{const l=wN("iframefcb");return xn()[l]=()=>{gapi.load?r():n(_n(t,"network-request-failed"))},Ix(`${xN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw xl=null,e})}let xl=null;function MC(t){return xl=xl||VC(t),xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new la(5e3,15e3),LC="__/auth/iframe",FC="emulator/auth/iframe",UC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BC(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jf(e,FC):`https://${t.config.authDomain}/${LC}`,r={apiKey:e.apiKey,appName:t.name,v:xi},s=zC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${aa(r).slice(1)}`}async function $C(t){const e=await MC(t),n=xn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:BC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),l=xn().setTimeout(()=>{i(o)},OC.get());function u(){xn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HC=500,WC=600,GC="_blank",KC="http://localhost";class xy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QC(t,e,n,r=HC,s=WC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...qC,width:r.toString(),height:s.toString(),top:i,left:o},d=pt().toLowerCase();n&&(l=yx(d)?GC:n),px(d)&&(e=e||KC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[S,A])=>`${g}${S}=${A},`,"");if(dN(d)&&l!=="_self")return YC(e||"",l),new xy(null);const p=window.open(e||"",l,f);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new xy(p)}function YC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="__/auth/handler",XC="emulator/auth/handler",ZC=encodeURIComponent("fac");async function wy(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xi,eventId:s};if(e instanceof Nx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",RS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof ca){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${ZC}=${encodeURIComponent(u)}`:"";return`${e2(t)}?${aa(l).slice(1)}${d}`}function e2({config:t}){return t.emulator?Jf(t,XC):`https://${t.authDomain}/${JC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="webStorageSupport";class t2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mx,this._completeRedirectFn=SC,this._overrideRedirectResult=EC}async _openPopup(e,n,r,s){var o;zn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await wy(e,n,r,Nh(),s);return QC(e,i,nm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await wy(e,n,r,Nh(),s);return sC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $C(e),r=new NC(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dd,{type:dd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[dd];i!==void 0&&n(!!i),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ex()||gx()||Zf()}}const n2=t2;var Ey="@firebase/auth",Ty="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i2(t){cs(new Nr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tx(t)},d=new yN(r,s,i,u);return NN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cs(new Nr("auth-internal",e=>{const n=Fr(e.getProvider("auth").getImmediate());return(r=>new r2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vn(Ey,Ty,s2(t)),vn(Ey,Ty,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=5*60,a2=tx("authIdTokenMaxAge")||o2;let Iy=null;const l2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>a2)return;const s=n==null?void 0:n.token;Iy!==s&&(Iy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function u2(t=Qf()){const e=Bu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AN(t,{popupRedirectResolver:n2,persistence:[fC,tC,Mx]}),r=tx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=l2(i.toString());YN(n,o,()=>o(n.currentUser)),QN(n,l=>o(l))}}const s=X_("auth");return s&&CN(n,`http://${s}`),n}function c2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=_n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",c2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i2("Browser");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,$x;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function E(){}E.prototype=v.prototype,x.F=v.prototype,x.prototype=new E,x.prototype.constructor=x,x.D=function(I,C,P){for(var _=Array(arguments.length-2),z=2;z<arguments.length;z++)_[z-2]=arguments[z];return v.prototype[C].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,E){E||(E=0);const I=Array(16);if(typeof v=="string")for(var C=0;C<16;++C)I[C]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(C=0;C<16;++C)I[C]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=x.g[0],E=x.g[1],C=x.g[2];let P=x.g[3],_;_=v+(P^E&(C^P))+I[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=P+(C^v&(E^C))+I[1]+3905402710&4294967295,P=v+(_<<12&4294967295|_>>>20),_=C+(E^P&(v^E))+I[2]+606105819&4294967295,C=P+(_<<17&4294967295|_>>>15),_=E+(v^C&(P^v))+I[3]+3250441966&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(P^E&(C^P))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=P+(C^v&(E^C))+I[5]+1200080426&4294967295,P=v+(_<<12&4294967295|_>>>20),_=C+(E^P&(v^E))+I[6]+2821735955&4294967295,C=P+(_<<17&4294967295|_>>>15),_=E+(v^C&(P^v))+I[7]+4249261313&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(P^E&(C^P))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=P+(C^v&(E^C))+I[9]+2336552879&4294967295,P=v+(_<<12&4294967295|_>>>20),_=C+(E^P&(v^E))+I[10]+4294925233&4294967295,C=P+(_<<17&4294967295|_>>>15),_=E+(v^C&(P^v))+I[11]+2304563134&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(P^E&(C^P))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=P+(C^v&(E^C))+I[13]+4254626195&4294967295,P=v+(_<<12&4294967295|_>>>20),_=C+(E^P&(v^E))+I[14]+2792965006&4294967295,C=P+(_<<17&4294967295|_>>>15),_=E+(v^C&(P^v))+I[15]+1236535329&4294967295,E=C+(_<<22&4294967295|_>>>10),_=v+(C^P&(E^C))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=P+(E^C&(v^E))+I[6]+3225465664&4294967295,P=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(P^v))+I[11]+643717713&4294967295,C=P+(_<<14&4294967295|_>>>18),_=E+(P^v&(C^P))+I[0]+3921069994&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(C^P&(E^C))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=P+(E^C&(v^E))+I[10]+38016083&4294967295,P=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(P^v))+I[15]+3634488961&4294967295,C=P+(_<<14&4294967295|_>>>18),_=E+(P^v&(C^P))+I[4]+3889429448&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(C^P&(E^C))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=P+(E^C&(v^E))+I[14]+3275163606&4294967295,P=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(P^v))+I[3]+4107603335&4294967295,C=P+(_<<14&4294967295|_>>>18),_=E+(P^v&(C^P))+I[8]+1163531501&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(C^P&(E^C))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=P+(E^C&(v^E))+I[2]+4243563512&4294967295,P=v+(_<<9&4294967295|_>>>23),_=C+(v^E&(P^v))+I[7]+1735328473&4294967295,C=P+(_<<14&4294967295|_>>>18),_=E+(P^v&(C^P))+I[12]+2368359562&4294967295,E=C+(_<<20&4294967295|_>>>12),_=v+(E^C^P)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=P+(v^E^C)+I[8]+2272392833&4294967295,P=v+(_<<11&4294967295|_>>>21),_=C+(P^v^E)+I[11]+1839030562&4294967295,C=P+(_<<16&4294967295|_>>>16),_=E+(C^P^v)+I[14]+4259657740&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(E^C^P)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=P+(v^E^C)+I[4]+1272893353&4294967295,P=v+(_<<11&4294967295|_>>>21),_=C+(P^v^E)+I[7]+4139469664&4294967295,C=P+(_<<16&4294967295|_>>>16),_=E+(C^P^v)+I[10]+3200236656&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(E^C^P)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=P+(v^E^C)+I[0]+3936430074&4294967295,P=v+(_<<11&4294967295|_>>>21),_=C+(P^v^E)+I[3]+3572445317&4294967295,C=P+(_<<16&4294967295|_>>>16),_=E+(C^P^v)+I[6]+76029189&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(E^C^P)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=P+(v^E^C)+I[12]+3873151461&4294967295,P=v+(_<<11&4294967295|_>>>21),_=C+(P^v^E)+I[15]+530742520&4294967295,C=P+(_<<16&4294967295|_>>>16),_=E+(C^P^v)+I[2]+3299628645&4294967295,E=C+(_<<23&4294967295|_>>>9),_=v+(C^(E|~P))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=P+(E^(v|~C))+I[7]+1126891415&4294967295,P=v+(_<<10&4294967295|_>>>22),_=C+(v^(P|~E))+I[14]+2878612391&4294967295,C=P+(_<<15&4294967295|_>>>17),_=E+(P^(C|~v))+I[5]+4237533241&4294967295,E=C+(_<<21&4294967295|_>>>11),_=v+(C^(E|~P))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=P+(E^(v|~C))+I[3]+2399980690&4294967295,P=v+(_<<10&4294967295|_>>>22),_=C+(v^(P|~E))+I[10]+4293915773&4294967295,C=P+(_<<15&4294967295|_>>>17),_=E+(P^(C|~v))+I[1]+2240044497&4294967295,E=C+(_<<21&4294967295|_>>>11),_=v+(C^(E|~P))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=P+(E^(v|~C))+I[15]+4264355552&4294967295,P=v+(_<<10&4294967295|_>>>22),_=C+(v^(P|~E))+I[6]+2734768916&4294967295,C=P+(_<<15&4294967295|_>>>17),_=E+(P^(C|~v))+I[13]+1309151649&4294967295,E=C+(_<<21&4294967295|_>>>11),_=v+(C^(E|~P))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=P+(E^(v|~C))+I[11]+3174756917&4294967295,P=v+(_<<10&4294967295|_>>>22),_=C+(v^(P|~E))+I[2]+718787259&4294967295,C=P+(_<<15&4294967295|_>>>17),_=E+(P^(C|~v))+I[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.v=function(x,v){v===void 0&&(v=x.length);const E=v-this.blockSize,I=this.C;let C=this.h,P=0;for(;P<v;){if(C==0)for(;P<=E;)s(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<v;)if(I[C++]=x.charCodeAt(P++),C==this.blockSize){s(this,I),C=0;break}}else for(;P<v;)if(I[C++]=x[P++],C==this.blockSize){s(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;v=this.o*8;for(var E=x.length-8;E<x.length;++E)x[E]=v&255,v/=256;for(this.v(x),x=Array(16),v=0,E=0;E<4;++E)for(let I=0;I<32;I+=8)x[v++]=this.g[E]>>>I&255;return x};function i(x,v){var E=l;return Object.prototype.hasOwnProperty.call(E,x)?E[x]:E[x]=v(x)}function o(x,v){this.h=v;const E=[];let I=!0;for(let C=x.length-1;C>=0;C--){const P=x[C]|0;I&&P==v||(E[C]=P,I=!1)}this.g=E}var l={};function u(x){return-128<=x&&x<128?i(x,function(v){return new o([v|0],v<0?-1:0)}):new o([x|0],x<0?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return V(d(-x));const v=[];let E=1;for(let I=0;x>=E;I++)v[I]=x/E|0,E*=4294967296;return new o(v,0)}function f(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return V(f(x.substring(1),v));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(v,8));let I=p;for(let P=0;P<x.length;P+=8){var C=Math.min(8,x.length-P);const _=parseInt(x.substring(P,P+C),v);C<8?(C=d(Math.pow(v,C)),I=I.j(C).add(d(_))):(I=I.j(E),I=I.add(d(_)))}return I}var p=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-V(this).m();let x=0,v=1;for(let E=0;E<this.g.length;E++){const I=this.i(E);x+=(I>=0?I:4294967296+I)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(A(this))return"0";if(k(this))return"-"+V(this).toString(x);const v=d(Math.pow(x,6));var E=this;let I="";for(;;){const C=j(E,v).g;E=T(E,C.j(v));let P=((E.g.length>0?E.g[0]:E.h)>>>0).toString(x);if(E=C,A(E))return P+I;for(;P.length<6;)P="0"+P;I=P+I}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function A(x){if(x.h!=0)return!1;for(let v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function k(x){return x.h==-1}t.l=function(x){return x=T(this,x),k(x)?-1:A(x)?0:1};function V(x){const v=x.g.length,E=[];for(let I=0;I<v;I++)E[I]=~x.g[I];return new o(E,~x.h).add(g)}t.abs=function(){return k(this)?V(this):this},t.add=function(x){const v=Math.max(this.g.length,x.g.length),E=[];let I=0;for(let C=0;C<=v;C++){let P=I+(this.i(C)&65535)+(x.i(C)&65535),_=(P>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);I=_>>>16,P&=65535,_&=65535,E[C]=_<<16|P}return new o(E,E[E.length-1]&-2147483648?-1:0)};function T(x,v){return x.add(V(v))}t.j=function(x){if(A(this)||A(x))return p;if(k(this))return k(x)?V(this).j(V(x)):V(V(this).j(x));if(k(x))return V(this.j(V(x)));if(this.l(S)<0&&x.l(S)<0)return d(this.m()*x.m());const v=this.g.length+x.g.length,E=[];for(var I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<x.g.length;C++){const P=this.i(I)>>>16,_=this.i(I)&65535,z=x.i(C)>>>16,de=x.i(C)&65535;E[2*I+2*C]+=_*de,w(E,2*I+2*C),E[2*I+2*C+1]+=P*de,w(E,2*I+2*C+1),E[2*I+2*C+1]+=_*z,w(E,2*I+2*C+1),E[2*I+2*C+2]+=P*z,w(E,2*I+2*C+2)}for(x=0;x<v;x++)E[x]=E[2*x+1]<<16|E[2*x];for(x=v;x<2*v;x++)E[x]=0;return new o(E,0)};function w(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function N(x,v){this.g=x,this.h=v}function j(x,v){if(A(v))throw Error("division by zero");if(A(x))return new N(p,p);if(k(x))return v=j(V(x),v),new N(V(v.g),V(v.h));if(k(v))return v=j(x,V(v)),new N(V(v.g),v.h);if(x.g.length>30){if(k(x)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;I.l(x)<=0;)E=M(E),I=M(I);var C=$(E,1),P=$(I,1);for(I=$(I,2),E=$(E,2);!A(I);){var _=P.add(I);_.l(x)<=0&&(C=C.add(E),P=_),I=$(I,1),E=$(E,1)}return v=T(x,C.j(v)),new N(C,v)}for(C=p;x.l(v)>=0;){for(E=Math.max(1,Math.floor(x.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),P=d(E),_=P.j(v);k(_)||_.l(x)>0;)E-=I,P=d(E),_=P.j(v);A(P)&&(P=g),C=C.add(P),x=T(x,_)}return new N(C,x)}t.B=function(x){return j(this,x).h},t.and=function(x){const v=Math.max(this.g.length,x.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)&x.i(I);return new o(E,this.h&x.h)},t.or=function(x){const v=Math.max(this.g.length,x.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)|x.i(I);return new o(E,this.h|x.h)},t.xor=function(x){const v=Math.max(this.g.length,x.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)^x.i(I);return new o(E,this.h^x.h)};function M(x){const v=x.g.length+1,E=[];for(let I=0;I<v;I++)E[I]=x.i(I)<<1|x.i(I-1)>>>31;return new o(E,x.h)}function $(x,v){const E=v>>5;v%=32;const I=x.g.length-E,C=[];for(let P=0;P<I;P++)C[P]=v>0?x.i(P+E)>>>v|x.i(P+E+1)<<32-v:x.i(P+E);return new o(C,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$x=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Er=o}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qx,oo,Hx,wl,Ph,Wx,Gx,Kx;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Za=="object"&&Za];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var R=a[y];if(!(R in m))break e;m=m[R]}a=a[a.length-1],y=m[a],h=h(y),h!=y&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var m=[],y;for(y in h)Object.prototype.hasOwnProperty.call(h,y)&&m.push([y,h[y]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function u(a,h,m){return a.call.apply(a.bind,arguments)}function d(a,h,m){return d=u,d.apply(null,arguments)}function f(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function p(a,h){function m(){}m.prototype=h.prototype,a.Z=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(y,R,D){for(var G=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)G[ae-2]=arguments[ae];return h.prototype[R].apply(y,G)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const h=a.length;if(h>0){const m=Array(h);for(let y=0;y<h;y++)m[y]=a[y];return m}return[]}function A(a,h){for(let y=1;y<arguments.length;y++){const R=arguments[y];var m=typeof R;if(m=m!="object"?m:R?Array.isArray(R)?"array":m:"null",m=="array"||m=="object"&&typeof R.length=="number"){m=a.length||0;const D=R.length||0;a.length=m+D;for(let G=0;G<D;G++)a[m+G]=R[G]}else a.push(R)}}class k{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function V(a){o.setTimeout(()=>{throw a},0)}function T(){var a=x;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,m){const y=N.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var N=new k(()=>new j,a=>a.reset());class j{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let M,$=!1,x=new w,v=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(E)}};function E(){for(var a;a=T();){try{a.h.call(a.g)}catch(m){V(m)}var h=N;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}$=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return a}();function _(a){return/^[\s\xa0]*$/.test(a)}function z(a,h){C.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(z,C),z.prototype.init=function(a,h){const m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),ue=0;function W(a,h,m,y,R){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=R,this.key=++ue,this.da=this.fa=!1}function B(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function b(a,h,m){for(const y in a)h.call(m,a[y],y,a)}function H(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function X(a){const h={};for(const m in a)h[m]=a[m];return h}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(a,h){let m,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(m in y)a[m]=y[m];for(let D=0;D<Y.length;D++)m=Y[D],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function Re(a){this.src=a,this.g={},this.h=0}Re.prototype.add=function(a,h,m,y,R){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const G=Me(a,h,y,R);return G>-1?(h=a[G],m||(h.fa=!1)):(h=new W(h,this.src,D,!!y,R),h.fa=m,a.push(h)),h};function gt(a,h){const m=h.type;if(m in a.g){var y=a.g[m],R=Array.prototype.indexOf.call(y,h,void 0),D;(D=R>=0)&&Array.prototype.splice.call(y,R,1),D&&(B(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Me(a,h,m,y){for(let R=0;R<a.length;++R){const D=a[R];if(!D.da&&D.listener==h&&D.capture==!!m&&D.ha==y)return R}return-1}var Et="closure_lm_"+(Math.random()*1e6|0),Es={};function _a(a,h,m,y,R){if(Array.isArray(h)){for(let D=0;D<h.length;D++)_a(a,h[D],m,y,R);return null}return m=se(m),a&&a[de]?a.J(h,m,l(y)?!!y.capture:!1,R):dc(a,h,m,!1,y,R)}function dc(a,h,m,y,R,D){if(!h)throw Error("Invalid event type");const G=l(R)?!!R.capture:!!R;let ae=Ni(a);if(ae||(a[Et]=ae=new Re(a)),m=ae.add(h,m,y,G,D),m.proxy)return m;if(y=xa(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)P||(R=G),R===void 0&&(R=!1),a.addEventListener(h.toString(),y,R);else if(a.attachEvent)a.attachEvent(Ea(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function xa(){function a(m){return h.call(a.src,a.listener,m)}const h=hc;return a}function wa(a,h,m,y,R){if(Array.isArray(h))for(var D=0;D<h.length;D++)wa(a,h[D],m,y,R);else y=l(y)?!!y.capture:!!y,m=se(m),a&&a[de]?(a=a.i,D=String(h).toString(),D in a.g&&(h=a.g[D],m=Me(h,m,y,R),m>-1&&(B(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete a.g[D],a.h--)))):a&&(a=Ni(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Me(h,m,y,R)),(m=a>-1?h[a]:null)&&Ai(m))}function Ai(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[de])gt(h.i,a);else{var m=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(m,y,a.capture):h.detachEvent?h.detachEvent(Ea(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=Ni(h))?(gt(m,a),m.h==0&&(m.src=null,h[Et]=null)):B(a)}}}function Ea(a){return a in Es?Es[a]:Es[a]="on"+a}function hc(a,h){if(a.da)a=!0;else{h=new z(h,this);const m=a.listener,y=a.ha||a.src;a.fa&&Ai(a),a=m.call(y,h)}return a}function Ni(a){return a=a[Et],a instanceof Re?a:null}var U="__closure_events_fn_"+(Math.random()*1e9>>>0);function se(a){return typeof a=="function"?a:(a[U]||(a[U]=function(h){return a.handleEvent(h)}),a[U])}function ie(){I.call(this),this.i=new Re(this),this.M=this,this.G=null}p(ie,I),ie.prototype[de]=!0,ie.prototype.removeEventListener=function(a,h,m,y){wa(this,a,h,m,y)};function ce(a,h){var m,y=a.G;if(y)for(m=[];y;y=y.G)m.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new C(h,a);else if(h instanceof C)h.target=h.target||a;else{var R=h;h=new C(y,a),fe(h,R)}R=!0;let D,G;if(m)for(G=m.length-1;G>=0;G--)D=h.g=m[G],R=_e(D,y,!0,h)&&R;if(D=h.g=a,R=_e(D,y,!0,h)&&R,R=_e(D,y,!1,h)&&R,m)for(G=0;G<m.length;G++)D=h.g=m[G],R=_e(D,y,!1,h)&&R}ie.prototype.N=function(){if(ie.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const m=a.g[h];for(let y=0;y<m.length;y++)B(m[y]);delete a.g[h],a.h--}}this.G=null},ie.prototype.J=function(a,h,m,y){return this.i.add(String(a),h,!1,m,y)},ie.prototype.K=function(a,h,m,y){return this.i.add(String(a),h,!0,m,y)};function _e(a,h,m,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let R=!0;for(let D=0;D<h.length;++D){const G=h[D];if(G&&!G.da&&G.capture==m){const ae=G.listener,Ge=G.ha||G.src;G.fa&&gt(a.i,G),R=ae.call(Ge,y)!==!1&&R}}return R&&!y.defaultPrevented}function ln(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Wn(a){a.g=ln(()=>{a.g=null,a.i&&(a.i=!1,Wn(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class DE extends I{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Wn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(a){I.call(this),this.h=a,this.g={}}p(Ci,I);var Lm=[];function Fm(a){b(a.g,function(h,m){this.g.hasOwnProperty(m)&&Ai(h)},a),a.g={}}Ci.prototype.N=function(){Ci.Z.N.call(this),Fm(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fc=o.JSON.stringify,jE=o.JSON.parse,VE=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Um(){}function zm(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mc(){C.call(this,"d")}p(mc,C);function pc(){C.call(this,"c")}p(pc,C);var Br={},Bm=null;function Ta(){return Bm=Bm||new ie}Br.Ia="serverreachability";function $m(a){C.call(this,Br.Ia,a)}p($m,C);function Pi(a){const h=Ta();ce(h,new $m(h))}Br.STAT_EVENT="statevent";function qm(a,h){C.call(this,Br.STAT_EVENT,a),this.stat=h}p(qm,C);function yt(a){const h=Ta();ce(h,new qm(h,a))}Br.Ja="timingevent";function Hm(a,h){C.call(this,Br.Ja,a),this.size=h}p(Hm,C);function Ri(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function ME(a,h,m,y,R,D){a.info(function(){if(a.g)if(D){var G="",ae=D.split("&");for(let Ee=0;Ee<ae.length;Ee++){var Ge=ae[Ee].split("=");if(Ge.length>1){const Je=Ge[0];Ge=Ge[1];const cn=Je.split("_");G=cn.length>=2&&cn[1]=="type"?G+(Je+"="+Ge+"&"):G+(Je+"=redacted&")}}}else G=null;else G=D;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+h+`
`+m+`
`+G})}function OE(a,h,m,y,R,D,G){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+h+`
`+m+`
`+D+" "+G})}function Ts(a,h,m,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+FE(a,m)+(y?" "+y:"")})}function LE(a,h){a.info(function(){return"TIMEOUT: "+h})}bi.prototype.info=function(){};function FE(a,h){if(!a.g)return h;if(!h)return null;try{const D=JSON.parse(h);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var m=D[a];if(!(m.length<2)){var y=m[1];if(Array.isArray(y)&&!(y.length<1)){var R=y[0];if(R!="noop"&&R!="stop"&&R!="close")for(let G=1;G<y.length;G++)y[G]=""}}}}return fc(D)}catch{return h}}var Ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gm;function gc(){}p(gc,Um),gc.prototype.g=function(){return new XMLHttpRequest},Gm=new gc;function Di(a){return encodeURIComponent(String(a))}function UE(a){var h=1;a=a.split(":");const m=[];for(;h>0&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function Gn(a,h,m,y){this.j=a,this.i=h,this.l=m,this.S=y||1,this.V=new Ci(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Km}function Km(){this.i=null,this.g="",this.h=!1}var Qm={},yc={};function vc(a,h,m){a.M=1,a.A=Aa(un(h)),a.u=m,a.R=!0,Ym(a,null)}function Ym(a,h){a.F=Date.now(),Sa(a),a.B=un(a.A);var m=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),up(m.i,"t",y),a.C=0,m=a.j.L,a.h=new Km,a.g=Np(a.j,m?h:null,!a.u),a.P>0&&(a.O=new DE(d(a.Y,a,a.g),a.P)),h=a.V,m=a.g,y=a.ba;var R="readystatechange";Array.isArray(R)||(R&&(Lm[0]=R.toString()),R=Lm);for(let D=0;D<R.length;D++){const G=_a(m,R[D],y||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.J?X(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Pi(),ME(a.i,a.v,a.B,a.l,a.S,a.u)}Gn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Yn(a)==3?h.j():this.Y(a)},Gn.prototype.Y=function(a){try{if(a==this.g)e:{const ae=Yn(this.g),Ge=this.g.ya(),Ee=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||gp(this.g)))){this.K||ae!=4||Ge==7||(Ge==8||Ee<=0?Pi(3):Pi(2)),_c(this);var h=this.g.ca();this.X=h;var m=zE(this);if(this.o=h==200,OE(this.i,this.v,this.B,this.l,this.S,ae,h),this.o){if(this.U&&!this.L){t:{if(this.g){var y,R=this.g;if((y=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(y)){var D=y;break t}}D=null}if(a=D)Ts(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xc(this,a);else{this.o=!1,this.m=3,yt(12),$r(this),ji(this);break e}}if(this.R){a=!0;let Je;for(;!this.K&&this.C<m.length;)if(Je=BE(this,m),Je==yc){ae==4&&(this.m=4,yt(14),a=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==Qm){this.m=4,yt(15),Ts(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else Ts(this.i,this.l,Je,null),xc(this,Je);if(Jm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||m.length!=0||this.h.h||(this.m=1,yt(16),a=!1),this.o=this.o&&a,!a)Ts(this.i,this.l,m,"[Invalid Chunked Response]"),$r(this),ji(this);else if(m.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Cc(G),G.P=!0,yt(11))}}else Ts(this.i,this.l,m,null),xc(this,m);ae==4&&$r(this),this.o&&!this.K&&(ae==4?Tp(this.j,this):(this.o=!1,Sa(this)))}else n1(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),$r(this),ji(this)}}}catch{}finally{}};function zE(a){if(!Jm(a))return a.g.la();const h=gp(a.g);if(h==="")return"";let m="";const y=h.length,R=Yn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return $r(a),ji(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<y;D++)a.h.h=!0,m+=a.h.i.decode(h[D],{stream:!(R&&D==y-1)});return h.length=0,a.h.g+=m,a.C=0,a.h.g}function Jm(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function BE(a,h){var m=a.C,y=h.indexOf(`
`,m);return y==-1?yc:(m=Number(h.substring(m,y)),isNaN(m)?Qm:(y+=1,y+m>h.length?yc:(h=h.slice(y,y+m),a.C=y+m,h)))}Gn.prototype.cancel=function(){this.K=!0,$r(this)};function Sa(a){a.T=Date.now()+a.H,Xm(a,a.H)}function Xm(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ri(d(a.aa,a),h)}function _c(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Gn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(LE(this.i,this.B),this.M!=2&&(Pi(),yt(17)),$r(this),this.m=2,ji(this)):Xm(this,this.T-a)};function ji(a){a.j.I==0||a.K||Tp(a.j,a)}function $r(a){_c(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Fm(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function xc(a,h){try{var m=a.j;if(m.I!=0&&(m.g==a||wc(m.h,a))){if(!a.L&&wc(m.h,a)&&m.I==3){try{var y=m.Ba.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)Ra(m),ka(m);else break e;Nc(m),yt(18)}}else m.xa=R[1],0<m.xa-m.K&&R[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ri(d(m.Va,m),6e3));tp(m.h)<=1&&m.ta&&(m.ta=void 0)}else Hr(m,11)}else if((a.L||m.g==a)&&Ra(m),!_(h))for(R=m.Ba.g.parse(h),h=0;h<R.length;h++){let Ee=R[h];const Je=Ee[0];if(!(Je<=m.K))if(m.K=Je,Ee=Ee[1],m.I==2)if(Ee[0]=="c"){m.M=Ee[1],m.ba=Ee[2];const cn=Ee[3];cn!=null&&(m.ka=cn,m.j.info("VER="+m.ka));const Wr=Ee[4];Wr!=null&&(m.za=Wr,m.j.info("SVER="+m.za));const Jn=Ee[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(y=1.5*Jn,m.O=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Xn=a.g;if(Xn){const Da=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var D=y.h;D.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Ec(D,D.h),D.h=null))}if(y.G){const kc=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;kc&&(y.wa=kc,Se(y.J,y.G,kc))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),y=m;var G=a;if(y.na=Ap(y,y.L?y.ba:null,y.W),G.L){np(y.h,G);var ae=G,Ge=y.O;Ge&&(ae.H=Ge),ae.D&&(_c(ae),Sa(ae)),y.g=G}else wp(y);m.i.length>0&&Pa(m)}else Ee[0]!="stop"&&Ee[0]!="close"||Hr(m,7);else m.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Hr(m,7):Ac(m):Ee[0]!="noop"&&m.l&&m.l.qa(Ee),m.A=0)}}Pi(4)}catch{}}var $E=class{constructor(a,h){this.g=a,this.map=h}};function Zm(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ep(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function tp(a){return a.h?1:a.g?a.g.size:0}function wc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ec(a,h){a.g?a.g.add(h):a.h=h}function np(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Zm.prototype.cancel=function(){if(this.i=rp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function rp(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.G);return h}return S(a.i)}var sp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qE(a,h){if(a){a=a.split("&");for(let m=0;m<a.length;m++){const y=a[m].indexOf("=");let R,D=null;y>=0?(R=a[m].substring(0,y),D=a[m].substring(y+1)):R=a[m],h(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Kn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Kn?(this.l=a.l,Vi(this,a.j),this.o=a.o,this.g=a.g,Mi(this,a.u),this.h=a.h,Tc(this,cp(a.i)),this.m=a.m):a&&(h=String(a).match(sp))?(this.l=!1,Vi(this,h[1]||"",!0),this.o=Oi(h[2]||""),this.g=Oi(h[3]||"",!0),Mi(this,h[4]),this.h=Oi(h[5]||"",!0),Tc(this,h[6]||"",!0),this.m=Oi(h[7]||"")):(this.l=!1,this.i=new Fi(null,this.l))}Kn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(Li(h,ip,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Li(h,ip,!0),"@"),a.push(Di(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Li(m,m.charAt(0)=="/"?GE:WE,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Li(m,QE)),a.join("")},Kn.prototype.resolve=function(a){const h=un(this);let m=!!a.j;m?Vi(h,a.j):m=!!a.o,m?h.o=a.o:m=!!a.g,m?h.g=a.g:m=a.u!=null;var y=a.h;if(m)Mi(h,a.u);else if(m=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var R=h.h.lastIndexOf("/");R!=-1&&(y=h.h.slice(0,R+1)+y)}if(R=y,R==".."||R==".")y="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){y=R.lastIndexOf("/",0)==0,R=R.split("/");const D=[];for(let G=0;G<R.length;){const ae=R[G++];ae=="."?y&&G==R.length&&D.push(""):ae==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),y&&G==R.length&&D.push("")):(D.push(ae),y=!0)}y=D.join("/")}else y=R}return m?h.h=y:m=a.i.toString()!=="",m?Tc(h,cp(a.i)):m=!!a.m,m&&(h.m=a.m),h};function un(a){return new Kn(a)}function Vi(a,h,m){a.j=m?Oi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Mi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Tc(a,h,m){h instanceof Fi?(a.i=h,YE(a.i,a.l)):(m||(h=Li(h,KE)),a.i=new Fi(h,a.l))}function Se(a,h,m){a.i.set(h,m)}function Aa(a){return Se(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Oi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Li(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,HE),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function HE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ip=/[#\/\?@]/g,WE=/[#\?:]/g,GE=/[#\?]/g,KE=/[#\?@]/g,QE=/#/g;function Fi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function qr(a){a.g||(a.g=new Map,a.h=0,a.i&&qE(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Fi.prototype,t.add=function(a,h){qr(this),this.i=null,a=Is(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function op(a,h){qr(a),h=Is(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ap(a,h){return qr(a),h=Is(a,h),a.g.has(h)}t.forEach=function(a,h){qr(this),this.g.forEach(function(m,y){m.forEach(function(R){a.call(h,R,y,this)},this)},this)};function lp(a,h){qr(a);let m=[];if(typeof h=="string")ap(a,h)&&(m=m.concat(a.g.get(Is(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)m=m.concat(a[h]);return m}t.set=function(a,h){return qr(this),this.i=null,a=Is(this,a),ap(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=lp(this,a),a.length>0?String(a[0]):h):h};function up(a,h,m){op(a,h),m.length>0&&(a.i=null,a.g.set(Is(a,h),S(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let y=0;y<h.length;y++){var m=h[y];const R=Di(m);m=lp(this,m);for(let D=0;D<m.length;D++){let G=R;m[D]!==""&&(G+="="+Di(m[D])),a.push(G)}}return this.i=a.join("&")};function cp(a){const h=new Fi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Is(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function YE(a,h){h&&!a.j&&(qr(a),a.i=null,a.g.forEach(function(m,y){const R=y.toLowerCase();y!=R&&(op(this,y),up(this,R,m))},a)),a.j=h}function JE(a,h){const m=new bi;if(o.Image){const y=new Image;y.onload=f(Qn,m,"TestLoadImage: loaded",!0,h,y),y.onerror=f(Qn,m,"TestLoadImage: error",!1,h,y),y.onabort=f(Qn,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=f(Qn,m,"TestLoadImage: timeout",!1,h,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function XE(a,h){const m=new bi,y=new AbortController,R=setTimeout(()=>{y.abort(),Qn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(R),D.ok?Qn(m,"TestPingServer: ok",!0,h):Qn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Qn(m,"TestPingServer: error",!1,h)})}function Qn(a,h,m,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(m)}catch{}}function ZE(){this.g=new VE}function Ic(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Ic,Um),Ic.prototype.g=function(){return new Na(this.i,this.h)};function Na(a,h){ie.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Na,ie),t=Na.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,zi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dp(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function dp(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ui(this):zi(this),this.readyState==3&&dp(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ui(this))},t.Na=function(a){this.g&&(this.response=a,Ui(this))},t.ga=function(){this.g&&Ui(this)};function Ui(a){a.readyState=4,a.l=null,a.j=null,a.B=null,zi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function hp(a){let h="";return b(a,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Sc(a,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=hp(m),typeof a=="string"?m!=null&&Di(m):Se(a,h,m))}function Oe(a){ie.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Oe,ie);var e1=/^https?$/i,t1=["POST","PUT"];t=Oe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gm.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){fp(this,D);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)m.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())m.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(D=>D.toLowerCase()=="content-type"),R=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(t1,h,void 0)>=0)||y||R||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,G]of m)this.g.setRequestHeader(D,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){fp(this,D)}};function fp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,mp(a),Ca(a)}function mp(a){a.A||(a.A=!0,ce(a,"complete"),ce(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ce(this,"complete"),ce(this,"abort"),Ca(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ca(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pp(this):this.Xa())},t.Xa=function(){pp(this)};function pp(a){if(a.h&&typeof i<"u"){if(a.v&&Yn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ce(a,"readystatechange"),Yn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=D===0){let G=String(a.D).match(sp)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),y=!e1.test(G?G.toLowerCase():"")}m=y}if(m)ce(a,"complete"),ce(a,"success");else{a.o=6;try{var R=Yn(a)>2?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.ca()+"]",mp(a)}}finally{Ca(a)}}}}function Ca(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const m=a.g;a.g=null,h||ce(a,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),jE(h)}};function gp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function n1(a){const h={};a=(a.g&&Yn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var m=UE(a[y]);const R=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const D=h[R]||[];h[R]=D,D.push(m)}H(h,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function yp(a){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,a),this.Za=Bi("retryDelaySeedMs",1e4,a),this.Ta=Bi("forwardChannelMaxRetries",2,a),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Zm(a&&a.concurrentRequestLimit),this.Ba=new ZE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yp.prototype,t.ka=8,t.I=1,t.connect=function(a,h,m,y){yt(0),this.W=a,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.J=Ap(this,null,this.W),Pa(this)};function Ac(a){if(vp(a),a.I==3){var h=a.V++,m=un(a.J);if(Se(m,"SID",a.M),Se(m,"RID",h),Se(m,"TYPE","terminate"),$i(a,m),h=new Gn(a,a.j,h),h.M=2,h.A=Aa(un(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=Np(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Sa(h)}Sp(a)}function ka(a){a.g&&(Cc(a),a.g.cancel(),a.g=null)}function vp(a){ka(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ra(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Pa(a){if(!ep(a.h)&&!a.m){a.m=!0;var h=a.Ea;M||v(),$||(M(),$=!0),x.add(h,a),a.D=0}}function r1(a,h){return tp(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ri(d(a.Ea,a,h),Ip(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const R=new Gn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=X(D),fe(D,this.U)):D=this.U),this.u!==null||this.R||(R.J=D,D=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=xp(this,R,h),m=un(this.J),Se(m,"RID",a),Se(m,"CVER",22),this.G&&Se(m,"X-HTTP-Session-Id",this.G),$i(this,m),D&&(this.R?h="headers="+Di(hp(D))+"&"+h:this.u&&Sc(m,this.u,D)),Ec(this.h,R),this.Ra&&Se(m,"TYPE","init"),this.S?(Se(m,"$req",h),Se(m,"SID","null"),R.U=!0,vc(R,m,null)):vc(R,m,h),this.I=2}}else this.I==3&&(a?_p(this,a):this.i.length==0||ep(this.h)||_p(this))};function _p(a,h){var m;h?m=h.l:m=a.V++;const y=un(a.J);Se(y,"SID",a.M),Se(y,"RID",m),Se(y,"AID",a.K),$i(a,y),a.u&&a.o&&Sc(y,a.u,a.o),m=new Gn(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),h&&(a.i=h.G.concat(a.i)),h=xp(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Ec(a.h,m),vc(m,y,h)}function $i(a,h){a.H&&b(a.H,function(m,y){Se(h,y,m)}),a.l&&b({},function(m,y){Se(h,y,m)})}function xp(a,h,m){m=Math.min(a.i.length,m);const y=a.l?d(a.l.Ka,a.l,a):null;e:{var R=a.i;let ae=-1;for(;;){const Ge=["count="+m];ae==-1?m>0?(ae=R[0].g,Ge.push("ofs="+ae)):ae=0:Ge.push("ofs="+ae);let Ee=!0;for(let Je=0;Je<m;Je++){var D=R[Je].g;const cn=R[Je].map;if(D-=ae,D<0)ae=Math.max(0,R[Je].g-100),Ee=!1;else try{D="req"+D+"_"||"";try{var G=cn instanceof Map?cn:Object.entries(cn);for(const[Wr,Jn]of G){let Xn=Jn;l(Jn)&&(Xn=fc(Jn)),Ge.push(D+Wr+"="+encodeURIComponent(Xn))}}catch(Wr){throw Ge.push(D+"type="+encodeURIComponent("_badmap")),Wr}}catch{y&&y(cn)}}if(Ee){G=Ge.join("&");break e}}G=void 0}return a=a.i.splice(0,m),h.G=a,G}function wp(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;M||v(),$||(M(),$=!0),x.add(h,a),a.A=0}}function Nc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ri(d(a.Da,a),Ip(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Ep(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ri(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),ka(this),Ep(this))};function Cc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Ep(a){a.g=new Gn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=un(a.na);Se(h,"RID","rpc"),Se(h,"SID",a.M),Se(h,"AID",a.K),Se(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Se(h,"TO",a.ia),Se(h,"TYPE","xmlhttp"),$i(a,h),a.u&&a.o&&Sc(h,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=Aa(un(h)),m.u=null,m.R=!0,Ym(m,a)}t.Va=function(){this.C!=null&&(this.C=null,ka(this),Nc(this),yt(19))};function Ra(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Tp(a,h){var m=null;if(a.g==h){Ra(a),Cc(a),a.g=null;var y=2}else if(wc(a.h,h))m=h.G,np(a.h,h),y=1;else return;if(a.I!=0){if(h.o)if(y==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var R=a.D;y=Ta(),ce(y,new Hm(y,m)),Pa(a)}else wp(a);else if(R=h.m,R==3||R==0&&h.X>0||!(y==1&&r1(a,h)||y==2&&Nc(a)))switch(m&&m.length>0&&(h=a.h,h.i=h.i.concat(m)),R){case 1:Hr(a,5);break;case 4:Hr(a,10);break;case 3:Hr(a,6);break;default:Hr(a,2)}}}function Ip(a,h){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*h}function Hr(a,h){if(a.j.info("Error code "+h),h==2){var m=d(a.bb,a),y=a.Ua;const R=!y;y=new Kn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vi(y,"https"),Aa(y),R?JE(y.toString(),m):XE(y.toString(),m)}else yt(2);a.I=0,a.l&&a.l.pa(h),Sp(a),vp(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Sp(a){if(a.I=0,a.ja=[],a.l){const h=rp(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ja,h),A(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function Ap(a,h,m){var y=m instanceof Kn?un(m):new Kn(m);if(y.g!="")h&&(y.g=h+"."+y.g),Mi(y,y.u);else{var R=o.location;y=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;const D=new Kn(null);y&&Vi(D,y),h&&(D.g=h),R&&Mi(D,R),m&&(D.h=m),y=D}return m=a.G,h=a.wa,m&&h&&Se(y,m,h),Se(y,"VER",a.ka),$i(a,y),y}function Np(a,h,m){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Oe(new Ic({ab:m})):new Oe(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cp(){}t=Cp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ba(){}ba.prototype.g=function(a,h){return new bt(a,h)};function bt(a,h){ie.call(this),this.g=new yp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!_(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ss(this)}p(bt,ie),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Ac(this.g)},bt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=fc(a),a=m);h.i.push(new $E(h.Ya++,a)),h.I==3&&Pa(h)},bt.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,bt.Z.N.call(this)};function kp(a){mc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(kp,mc);function Pp(){pc.call(this),this.status=1}p(Pp,pc);function Ss(a){this.g=a}p(Ss,Cp),Ss.prototype.ra=function(){ce(this.g,"a")},Ss.prototype.qa=function(a){ce(this.g,new kp(a))},Ss.prototype.pa=function(a){ce(this.g,new Pp)},Ss.prototype.oa=function(){ce(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Kx=function(){return new ba},Gx=function(){return Ta()},Wx=Br,Ph={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ia.NO_ERROR=0,Ia.TIMEOUT=8,Ia.HTTP_ERROR=6,wl=Ia,Wm.COMPLETE="complete",Hx=Wm,zm.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",ie.prototype.listen=ie.prototype.J,oo=zm,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,qx=Oe}).apply(typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi="12.9.0";function d2(t){wi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Gf("@firebase/firestore");function Ns(){return fs.logLevel}function Q(t,...e){if(fs.logLevel<=me.DEBUG){const n=e.map(sm);fs.debug(`Firestore (${wi}): ${t}`,...n)}}function Bn(t,...e){if(fs.logLevel<=me.ERROR){const n=e.map(sm);fs.error(`Firestore (${wi}): ${t}`,...n)}}function ms(t,...e){if(fs.logLevel<=me.WARN){const n=e.map(sm);fs.warn(`Firestore (${wi}): ${t}`,...n)}}function sm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Qx(t,r,n)}function Qx(t,e,n){let r=`FIRESTORE (${wi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bn(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Qx(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class f2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class m2{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new Yx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class p2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class g2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new p2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ay(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ay(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=v2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Rh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return hd(s)===hd(i)?pe(s,i):hd(s)?1:-1}return pe(t.length,e.length)}const _2=55296,x2=57343;function hd(t){const e=t.charCodeAt(0);return e>=_2&&e<=x2}function ci(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="__name__";class fn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=fn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=fn.isNumericId(e),s=fn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fn.extractNumericId(e).compare(fn.extractNumericId(n)):Rh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class Te extends fn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const w2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends fn{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return w2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ny}static keyField(){return new st([Ny])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Te.fromString(e))}static fromName(e){return new Z(Te.fromString(e).popFirst(5))}static empty(){return new Z(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e,n){if(!n)throw new K(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function E2(t,e,n,r){if(e===!0&&r===!0)throw new K(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cy(t){if(!Z.isDocumentKey(t))throw new K(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ky(t){if(Z.isDocumentKey(t))throw new K(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Wu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wu(t);throw new K(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function ha(t,e){if(!Xx(t))throw new K(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-62135596800,Ry=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ry);return new Ne(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Py)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ha(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Py;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:We("string",Ne._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ne(0,0))}static max(){return new ne(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=-1;function T2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new Cr(s,Z.empty(),e)}function I2(t){return new Cr(t.readTime,t.key,Go)}class Cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cr(ne.min(),Z.empty(),Go)}static max(){return new Cr(ne.max(),Z.empty(),Go)}}function S2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==A2)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function C2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ti(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=-1;function Ku(t){return t==null}function lu(t){return t===0&&1/t==-1/0}function k2(t){return typeof t=="number"&&Number.isInteger(t)&&!lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="";function P2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=by(e)),e=R2(t.get(n),e);return by(e)}function R2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Zx:n+="";break;default:n+=i}}return n}function by(t){return t+Zx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ew(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}}class el{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jy(this.data.getIterator())}getIteratorFrom(e){return new jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new Ye(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new tw("Invalid base64 string: "+i):i}}(e);return new at(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const b2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=b2.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="server_timestamp",rw="__type__",sw="__previous_value__",iw="__local_write_time__";function am(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rw])==null?void 0:r.stringValue)===nw}function Qu(t){const e=t.mapValue.fields[sw];return am(e)?Qu(e):e}function Ko(t){const e=kr(t.mapValue.fields[iw].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,s,i,o,l,u,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f,this.apiKey=p}}const uu="(default)";class Qo{constructor(e,n){this.projectId=e,this.database=n||uu}static empty(){return new Qo("","")}get isDefaultDatabase(){return this.database===uu}isEqual(e){return e instanceof Qo&&e.projectId===this.projectId&&e.database===this.database}}function j2(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new K(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__type__",V2="__max__",tl={mapValue:{}},aw="__vector__",cu="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?am(t)?4:O2(t)?9007199254740991:M2(t)?10:11:te(28295,{value:t})}function In(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ko(t).isEqual(Ko(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=kr(s.timestampValue),l=kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Pr(s.bytesValue).isEqual(Pr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),l=Ue(i.doubleValue);return o===l?lu(o)===lu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ci(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Dy(o)!==Dy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!In(o[u],l[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Yo(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function di(t,e){if(t===e)return 0;const n=Rr(t),r=Rr(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Vy(t.timestampValue,e.timestampValue);case 4:return Vy(Ko(t),Ko(e));case 5:return Rh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Pr(i),u=Pr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=pe(l[d],u[d]);if(f!==0)return f}return pe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=pe(Ue(i.latitude),Ue(o.latitude));return l!==0?l:pe(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return My(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,S,A,k;const l=i.fields||{},u=o.fields||{},d=(g=l[cu])==null?void 0:g.arrayValue,f=(S=u[cu])==null?void 0:S.arrayValue,p=pe(((A=d==null?void 0:d.values)==null?void 0:A.length)||0,((k=f==null?void 0:f.values)==null?void 0:k.length)||0);return p!==0?p:My(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===tl.mapValue&&o===tl.mapValue)return 0;if(i===tl.mapValue)return 1;if(o===tl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Rh(u[p],f[p]);if(g!==0)return g;const S=di(l[u[p]],d[f[p]]);if(S!==0)return S}return pe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function Vy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=kr(t),r=kr(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function My(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=di(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function hi(t){return bh(t)}function bh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bh(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function El(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qu(t);return e?16+El(e):16;case 5:return 2*t.stringValue.length;case 6:return Pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+El(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ur(r.fields,(i,o)=>{s+=i.length+El(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function Oy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dh(t){return!!t&&"integerValue"in t}function lm(t){return!!t&&"arrayValue"in t}function Ly(t){return!!t&&"nullValue"in t}function Fy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tl(t){return!!t&&"mapValue"in t}function M2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ow])==null?void 0:r.stringValue)===aw}function Io(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ur(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Io(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Io(t.arrayValue.values[n]);return e}return{...t}}function O2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===V2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Io(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Io(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Tl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ur(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new St(Io(this.value))}}function lw(t){const e=[];return Ur(t.fields,(n,r)=>{const s=new st([n]);if(Tl(r)){const i=lw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,ne.min(),ne.min(),ne.min(),St.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ne.min(),ne.min(),St.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ne.min(),ne.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.position=e,this.inclusive=n}}function Uy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function zy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function L2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{}class He extends uw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new U2(e,n,r):n==="array-contains"?new $2(e,r):n==="in"?new q2(e,r):n==="not-in"?new H2(e,r):n==="array-contains-any"?new W2(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new z2(e,r):new B2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(di(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends uw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new an(e,n)}matches(e){return cw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cw(t){return t.op==="and"}function dw(t){return F2(t)&&cw(t)}function F2(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function jh(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(dw(t))return t.filters.map(e=>jh(e)).join(",");{const e=t.filters.map(n=>jh(n)).join(",");return`${t.op}(${e})`}}function hw(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&hw(o,s.filters[l]),!0):!1}(t,e):void te(19439)}function fw(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(fw).join(" ,")+"}"}(t):"Filter"}class U2 extends He{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class z2 extends He{constructor(e,n){super(e,"in",n),this.keys=mw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class B2 extends He{constructor(e,n){super(e,"not-in",n),this.keys=mw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class $2 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lm(n)&&Yo(n.arrayValue,this.value)}}class q2 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yo(this.value.arrayValue,n)}}class H2 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yo(this.value.arrayValue,n)}}class W2 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function By(t,e=null,n=[],r=[],s=null,i=null,o=null){return new G2(t,e,n,r,s,i,o)}function um(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.Te=n}return e.Te}function cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zy(t.startAt,e.startAt)&&zy(t.endAt,e.endAt)}function Vh(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function K2(t,e,n,r,s,i,o,l){return new fa(t,e,n,r,s,i,o,l)}function Yu(t){return new fa(t)}function $y(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Q2(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function pw(t){return t.collectionGroup!==null}function So(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ye(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new hu(i,r))}),n.has(st.keyField().canonicalString())||e.Ie.push(new hu(st.keyField(),r))}return e.Ie}function wn(t){const e=re(t);return e.Ee||(e.Ee=Y2(e,So(t))),e.Ee}function Y2(t,e){if(t.limitType==="F")return By(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new hu(s.field,i)});const n=t.endAt?new du(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new du(t.startAt.position,t.startAt.inclusive):null;return By(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mh(t,e){const n=t.filters.concat([e]);return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Oh(t,e,n){return new fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ju(t,e){return cm(wn(t),wn(e))&&t.limitType===e.limitType}function gw(t){return`${um(wn(t))}|lt:${t.limitType}`}function Cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>fw(s)).join(", ")}]`),Ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hi(s)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function Xu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of So(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Uy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,So(r),s)||r.endAt&&!function(o,l,u){const d=Uy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,So(r),s))}(t,e)}function J2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yw(t){return(e,n)=>{let r=!1;for(const s of So(t)){const i=X2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function X2(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?di(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new Ve(Z.comparator);function $n(){return Z2}const vw=new Ve(Z.comparator);function ao(...t){let e=vw;for(const n of t)e=e.insert(n.key,n);return e}function _w(t){let e=vw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zr(){return Ao()}function xw(){return Ao()}function Ao(){return new xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const ek=new Ve(Z.comparator),tk=new Ye(Z.comparator);function ge(...t){let e=tk;for(const n of t)e=e.add(n);return e}const nk=new Ye(pe);function rk(){return nk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(e)?"-0":e}}function ww(t){return{integerValue:""+t}}function sk(t,e){return k2(e)?ww(e):dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this._=void 0}}function ik(t,e,n){return t instanceof Jo?function(s,i){const o={fields:{[rw]:{stringValue:nw},[iw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&am(i)&&(i=Qu(i)),i&&(o.fields[sw]=i),{mapValue:o}}(n,e):t instanceof Xo?Tw(t,e):t instanceof Zo?Iw(t,e):function(s,i){const o=Ew(s,i),l=qy(o)+qy(s.Ae);return Dh(o)&&Dh(s.Ae)?ww(l):dm(s.serializer,l)}(t,e)}function ok(t,e,n){return t instanceof Xo?Tw(t,e):t instanceof Zo?Iw(t,e):n}function Ew(t,e){return t instanceof fu?function(r){return Dh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jo extends Zu{}class Xo extends Zu{constructor(e){super(),this.elements=e}}function Tw(t,e){const n=Sw(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zo extends Zu{constructor(e){super(),this.elements=e}}function Iw(t,e){let n=Sw(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class fu extends Zu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qy(t){return Ue(t.integerValue||t.doubleValue)}function Sw(t){return lm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.field=e,this.transform=n}}function lk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xo&&s instanceof Xo||r instanceof Zo&&s instanceof Zo?ci(r.elements,s.elements,In):r instanceof fu&&s instanceof fu?In(r.Ae,s.Ae):r instanceof Jo&&s instanceof Jo}(t.transform,e.transform)}class uk{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ec{}function Aw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cw(t.key,nn.none()):new ma(t.key,t.data,nn.none());{const n=t.data,r=St.empty();let s=new Ye(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zr(t.key,r,new Mt(s.toArray()),nn.none())}}function ck(t,e,n){t instanceof ma?function(s,i,o){const l=s.value.clone(),u=Wy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(s,i,o){if(!Il(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Wy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Nw(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n,r){return t instanceof ma?function(i,o,l,u){if(!Il(i.precondition,o))return l;const d=i.value.clone(),f=Gy(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(i,o,l,u){if(!Il(i.precondition,o))return l;const d=Gy(i.fieldTransforms,u,o),f=o.data;return f.setAll(Nw(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Il(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function dk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ew(r.transform,s||null);i!=null&&(n===null&&(n=St.empty()),n.set(r.field,i))}return n||null}function Hy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ci(r,s,(i,o)=>lk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ma extends ec{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zr extends ec{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Nw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wy(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,ok(o,l,n[s]))}return r}function Gy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ik(i,o,e))}return r}class Cw extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hk extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ck(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Aw(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,(n,r)=>Hy(n,r))&&ci(this.baseMutations,e.baseMutations,(n,r)=>Hy(n,r))}}class hm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return ek}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,ye;function gk(t){switch(t){case L.OK:return te(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function kw(t){if(t===void 0)return Bn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Be.OK:return L.OK;case Be.CANCELLED:return L.CANCELLED;case Be.UNKNOWN:return L.UNKNOWN;case Be.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Be.INTERNAL:return L.INTERNAL;case Be.UNAVAILABLE:return L.UNAVAILABLE;case Be.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Be.NOT_FOUND:return L.NOT_FOUND;case Be.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Be.ABORTED:return L.ABORTED;case Be.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Be.DATA_LOSS:return L.DATA_LOSS;default:return te(39323,{code:t})}}(ye=Be||(Be={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=new Er([4294967295,4294967295],0);function Ky(t){const e=yk().encode(t),n=new $x;return n.update(e),new Uint8Array(n.digest())}function Qy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Er([n,r],0),new Er([s,i],0)]}class fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lo(`Invalid padding: ${n}`);if(r<0)throw new lo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Er.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Er.fromNumber(r)));return s.compare(vk)===1&&(s=new Er([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ky(e),[r,s]=Qy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new fm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Ky(e),[r,s]=Qy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tc(ne.min(),s,new Ve(pe),$n(),ge())}}class pa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pa(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Pw{constructor(e,n){this.targetId=e,this.Ce=n}}class Rw{constructor(e,n,r=at.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Yy{constructor(){this.ve=0,this.Fe=Jy(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new pa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Jy()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class _k{constructor(e){this.Ge=e,this.ze=new Map,this.je=$n(),this.He=nl(),this.Je=nl(),this.Ze=new Ve(pe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Vh(i))if(r===0){const o=new Z(i.path);this.et(n,o,ft.newNoDocument(o,ne.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Pr(r).toUint8Array()}catch(u){if(u instanceof tw)return ms("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new fm(o,s,i)}catch(u){return ms(u instanceof lo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Vh(l.target)){const u=new Z(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ft.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ge();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new tc(e,n,this.Ze,this.je,r);return this.je=$n(),this.He=nl(),this.Je=nl(),this.Ze=new Ve(pe),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Yy,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ye(pe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ye(pe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yy),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nl(){return new Ve(Z.comparator)}function Jy(){return new Ve(Z.comparator)}const xk={asc:"ASCENDING",desc:"DESCENDING"},wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ek={and:"AND",or:"OR"};class Tk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lh(t,e){return t.useProto3Json||Ku(e)?e:{value:e}}function mu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ik(t,e){return mu(t,e.toTimestamp())}function En(t){return xe(!!t,49232),ne.fromTimestamp(function(n){const r=kr(n);return new Ne(r.seconds,r.nanos)}(t))}function mm(t,e){return Fh(t,e).canonicalString()}function Fh(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dw(t){const e=Te.fromString(t);return xe(Lw(e),10190,{key:e.toString()}),e}function Uh(t,e){return mm(t.databaseId,e.path)}function fd(t,e){const n=Dw(e);if(n.get(1)!==t.databaseId.projectId)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(Vw(n))}function jw(t,e){return mm(t.databaseId,e)}function Sk(t){const e=Dw(t);return e.length===4?Te.emptyPath():Vw(e)}function zh(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vw(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Xy(t,e,n){return{name:Uh(t,e),fields:n.value.mapValue.fields}}function Ak(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(xe(f===void 0||typeof f=="string",58123),at.fromBase64String(f||"")):(xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),at.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?L.UNKNOWN:kw(d.code);return new K(f,d.message||"")}(o);n=new Rw(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fd(t,r.document.name),i=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):ne.min(),l=new St({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Sl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fd(t,r.document),i=r.readTime?En(r.readTime):ne.min(),o=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Sl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fd(t,r.document),i=r.removedTargetIds||[];n=new Sl([],i,s,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new pk(s,i),l=r.targetId;n=new Pw(l,o)}}return n}function Nk(t,e){let n;if(e instanceof ma)n={update:Xy(t,e.key,e.value)};else if(e instanceof Cw)n={delete:Uh(t,e.key)};else if(e instanceof zr)n={update:Xy(t,e.key,e.data),updateMask:Mk(e.fieldMask)};else{if(!(e instanceof hk))return te(16599,{dt:e.type});n={verify:Uh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Ik(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function Ck(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?En(s.updateTime):En(i);return o.isEqual(ne.min())&&(o=En(i)),new uk(o,s.transformResults||[])}(n,e))):[]}function kk(t,e){return{documents:[jw(t,e.path)]}}function Pk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jw(t,s);const i=function(d){if(d.length!==0)return Ow(an.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ks(g.field),direction:Dk(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Rk(t){let e=Sk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=Mw(p);return g instanceof an&&dw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(A){return new hu(Ps(A.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Ku(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,S=p.values||[];return new du(S,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,S=p.values||[];return new du(S,g)}(n.endAt)),K2(e,s,o,i,l,"F",u,d)}function bk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Mw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ps(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ps(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ps(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ps(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return He.create(Ps(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>Mw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function Dk(t){return xk[t]}function jk(t){return wk[t]}function Vk(t){return Ek[t]}function ks(t){return{fieldPath:t.canonicalString()}}function Ps(t){return st.fromServerFormat(t.fieldPath)}function Ow(t){return t instanceof He?function(n){if(n.op==="=="){if(Fy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NAN"}};if(Ly(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Fy(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NAN"}};if(Ly(n.value))return{unaryFilter:{field:ks(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(n.field),op:jk(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>Ow(s));return r.length===1?r[0]:{compositeFilter:{op:Vk(n.op),filters:r}}}(t):te(54877,{filter:t})}function Mk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Lw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Fw(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.yt=e}}function Lk(t){const e=Rk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Sn=new Uk}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Cr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Uk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uw=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(Uw,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new fi(0)}static ar(){return new fi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",zk=1048576;function tv([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class Bk{constructor(e){this.Pr=e,this.buffer=new Ye(tv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $k{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Q(ev,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ti(n)?Q(ev,"Ignoring IndexedDB error during garbage collection: ",n):await Ei(n)}await this.Ar(3e5)})}}class qk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Gu.ce);const r=new Bk(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Zy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zy):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ns()<=me.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Hk(t,e){return new qk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.changes=new xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&No(r.mutation,s,Mt.empty(),Ne.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Zr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ao();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=$n();const o=Ao(),l=function(){return Ao()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof zr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),No(f.mutation,d,f.mutation.getFieldMask(),Ne.now())):o.set(d.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>l.set(d,new Gk(f,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ao();let s=new Ve((o,l)=>o-l),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Mt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||ge()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=xw();f.forEach(g=>{if(!i.has(g)){const S=Aw(n.get(g),r.get(g));S!==null&&p.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return Q2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Zr());let l=Go,u=i;return o.next(d=>F.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ge())).next(f=>({batchId:l,changes:_w(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=ao();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ao();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const d=function(p,g){return new fa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))});let l=ao();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&No(f.mutation,d,Mt.empty(),Ne.now()),Xu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Lk(s.bundledQuery),readTime:En(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.overlays=new Ve(Z.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Zr(),i=n.length+1,o=new Z(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Zr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Zr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mk(n,r));let i=this.Lr.get(n);i===void 0&&(i=ge(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.kr=new Ye(Xe.Kr),this.qr=new Ye(Xe.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Xe(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Z(new Te([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Z(new Te([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=ge();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Z.comparator(e.key,n.key)||pe(e.Hr,n.Hr)}static Ur(e,n){return pe(e.Hr,n.Hr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ye(Xe.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fk(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Xe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?om:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(pe);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new Z(i),0);let l=new Ye(pe);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Xe(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.ti=e,this.docs=function(){return new Ve(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$n();const o=n.path,l=new Z(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||S2(I2(f),r)<=0||(s.has(f.key)||Xu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eP(this)}getSize(e){return F.resolve(this.size)}}class eP extends Wk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.persistence=e,this.ri=new xs(n=>um(n),cm),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.ii=0,this.si=new pm,this.targetCount=0,this.oi=fi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new fi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this._i={},this.overlays={},this.ai=new Gu(0),this.ui=!1,this.ui=!0,this.ci=new Jk,this.referenceDelegate=e(this),this.li=new tP(this),this.indexManager=new Fk,this.remoteDocumentCache=function(s){return new Zk(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Ok(n),this.Pi=new Qk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Xk(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new nP(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class nP extends N2{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.Ri=new pm,this.Ai=null}static Vi(e){return new gm(e)}get di(){if(this.Ai)return this.Ai;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const s=Z.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class pu{constructor(e,n){this.persistence=e,this.fi=new xs(r=>P2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Hk(this,n)}static Vi(e,n){return new pu(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=El(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return SS()?8:C2(pt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new rP;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ns()<=me.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Ns()<=me.DEBUG&&Q("QueryEngine","Query:",Cs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ns()<=me.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):F.resolve())}gs(e,n){if($y(n))return F.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Oh(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,l);return this.Ss(n,d,o,u.readTime)?this.gs(e,Oh(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return $y(n)||s.isEqual(ne.min())?F.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?F.resolve(null):(Ns()<=me.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cs(n)),this.Ds(e,o,n,T2(s,Go)).next(l=>l))})}bs(e,n){let r=new Ye(yw(e));return n.forEach((s,i)=>{Xu(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ns()<=me.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Cs(n)),this.fs.getDocumentsMatchingQuery(e,n,Cr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="LocalStore",iP=3e8;class oP{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Ve(pe),this.Fs=new xs(i=>um(i),cm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function aP(t,e,n,r){return new oP(t,e,n,r)}async function Bw(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ge();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:l}))})})}function lP(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let S=F.resolve();return g.forEach(A=>{S=S.next(()=>f.getEntry(u,A)).next(k=>{const V=d.docVersions.get(A);xe(V!==null,48541),k.version.compareTo(V)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ge();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function $w(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function uP(t,e){const n=re(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.li.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,f.addedDocuments,p)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(at.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),s=s.insert(p,S),function(k,V,T){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=iP?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,S,f)&&l.push(n.li.updateTargetData(i,S))});let u=$n(),d=ge();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(cP(i,o,e.documentUpdates).next(f=>{u=f.Bs,d=f.Ls})),!r.isEqual(ne.min())){const f=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function cP(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$n();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Q(vm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function dP(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=om),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hP(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Bh(t,e,n){const r=re(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ti(o))throw o;Q(vm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function nv(t,e,n){const r=re(t);let s=ne.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=re(u),g=p.Fs.get(f);return g!==void 0?F.resolve(p.vs.get(g)):p.li.getTargetData(d,f)}(r,o,wn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:ge())).next(l=>(fP(r,J2(e),l),{documents:l,ks:i})))}function fP(t,e,n){let r=t.Ms.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class rv{constructor(){this.activeTargetIds=rk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mP{constructor(){this.vo=new rv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new rv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="ConnectivityMonitor";class iv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Q(sv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Q(sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl=null;function $h(){return rl===null?rl=function(){return 268435456+Math.round(2147483648*Math.random())}():rl++,"0x"+rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="RestConnection",gP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class yP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===uu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=$h(),l=this.Qo(e,n.toUriEncodedString());Q(md,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(l),f=Lr(d);return this.zo(e,l,u,r,f).then(p=>(Q(md,`Received RPC '${e}' ${o}: `,p),p),p=>{throw ms(md,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=gP[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection",Xi=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Zs extends yP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Zs.c_){const e=Gx();Xi(e,Wx.STAT_EVENT,n=>{n.stat===Ph.PROXY?Q(ct,"STAT_EVENT: detected buffering proxy"):n.stat===Ph.NOPROXY&&Q(ct,"STAT_EVENT: detected no buffering proxy")}),Zs.c_=!0}}zo(e,n,r,s,i){const o=$h();return new Promise((l,u)=>{const d=new qx;d.setWithCredentials(!0),d.listenOnce(Hx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wl.NO_ERROR:const p=d.getResponseJson();Q(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case wl.TIMEOUT:Q(ct,`RPC '${e}' ${o} timed out`),u(new K(L.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const g=d.getStatus();if(Q(ct,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);const A=S==null?void 0:S.error;if(A&&A.status&&A.message){const k=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(w)>=0?w:L.UNKNOWN}(A.status);u(new K(k,A.message))}else u(new K(L.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K(L.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(ct,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);Q(ct,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=$h(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Q(ct,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);this.I_(f);let p=!1,g=!1;const S=new vP({Ho:A=>{g?Q(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(p||(Q(ct,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Q(ct,`RPC '${e}' stream ${s} sending:`,A),f.send(A))},Jo:()=>f.close()});return Xi(f,oo.EventType.OPEN,()=>{g||(Q(ct,`RPC '${e}' stream ${s} transport opened.`),S.i_())}),Xi(f,oo.EventType.CLOSE,()=>{g||(g=!0,Q(ct,`RPC '${e}' stream ${s} transport closed`),S.o_(),this.E_(f))}),Xi(f,oo.EventType.ERROR,A=>{g||(g=!0,ms(ct,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),S.o_(new K(L.UNAVAILABLE,"The operation could not be completed")))}),Xi(f,oo.EventType.MESSAGE,A=>{var k;if(!g){const V=A.data[0];xe(!!V,16349);const T=V,w=(T==null?void 0:T.error)||((k=T[0])==null?void 0:k.error);if(w){Q(ct,`RPC '${e}' stream ${s} received error:`,w);const N=w.status;let j=function(x){const v=Be[x];if(v!==void 0)return kw(v)}(N),M=w.message;N==="NOT_FOUND"&&M.includes("database")&&M.includes("does not exist")&&M.includes(this.databaseId.database)&&ms(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),j===void 0&&(j=L.INTERNAL,M="Unknown error status: "+N+" with message "+w.message),g=!0,S.o_(new K(j,M)),f.close()}else Q(ct,`RPC '${e}' stream ${s} received:`,V),S.__(V)}}),Zs.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Kx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){return new Zs(t)}function pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return new Tk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs.c_=!1;class qw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class Hw{constructor(e,n,r,s,i,o,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Bn(n.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Q(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xP extends Hw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ak(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?En(o.readTime):ne.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=zh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Vh(u)?{documents:kk(i,u)}:{query:Pk(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bw(i,o.resumeToken);const d=Lh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=mu(i,o.snapshotVersion.toTimestamp());const d=Lh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=bk(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=zh(this.serializer),n.removeTarget=e,this.K_(n)}}class wP extends Hw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ck(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Nk(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{}class TP extends EP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Fh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(L.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Fh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function IP(t,e,n,r){return new TP(t,e,n,r)}class SP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="RemoteStore";class AP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{ws(this)&&(Q(ps,"Restarting streams for network reachability change."),await async function(u){const d=re(u);d.Ea.add(4),await ga(d),d.Va.set("Unknown"),d.Ea.delete(4),await rc(d)}(this))})}),this.Va=new SP(r,s)}}async function rc(t){if(ws(t))for(const e of t.Ra)await e(!0)}async function ga(t){for(const e of t.Ra)await e(!1)}function Ww(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Em(n)?wm(n):Ii(n).O_()&&xm(n,e))}function _m(t,e){const n=re(t),r=Ii(n);n.Ia.delete(e),r.O_()&&Gw(n,e),n.Ia.size===0&&(r.O_()?r.L_():ws(n)&&n.Va.set("Unknown"))}function xm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ii(t).Z_(e)}function Gw(t,e){t.da.$e(e),Ii(t).X_(e)}function wm(t){t.da=new _k({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ii(t).start(),t.Va.ua()}function Em(t){return ws(t)&&!Ii(t).x_()&&t.Ia.size>0}function ws(t){return re(t).Ea.size===0}function Kw(t){t.da=void 0}async function NP(t){t.Va.set("Online")}async function CP(t){t.Ia.forEach((e,n)=>{xm(t,e)})}async function kP(t,e){Kw(t),Em(t)?(t.Va.ha(e),wm(t)):t.Va.set("Unknown")}async function PP(t,e,n){if(t.Va.set("Online"),e instanceof Rw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){Q(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gu(t,r)}else if(e instanceof Sl?t.da.Xe(e):e instanceof Pw?t.da.st(e):t.da.tt(e),!n.isEqual(ne.min()))try{const r=await $w(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(at.EMPTY_BYTE_STRING,f.snapshotVersion)),Gw(i,u);const p=new dr(f.target,u,d,f.sequenceNumber);xm(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(ps,"Failed to raise snapshot:",r),await gu(t,r)}}async function gu(t,e,n){if(!Ti(e))throw e;t.Ea.add(1),await ga(t),t.Va.set("Offline"),n||(n=()=>$w(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(ps,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await rc(t)})}function Qw(t,e){return e().catch(n=>gu(t,n,e))}async function sc(t){const e=re(t),n=br(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:om;for(;RP(e);)try{const s=await dP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,bP(e,s)}catch(s){await gu(e,s)}Yw(e)&&Jw(e)}function RP(t){return ws(t)&&t.Ta.length<10}function bP(t,e){t.Ta.push(e);const n=br(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Yw(t){return ws(t)&&!br(t).x_()&&t.Ta.length>0}function Jw(t){br(t).start()}async function DP(t){br(t).ra()}async function jP(t){const e=br(t);for(const n of t.Ta)e.ea(n.mutations)}async function VP(t,e,n){const r=t.Ta.shift(),s=hm.from(r,e,n);await Qw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await sc(t)}async function MP(t,e){e&&br(t).Y_&&await async function(r,s){if(function(o){return gk(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();br(r).B_(),await Qw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await sc(r)}}(t,e),Yw(t)&&Jw(t)}async function av(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Q(ps,"RemoteStore received new credentials");const r=ws(n);n.Ea.add(3),await ga(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rc(n)}async function OP(t,e){const n=re(t);e?(n.Ea.delete(2),await rc(n)):e||(n.Ea.add(2),await ga(n),n.Va.set("Unknown"))}function Ii(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new xP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:NP.bind(null,t),Yo:CP.bind(null,t),t_:kP.bind(null,t),J_:PP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Em(t)?wm(t):t.Va.set("Unknown")):(await t.ma.stop(),Kw(t))})),t.ma}function br(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new wP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:DP.bind(null,t),t_:MP.bind(null,t),ta:jP.bind(null,t),na:VP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await sc(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(ps,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Tm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(t,e){if(Bn("AsyncQueue",`${e}: ${t}`),Ti(t))return new K(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{static emptySet(e){return new ei(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ao(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.ga=new Ve(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class mi{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new mi(e,n,ei.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class FP{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=uv(),i.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new K(L.ABORTED,"Firestore shutting down"))}}function uv(){return new xs(t=>gw(t),Ju)}async function Xw(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new LP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Im(o,`Initialization of query '${Cs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Sm(n)}async function Zw(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UP(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&Sm(n)}function zP(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Sm(t){t.Ca.forEach(e=>{e.next()})}var qh,cv;(cv=qh||(qh={})).Ma="default",cv.Cache="cache";class eE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.key=e}}class nE{constructor(e){this.key=e}}class BP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ge(),this.mutatedKeys=ge(),this.eu=yw(e),this.tu=new ei(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new lv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),S=Xu(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let V=!1;g&&S?g.data.isEqual(S.data)?A!==k&&(r.track({type:3,doc:S}),V=!0):this.su(g,S)||(r.track({type:2,doc:S}),V=!0,(u&&this.eu(S,u)>0||d&&this.eu(S,d)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),V=!0):g&&!S&&(r.track({type:1,doc:g}),V=!0,(u||d)&&(l=!0)),V&&(S?(o=o.add(S),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(S,A){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:V})}};return k(S)-k(A)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,o.length!==0||d?{snapshot:new mi(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new nE(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new tE(r))}),n}cu(e){this.Za=e.ks,this.Ya=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Am="SyncEngine";class $P{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qP{constructor(e){this.key=e,this.hu=!1}}class HP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new xs(l=>gw(l),Ju),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ve(Z.comparator),this.Au=new Map,this.Vu=new pm,this.du={},this.mu=new Map,this.fu=fi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WP(t,e,n=!0){const r=lE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await rE(r,e,n,!0),s}async function GP(t,e){const n=lE(t);await rE(n,e,!0,!1)}async function rE(t,e,n,r){const s=await hP(t.localStore,wn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await KP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ww(t.remoteStore,s),l}async function KP(t,e,n,r,s){t.pu=(p,g,S)=>async function(k,V,T,w){let N=V.view.ru(T);N.Ss&&(N=await nv(k.localStore,V.query,!1).then(({documents:x})=>V.view.ru(x,N)));const j=w&&w.targetChanges.get(V.targetId),M=w&&w.targetMismatches.get(V.targetId)!=null,$=V.view.applyChanges(N,k.isPrimaryClient,j,M);return hv(k,V.targetId,$.au),$.snapshot}(t,p,g,S);const i=await nv(t.localStore,e,!0),o=new BP(e,i.ks),l=o.ru(i.documents),u=pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);hv(t,n,d.au);const f=new $P(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function QP(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Ju(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_m(r.remoteStore,s.targetId),Hh(r,s.targetId)}).catch(Ei)):(Hh(r,s.targetId),await Bh(r.localStore,s.targetId,!0))}async function YP(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_m(n.remoteStore,r.targetId))}async function JP(t,e,n){const r=sR(t);try{const s=await function(o,l){const u=re(o),d=Ne.now(),f=l.reduce((S,A)=>S.add(A.key),ge());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let A=$n(),k=ge();return u.xs.getEntries(S,f).next(V=>{A=V,A.forEach((T,w)=>{w.isValidDocument()||(k=k.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,A)).next(V=>{p=V;const T=[];for(const w of l){const N=dk(w,p.get(w.key).overlayedDocument);N!=null&&T.push(new zr(w.key,N,lw(N.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,d,T,l)}).next(V=>{g=V;const T=V.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(S,V.batchId,T)})}).then(()=>({batchId:g.batchId,changes:_w(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.du[o.currentUser.toKey()];d||(d=new Ve(pe)),d=d.insert(l,u),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await ya(r,s.changes),await sc(r.remoteStore)}catch(s){const i=Im(s,"Failed to persist write");n.reject(i)}}async function sE(t,e){const n=re(t);try{const r=await uP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))}),await ya(n,r,e)}catch(r){await Ei(r)}}function dv(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.ba)g.va(l)&&(d=!0)}),d&&Sm(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XP(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ve(Z.comparator);o=o.insert(i,ft.newNoDocument(i,ne.min()));const l=ge().add(i),u=new tc(ne.min(),new Map,new Ve(pe),o,l);await sE(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),Nm(r)}else await Bh(r.localStore,e,!1).then(()=>Hh(r,e,n)).catch(Ei)}async function ZP(t,e){const n=re(t),r=e.batch.batchId;try{const s=await lP(n.localStore,e);oE(n,r,null),iE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ya(n,s)}catch(s){await Ei(s)}}async function eR(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(xe(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);oE(r,e,n),iE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ya(r,s)}catch(s){await Ei(s)}}function iE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function oE(t,e,n){const r=re(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Hh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||aE(t,r)})}function aE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(_m(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Nm(t))}function hv(t,e,n){for(const r of n)r instanceof tE?(t.Vu.addReference(r.key,e),tR(t,r)):r instanceof nE?(Q(Am,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||aE(t,r.key)):te(19791,{wu:r})}function tR(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Q(Am,"New document in limbo: "+n),t.Eu.add(r),Nm(t))}function Nm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new qP(n)),t.Ru=t.Ru.insert(n,r),Ww(t.remoteStore,new dr(wn(Yu(n.path)),r,"TargetPurposeLimboResolution",Gu.ce))}}async function ya(t,e,n){const r=re(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=ym.Es(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,d){const f=re(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.Ts,S=>f.persistence.referenceDelegate.addReference(p,g.targetId,S)).next(()=>F.forEach(g.Is,S=>f.persistence.referenceDelegate.removeReference(p,g.targetId,S)))))}catch(p){if(!Ti(p))throw p;Q(vm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const S=f.vs.get(g),A=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(A);f.vs=f.vs.insert(g,k)}}}(r.localStore,i))}async function nR(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Q(Am,"User change. New user:",e.toKey());const r=await Bw(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new K(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ya(n,r.Ns)}}function rR(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function lE(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XP.bind(null,e),e.Pu.J_=UP.bind(null,e.eventManager),e.Pu.yu=zP.bind(null,e.eventManager),e}function sR(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eR.bind(null,e),e}class yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aP(this.persistence,new sP,e.initialUser,this.serializer)}Cu(e){return new zw(gm.Vi,this.serializer)}Du(e){return new mP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yu.provider={build:()=>new yu};class iR extends yu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof pu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $k(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new zw(r=>pu.Vi(r,n),this.serializer)}}class Wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nR.bind(null,this.syncEngine),await OP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FP}()}createDatastore(e){const n=nc(e.databaseInfo.databaseId),r=_P(e.databaseInfo);return IP(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new AP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>dv(this.syncEngine,n,0),function(){return iv.v()?new iv:new pP}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new HP(s,i,o,l,u,d);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);Q(ps,"RemoteStore shutting down."),i.Ea.add(5),await ga(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Wh.provider={build:()=>new Wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class oR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(Dr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Dr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Im(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gd(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Bw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aR(t);Q(Dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>av(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>av(e.remoteStore,s)),t._onlineComponents=e}async function aR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Dr,"Using user provided OfflineComponentProvider");try{await gd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),await gd(t,new yu)}}else Q(Dr,"Using default OfflineComponentProvider"),await gd(t,new iR(void 0));return t._offlineComponents}async function cE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Dr,"Using user provided OnlineComponentProvider"),await fv(t,t._uninitializedComponentsProvider._online)):(Q(Dr,"Using default OnlineComponentProvider"),await fv(t,new Wh))),t._onlineComponents}function lR(t){return cE(t).then(e=>e.syncEngine)}async function Gh(t){const e=await cE(t),n=e.eventManager;return n.onListen=WP.bind(null,e.syncEngine),n.onUnlisten=QP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YP.bind(null,e.syncEngine),n}function uR(t,e,n,r){const s=new uE(r),i=new eE(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>Xw(await Gh(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Zw(await Gh(t),i))}}function cR(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new uE({next:g=>{f.Nu(),o.enqueueAndForget(()=>Zw(i,p));const S=g.docs.has(l);!S&&g.fromCache?d.reject(new K(L.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&g.fromCache&&u&&u.source==="server"?d.reject(new K(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new eE(Yu(l.path),f,{includeMetadataChanges:!0,Ka:!0});return Xw(i,p)}(await Gh(t),t.asyncQueue,e,n,r)),r.promise}function dR(t,e){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>JP(await lR(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="ComponentProvider",mv=new Map;function fR(t,e,n,r,s){return new D2(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,dE(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firestore.googleapis.com",pv=!0;class gv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hE,this.ssl=pv}else this.host=e.host,this.ssl=e.ssl??pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zk)throw new K(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ic{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new h2;switch(r.type){case"firstParty":return new g2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mv.get(n);r&&(Q(hR,"Removing Datastore"),mv.delete(n),r.terminate())}(this),Promise.resolve()}}function mR(t,e,n,r={}){var d;t=tn(t,ic);const s=Lr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Hf(`https://${l}`),Wf("Firestore",!0)),i.host!==hE&&i.host!==l&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!us(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=dt.MOCK_USER;else{f=gS(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new dt(g)}t._authCredentials=new f2(new Yx(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Fe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fe(this.firestore,e,this._key)}toJSON(){return{type:Fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ha(n,Fe._jsonSchema))return new Fe(e,r||null,new Z(Te.fromString(n.referencePath)))}}Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:We("string",Fe._jsonSchemaVersion),referencePath:We("string")};class Ir extends Si{constructor(e,n,r){super(e,n,Yu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new Z(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function Dn(t,e,...n){if(t=Pe(t),Jx("collection","path",e),t instanceof ic){const r=Te.fromString(e,...n);return ky(r),new Ir(t,null,r)}{if(!(t instanceof Fe||t instanceof Ir))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return ky(r),new Ir(t.firestore,null,r)}}function Nt(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=im.newId()),Jx("doc","path",e),t instanceof ic){const r=Te.fromString(e,...n);return Cy(r),new Fe(t,null,new Z(r))}{if(!(t instanceof Fe||t instanceof Ir))throw new K(L.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Cy(r),new Fe(t.firestore,t instanceof Ir?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qw(this,"async_queue_retry"),this._c=()=>{const r=pd();r&&Q(yv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=pd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=pd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ti(e))throw e;Q(yv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",_v(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Tm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:_v(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _v(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class gs extends ic{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function pR(t,e){const n=typeof t=="object"?t:Qf(),r=typeof t=="string"?t:uu,s=Bu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Z_("firestore");i&&mR(s,...i)}return s}function Cm(t){if(t._terminated)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gR(t),t._firestoreClient}function gR(t){var r,s,i,o;const e=t._freezeSettings(),n=fR(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new oR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(at.fromBase64String(e))}catch(n){throw new K(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ha(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:We("string",$t._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tn._jsonSchemaVersion}}static fromJSON(e){if(ha(e,Tn._jsonSchema))return new Tn(e.latitude,e.longitude)}}Tn._jsonSchemaVersion="firestore/geoPoint/1.0",Tn._jsonSchema={type:We("string",Tn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ha(e,rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new rn(e.vectorValues);throw new K(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:We("string",rn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=/^__.*__$/;class vR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ma(e,this.data,n,this.fieldTransforms)}}class fE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{dataSource:t})}}class Pm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Pm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return vu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(mE(this.dataSource)&&yR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class _R{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nc(e)}createContext(e,n,r,s=!1){return new Pm({dataSource:e,methodName:n,targetDoc:r,path:st.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ac(t){const e=t._freezeSettings(),n=nc(t._databaseId);return new _R(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pE(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);bm("Data must be an object, but it was:",o,r);const l=gE(r,o);let u,d;if(i.merge)u=new Mt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=pi(e,p,n);if(!o.contains(g))throw new K(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_E(f,g)||f.push(g)}u=new Mt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new vR(new St(l),u,d)}class lc extends oc{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lc}}class Rm extends oc{_toFieldTransform(e){return new ak(e.path,new Jo)}isEqual(e){return e instanceof Rm}}function xR(t,e,n,r){const s=t.createContext(1,e,n);bm("Data must be an object, but it was:",s,r);const i=[],o=St.empty();Ur(r,(u,d)=>{const f=vE(e,u,n);d=Pe(d);const p=s.childContextForFieldPath(f);if(d instanceof lc)i.push(f);else{const g=va(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Mt(i);return new fE(o,l,s.fieldTransforms)}function wR(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[pi(e,r,n)],u=[s];if(i.length%2!=0)throw new K(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(pi(e,i[g])),u.push(i[g+1]);const d=[],f=St.empty();for(let g=l.length-1;g>=0;--g)if(!_E(d,l[g])){const S=l[g];let A=u[g];A=Pe(A);const k=o.childContextForFieldPath(S);if(A instanceof lc)d.push(S);else{const V=va(A,k);V!=null&&(d.push(S),f.set(S,V))}}const p=new Mt(d);return new fE(f,p,o.fieldTransforms)}function ER(t,e,n,r=!1){return va(n,t.createContext(r?4:3,e))}function va(t,e){if(yE(t=Pe(t)))return bm("Unsupported field value:",e,t),gE(t,e);if(t instanceof oc)return function(r,s){if(!mE(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=va(l,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:mu(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mu(s.serializer,i)}}if(r instanceof Tn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:bw(s.serializer,r._byteString)};if(r instanceof Fe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof rn)return function(o,l){const u=o instanceof rn?o.toArray():o;return{mapValue:{fields:{[ow]:{stringValue:aw},[cu]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw l.createError("VectorValues must only contain numeric values.");return dm(l.serializer,f)})}}}}}}(r,s);if(Fw(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Wu(r)}`)}(t,e)}function gE(t,e){const n={};return ew(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(t,(r,s)=>{const i=va(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Tn||t instanceof $t||t instanceof Fe||t instanceof oc||t instanceof rn||Fw(t))}function bm(t,e,n){if(!yE(n)||!Xx(n)){const r=Wu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function pi(t,e,n){if((e=Pe(e))instanceof km)return e._internalPath;if(typeof e=="string")return vE(t,e);throw vu("Field path arguments must be of type string or ",t,!1,void 0,n)}const TR=new RegExp("[~\\*/\\[\\]]");function vE(t,e,n){if(e.search(TR)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new km(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(L.INVALID_ARGUMENT,l+t+u)}function _E(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ur(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[cu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ue(o.doubleValue));return new rn(n)}convertGeoPoint(e){return new Tn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ko(e));default:return null}}convertTimestamp(e){const n=kr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);xe(Lw(r),9688,{name:e});const s=new Qo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Bn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE extends IR{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}function $e(){return new Rm("serverTimestamp")}const xv="@firebase/firestore",wv="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(pi("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SR extends wE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dm{}class NR extends Dm{}function _u(t,e,...n){let r=[];e instanceof Dm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Vm).length,l=i.filter(u=>u instanceof uc).length;if(o>1||o>0&&l>0)throw new K(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uc extends NR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uc(e,n,r)}_apply(e){const n=this._parse(e);return EE(e._query,n),new Si(e.firestore,e.converter,Mh(e._query,n))}_parse(e){const n=ac(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Iv(p,f);const A=[];for(const k of p)A.push(Tv(u,i,k));g={arrayValue:{values:A}}}else g=Tv(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Iv(p,f),g=ER(l,o,p,f==="in"||f==="not-in");return He.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jm(t,e,n){const r=e,s=pi("where",t);return uc._create(s,r,n)}class Vm extends Dm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)EE(o,u),o=Mh(o,u)}(e._query,n),new Si(e.firestore,e.converter,Mh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Tv(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new K(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pw(e)&&n.indexOf("/")!==-1)throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Z.isDocumentKey(r))throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Oy(t,new Z(r))}if(n instanceof Fe)return Oy(t,n._key);throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wu(n)}.`)}function Iv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function TE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ns extends wE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Al(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pi("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",ns._jsonSchema={type:We("string",ns._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class Al extends ns{data(e={}){return super.data(e)}}class ti{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new uo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Al(this._firestore,this._userDataWriter,r.key,r,new uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Al(s._firestore,s._userDataWriter,l.doc.key,l.doc,new uo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Al(s._firestore,s._userDataWriter,l.doc.key,l.doc,new uo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:CR(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ti._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti._jsonSchemaVersion="firestore/querySnapshot/1.0",ti._jsonSchema={type:We("string",ti._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){t=tn(t,Fe);const e=tn(t.firestore,gs),n=Cm(e);return cR(n,t._key).then(r=>SE(e,t,r))}function Nl(t,e,n){t=tn(t,Fe);const r=tn(t.firestore,gs),s=TE(t.converter,e,n),i=ac(r);return Mm(r,[pE(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function pn(t,e,n,...r){t=tn(t,Fe);const s=tn(t.firestore,gs),i=ac(s);let o;return o=typeof(e=Pe(e))=="string"||e instanceof km?wR(i,"updateDoc",t._key,e,n,r):xR(i,"updateDoc",t._key,e),Mm(s,[o.toMutation(t._key,nn.exists(!0))])}function IE(t,e){const n=tn(t.firestore,gs),r=Nt(t),s=TE(t.converter,e),i=ac(t.firestore);return Mm(n,[pE(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function rs(t,...e){var d,f,p;t=Pe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ev(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ev(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(p=g.complete)==null?void 0:p.bind(g)}let i,o,l;if(t instanceof Fe)o=tn(t.firestore,gs),l=Yu(t._key.path),i={next:g=>{e[r]&&e[r](SE(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=tn(t,Si);o=tn(g.firestore,gs),l=g._query;const S=new xE(o);i={next:A=>{e[r]&&e[r](new ti(o,S,g,A))},error:e[r+1],complete:e[r+2]},AR(t._query)}const u=Cm(o);return uR(u,l,s,i)}function Mm(t,e){const n=Cm(t);return dR(n,e)}function SE(t,e,n){const r=n.docs.get(e._key),s=new xE(t);return new ns(t,s,e._key,r,new uo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){d2(xi),cs(new Nr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new gs(new m2(r.getProvider("auth-internal")),new y2(o,r.getProvider("app-check-internal")),j2(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),vn(xv,wv,e),vn(xv,wv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="type.googleapis.com/google.protobuf.Int64Value",RR="type.googleapis.com/google.protobuf.UInt64Value";function AE(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function xu(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>xu(e));if(typeof t=="function"||typeof t=="object")return AE(t,e=>xu(e));throw new Error("Data cannot be encoded in JSON: "+t)}function gi(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case PR:case RR:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>gi(e)):typeof t=="function"||typeof t=="object"?AE(t,e=>gi(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Sn{constructor(e,n,r){super(`${Om}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Ct.prototype)}}function bR(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function wu(t,e){let n=bR(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!Sv[o])return new Ct("internal","internal");n=Sv[o],r=o}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=gi(s))}}catch{}return n==="ok"?null:new Ct(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="us-central1",jR=/^data: (.*?)(?:\n|$)/;function VR(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ct("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class MR{constructor(e,n,r,s,i=Kh,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new DR(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Kh}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function OR(t,e,n){const r=Lr(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Hf(t.emulatorOrigin+"/backends"),Wf("Functions",!0))}function LR(t,e,n){const r=s=>UR(t,e,s,{});return r.stream=(s,i)=>BR(t,e,s,i),r}function NE(t){return t.emulatorOrigin&&Lr(t.emulatorOrigin)?"include":void 0}async function FR(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:NE(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function CE(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function UR(t,e,n,r){const s=t._url(e);return zR(t,s,n,r)}async function zR(t,e,n,r){n=xu(n);const s={data:n},i=await CE(t,r),o=r.timeout||7e4,l=VR(o),u=await Promise.race([FR(e,s,i,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!u)throw new Ct("cancelled","Firebase Functions instance was deleted.");const d=wu(u.status,u.json);if(d)throw d;if(!u.json)throw new Ct("internal","Response is not valid JSON object.");let f=u.json.data;if(typeof f>"u"&&(f=u.json.result),typeof f>"u")throw new Ct("internal","Response is missing data field.");return{data:gi(f)}}function BR(t,e,n,r){const s=t._url(e);return $R(t,s,n,r||{})}async function $R(t,e,n,r){var g;n=xu(n);const s={data:n},i=await CE(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:NE(t)})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const k=new Ct("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const A=wu(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let l,u;const d=new Promise((S,A)=>{l=S,u=A});(g=r==null?void 0:r.signal)==null||g.addEventListener("abort",()=>{const S=new Ct("cancelled","Request was cancelled.");u(S)});const f=o.body.getReader(),p=qR(f,l,u,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const S=p.getReader();return{async next(){const{value:A,done:k}=await S.read();return{value:A,done:k}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:d}}function qR(t,e,n,r){const s=(o,l)=>{const u=o.match(jR);if(!u)return;const d=u[1];try{const f=JSON.parse(d);if("result"in f){e(gi(f.result));return}if("message"in f){l.enqueue(gi(f.message));return}if("error"in f){const p=wu(0,f);l.error(p),n(p);return}}catch(f){if(f instanceof Ct){l.error(f),n(f);return}}},i=new TextDecoder;return new ReadableStream({start(o){let l="";return u();async function u(){if(r!=null&&r.aborted){const d=new Ct("cancelled","Request was cancelled");return o.error(d),n(d),Promise.resolve()}try{const{value:d,done:f}=await t.read();if(f){l.trim()&&s(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const g=new Ct("cancelled","Request was cancelled");o.error(g),n(g),await t.cancel();return}l+=i.decode(d,{stream:!0});const p=l.split(`
`);l=p.pop()||"";for(const g of p)g.trim()&&s(g.trim(),o);return u()}catch(d){const f=d instanceof Ct?d:wu(0,null);o.error(f),n(f)}}},cancel(){return t.cancel()}})}const Av="@firebase/functions",Nv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="auth-internal",WR="app-check-internal",GR="messaging-internal";function KR(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(HR),o=n.getProvider(GR),l=n.getProvider(WR);return new MR(s,i,o,l,r)};cs(new Nr(Om,e,"PUBLIC").setMultipleInstances(!0)),vn(Av,Nv,t),vn(Av,Nv,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t=Qf(),e=Kh){const r=Bu(Pe(t),Om).getImmediate({identifier:e}),s=Z_("functions");return s&&YR(r,...s),r}function YR(t,e,n){OR(Pe(t),e,n)}function kE(t,e,n){return LR(Pe(t),e)}KR();const PE={apiKey:"AIzaSyBqe7srBIViRiHmZlIQzMywDhiop5q7OXI",authDomain:"colegio-verdy.firebaseapp.com",projectId:"colegio-verdy",storageBucket:"colegio-verdy.firebasestorage.app",messagingSenderId:"602481785882",appId:"1:602481785882:web:0f873bf9968992e5af65a3"},Cv=Object.entries(PE).filter(([,t])=>!t).map(([t])=>t),co=Cv.length?`Configurao Firebase incompleta. Defina: ${Cv.join(", ")}.`:null,jr=co?null:sx(PE),rt=jr?u2(jr):null,oe=jr?pR(jr):null,RE=jr?QR(jr):null,bE=O.createContext(),cc=()=>O.useContext(bE),kv=new Set(["teacher","parent","admin"]),Zi=t=>((t||"").split("@")[0]||"Usuario").replace(/[._-]+/g," ").trim()||"Usuario",sl=t=>`https://ui-avatars.com/api/?name=${encodeURIComponent(t||"Usuario")}&background=e2e8f0&color=0f172a`,JR=({children:t})=>{const[e,n]=O.useState(null),[r,s]=O.useState(null),[i,o]=O.useState(null),[l,u]=O.useState(!0);O.useEffect(()=>rt?JN(rt,async A=>{if(A)try{const k=Nt(oe,"users",A.uid),V=await kR(k);if(V.exists()){const T=V.data(),w=T.role,N=T.nome||Zi(A.email||T.email||""),j={uid:A.uid,email:T.email||A.email||null,role:kv.has(w)?w:"parent",nome:N,telefone:T.telefone||"",disciplina:T.disciplina||"",avatarUrl:T.avatarUrl||sl(N)};T.avatarUrl||await Nl(k,{avatarUrl:j.avatarUrl,updatedAt:$e()},{merge:!0}),o(j),s(kv.has(w)?w:"parent")}else{const T=Zi(A.email||""),w={uid:A.uid,email:A.email??null,role:"parent",nome:T,telefone:"",disciplina:"",avatarUrl:sl(T)};await Nl(k,{...w,createdAt:$e(),updatedAt:$e()}),o(w),s("parent")}}catch(k){console.log("Erro ao buscar role, backend no configurado ok. "+k),o({uid:A.uid,email:A.email||null,role:"parent",nome:Zi(A.email||""),telefone:"",disciplina:"",avatarUrl:sl(Zi(A.email||""))}),s("parent")}else o(null),s(null);n(A),u(!1)}):(u(!1),()=>{}),[]);const g={currentUser:e,userRole:r,userProfile:i,login:(S,A)=>rt?WN(rt,S,A):Promise.reject({code:"auth/configuration-not-found",message:co}),register:async(S,A)=>{if(!rt)return Promise.reject({code:"auth/configuration-not-found",message:co});if(!oe)return Promise.reject({code:"auth/configuration-not-found",message:co});const k=await HN(rt,S,A),V=Zi(k.user.email??S);return await Nl(Nt(oe,"users",k.user.uid),{uid:k.user.uid,email:k.user.email??S,role:"parent",nome:V,avatarUrl:sl(V),createdAt:$e(),updatedAt:$e()}),k},logout:()=>rt?XN(rt):Promise.resolve(),authError:co};return c.jsx(bE.Provider,{value:g,children:!l&&t})},XR=()=>{const[t,e]=O.useState(!0),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,l]=O.useState(""),[u,d]=O.useState(!1),{login:f,register:p,authError:g}=cc(),S=async A=>{A.preventDefault();try{l(""),d(!0),t?await f(n,s):await p(n,s)}catch(k){console.error(k),k.code==="auth/user-not-found"||k.code==="auth/invalid-credential"?l("E-mail ou senha invlidos. Verifique se voc j tem cadastro."):k.code==="auth/email-already-in-use"?l("Este e-mail j est cadastrado no sistema."):k.code==="auth/weak-password"?l("A senha deve ter pelo menos 6 caracteres."):k.code==="auth/configuration-not-found"?l(k.message||"Firebase no configurado para autenticao."):l("Ocorreu um erro ao comunicar com o servidor!")}finally{d(!1)}};return c.jsx("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center items-center p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-gradient-to-br from-primary to-primary-light flex items-center justify-center text-white font-bold text-3xl shadow-[0_4px_10px_rgba(16,185,129,0.3)] mb-4",children:"V"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Colgio Verdy"}),c.jsx("p",{className:"text-slate-500 mt-2",children:t?"Acesse o portal da escola":"Crie seu acesso inicial"})]}),c.jsxs("div",{className:"bg-white rounded-3xl p-8 border border-slate-200 shadow-xl shadow-slate-200/50",children:[g&&c.jsxs("div",{className:"bg-amber-50 text-amber-700 p-4 rounded-xl mb-6 flex items-start gap-3 text-sm",children:[c.jsx(zg,{className:"shrink-0 mt-0.5",size:18}),c.jsx("span",{children:g})]}),o&&c.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl mb-6 flex items-start gap-3 text-sm",children:[c.jsx(zg,{className:"shrink-0 mt-0.5",size:18}),c.jsx("span",{children:o})]}),c.jsxs("form",{onSubmit:S,className:"flex flex-col gap-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"E-mail"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"email",value:n,onChange:A=>r(A.target.value),placeholder:"Seu email de acesso",className:"w-full form-control !pl-10 !py-3",required:!0}),c.jsx(KI,{className:"absolute left-3.5 top-3.5 text-slate-400",size:18})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Senha"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"password",value:s,onChange:A=>i(A.target.value),placeholder:"",className:"w-full form-control !pl-10 !py-3",required:!0,minLength:6}),c.jsx(WI,{className:"absolute left-3.5 top-3.5 text-slate-400",size:18})]})]}),c.jsxs("button",{type:"submit",disabled:u,className:`btn-primary w-full justify-center !py-3.5 mt-2 text-base ${u?"opacity-70 cursor-not-allowed":""}`,children:[u?"Processando...":t?"Entrar no Sistema":"Criar Cadastro",t?c.jsx(GI,{size:20}):c.jsx(nS,{size:20})]})]}),c.jsx("div",{className:"mt-8 text-center text-sm text-slate-500 border-t border-slate-100 pt-6",children:c.jsxs("p",{children:[t?"Primeiro acesso? ":"J possui uma conta? ",c.jsx("button",{onClick:()=>{e(!t),l("")},className:"font-bold text-primary hover:text-primary-dark transition-colors",type:"button",children:t?"Cadastre-se aqui":"Faa Login"})]})})]})]})})},ZR=()=>{const{logout:t}=cc();return c.jsxs("div",{className:"flex flex-col gap-6 max-w-4xl mx-auto h-full p-4 lg:p-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Painel do Responsvel"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Acompanhe a rotina dos seus filhos (Em Construo)"})]}),c.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm font-semibold text-red-500 bg-red-50 px-4 py-2 rounded-xl hover:bg-red-100 transition-colors",children:[c.jsx(_h,{size:16})," Sair"]})]}),c.jsxs("div",{className:"glass-panel p-8 text-center flex flex-col items-center justify-center h-64 border-dashed border-2 border-slate-200",children:[c.jsx(HI,{size:48,className:"text-slate-300 mb-4"}),c.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-2",children:"rea em Desenvolvimento"}),c.jsx("p",{className:"text-slate-500 max-w-md",children:"Aqui os pais vero um resumo da ltima caderneta enviada, avisos urgentes da escola e atalhos rpidos."})]})]})},eb=[{id:"i1",label:"Total de Alunos",valor:"128",icon:Uu,color:"text-primary bg-primary/10"},{id:"i2",label:"Turmas Ativas",valor:"8",icon:G_,color:"text-primary bg-primary/10"},{id:"i3",label:"Eventos",valor:"8",icon:q_,color:"text-primary bg-primary/10"},{id:"i4",label:"Comunicados",valor:"8",icon:YI,color:"text-primary bg-primary/10"}],tb=[{id:"e1",dia:"22",mes:"FEV",titulo:"Reunio Pedaggica",horario:"14:00"},{id:"e2",dia:"25",mes:"FEV",titulo:"Entrega de Relatrios",horario:"09:00"},{id:"e3",dia:"03",mes:"MAR",titulo:"Incio Projeto Leitura",horario:"08:30"}],nb=[{id:"m1",titulo:"Comunicado Geral",texto:"Atualizao do calendrio escolar disponvel para famlias.",tempo:"h 10 min"},{id:"m2",titulo:"Coordenao",texto:"Lembrete sobre prazo de envio das avaliaes mensais.",tempo:"h 1 h"},{id:"m3",titulo:"Secretaria",texto:"Documentao de novos alunos em conferncia.",tempo:"h 3 h"}];function rb(){return c.jsxs("div",{className:"flex flex-col gap-6 max-w-6xl mx-auto",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Dashboard da Administrao"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Viso consolidada da operao escolar."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:eb.map(t=>c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60 flex items-center gap-3",children:[c.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center ${t.color}`,children:c.jsx(t.icon,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:t.label}),c.jsx("div",{className:"text-2xl font-bold text-slate-800",children:t.valor})]})]},t.id))}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(q_,{size:18,className:"text-slate-500"}),c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Calendrio Administrativo"})]}),c.jsx("div",{className:"flex flex-col gap-3",children:tb.map(t=>c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 flex items-center gap-3",children:[c.jsxs("div",{className:"w-14 h-14 rounded-lg bg-slate-100 border border-slate-200 flex flex-col items-center justify-center",children:[c.jsx("span",{className:"text-base font-bold text-slate-800 leading-none",children:t.dia}),c.jsx("span",{className:"text-[10px] font-semibold text-slate-500",children:t.mes})]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-slate-800",children:t.titulo}),c.jsx("div",{className:"text-sm text-slate-500",children:t.horario})]})]},t.id))})]}),c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(W_,{size:18,className:"text-slate-500"}),c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Mensagens Recentes"})]}),c.jsx("div",{className:"flex flex-col gap-3",children:nb.map(t=>c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[c.jsx("div",{className:"font-semibold text-slate-800",children:t.titulo}),c.jsx("div",{className:"text-xs text-slate-400",children:t.tempo})]}),c.jsx("div",{className:"text-sm text-slate-500",children:t.texto})]},t.id))})]})]})]})}const yd=5,vd={nome:"",turmaId:"",fotoUrl:""};function sb(t){return`https://ui-avatars.com/api/?name=${encodeURIComponent(t)}&background=e2e8f0&color=0f172a`}async function ib(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.onerror=()=>n(new Error("Falha ao ler arquivo de imagem.")),r.readAsDataURL(t)})}async function ob(t){const e=await new Promise((u,d)=>{const f=new Image;f.onload=()=>u(f),f.onerror=()=>d(new Error("Falha ao processar imagem.")),f.src=t}),n=512,r=document.createElement("canvas"),s=r.getContext("2d");if(!s)return t;const i=Math.min(n/e.width,n/e.height,1),o=Math.max(1,Math.round(e.width*i)),l=Math.max(1,Math.round(e.height*i));return r.width=o,r.height=l,s.drawImage(e,0,0,o,l),r.toDataURL("image/jpeg",.85)}function Pv(){const[t,e]=O.useState([]),[n,r]=O.useState([]),[s,i]=O.useState(!1),[o,l]=O.useState(null),[u,d]=O.useState(vd),[f,p]=O.useState(""),[g,S]=O.useState("todos"),[A,k]=O.useState("todas"),[V,T]=O.useState(1),[w,N]=O.useState(!1),[j,M]=O.useState(!0),[$,x]=O.useState({tipo:"",mensagem:""});O.useEffect(()=>oe?rs(Dn(oe,"students"),H=>{const X=H.docs.map(Y=>{const fe=Y.data();return{id:Y.id,nome:fe.nome||"Sem nome",turmaId:fe.turmaId||"",status:fe.status||"ativo",fotoUrl:fe.fotoUrl||""}}).sort((Y,fe)=>Y.nome.localeCompare(fe.nome,"pt-BR"));e(X),M(!1)},H=>{M(!1),x({tipo:"erro",mensagem:(H==null?void 0:H.message)||"No foi possvel carregar os alunos do banco."})}):(M(!1),x({tipo:"erro",mensagem:"Banco de dados no configurado."}),()=>{}),[]),O.useEffect(()=>oe?rs(Dn(oe,"classrooms"),H=>{const X=H.docs.map(Y=>{const fe=Y.data();return{id:Y.id,nome:fe.nome||"Sem nome",periodo:fe.periodo||"",status:fe.status||"ativa"}}).sort((Y,fe)=>Y.nome.localeCompare(fe.nome,"pt-BR"));r(X)}):()=>{},[]);const v=O.useMemo(()=>t.filter(b=>{const H=b.nome.toLowerCase().includes(f.toLowerCase()),X=g==="todos"?!0:b.status===g,Y=A==="todas"?!0:b.turmaId===A;return H&&X&&Y}),[t,f,g,A]),E=Math.max(1,Math.ceil(v.length/yd)),I=Math.min(V,E),C=v.slice((I-1)*yd,I*yd),P=b=>{var H;return((H=n.find(X=>X.id===b))==null?void 0:H.nome)||"Sem turma"},_=()=>{l(null),d(vd),i(!0)},z=b=>{l(b.id),d({nome:b.nome,turmaId:b.turmaId||"",fotoUrl:b.fotoUrl||""}),i(!0)},de=()=>{i(!1),l(null),d(vd)},ue=async b=>{var X;const H=(X=b.target.files)==null?void 0:X[0];if(H)try{const Y=await ib(H),fe=await ob(Y);d(Re=>({...Re,fotoUrl:fe}))}catch(Y){x({tipo:"erro",mensagem:(Y==null?void 0:Y.message)||"No foi possvel carregar a foto."})}finally{b.target.value=""}},W=async b=>{b.preventDefault(),x({tipo:"",mensagem:""}),N(!0);const H=u.nome.trim(),X=u.turmaId;if(!H||!X){N(!1);return}const Y=u.fotoUrl.trim()||sb(H);try{if(!oe)throw new Error("Banco de dados no configurado.");o?(await pn(Nt(oe,"students",o),{nome:H,turmaId:X,fotoUrl:Y,updatedAt:$e()}),x({tipo:"sucesso",mensagem:"Dados do aluno atualizados com sucesso."})):(await IE(Dn(oe,"students"),{nome:H,turmaId:X,fotoUrl:Y,status:"ativo",createdAt:$e(),updatedAt:$e()}),x({tipo:"sucesso",mensagem:"Aluno cadastrado com sucesso."})),T(1),de()}catch(fe){x({tipo:"erro",mensagem:(fe==null?void 0:fe.message)||"No foi possvel salvar o aluno."})}finally{N(!1)}},B=b=>{(async()=>{if(!oe)throw new Error("Banco de dados no configurado.");const X=t.find(Y=>Y.id===b);X&&await pn(Nt(oe,"students",b),{status:X.status==="ativo"?"inativo":"ativo",updatedAt:$e()})})().catch(X=>{x({tipo:"erro",mensagem:(X==null?void 0:X.message)||"No foi possvel atualizar o status do aluno."})})};return c.jsxs("div",{className:"flex flex-col gap-4 max-w-5xl mx-auto",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Alunos"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Cadastro, edio e status dos alunos."})]}),c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Alunos"}),c.jsx("button",{onClick:s?de:_,className:"h-9 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors",children:s?"Cancelar":"Adicionar aluno"})]}),s&&c.jsxs("form",{onSubmit:W,className:"mb-5 rounded-xl border border-slate-200 p-4 bg-white/80 flex flex-col gap-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-3 items-center",children:[c.jsx("div",{className:"col-span-3",children:c.jsx("div",{className:"grid grid-cols-1 gap-3 items-center",children:c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Upload da foto",c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 ",children:c.jsx("div",{className:"mx-auto w-32 h-32 rounded-full overflow-hidden border border-slate-200 bg-slate-100",children:u.fotoUrl?c.jsx("img",{src:u.fotoUrl,alt:"Avatar do aluno",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Sem foto"})})}),c.jsx("input",{type:"file",accept:"image/*",onChange:ue,className:"form-control !py-2"})]})})}),c.jsx("div",{className:"col-span-5",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("label",{className:"flex flex-col md:col-span-2 gap-1 text-sm text-slate-600",children:["Nome completo",c.jsx("input",{value:u.nome,onChange:b=>d(H=>({...H,nome:b.target.value})),placeholder:"Nome do aluno",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col md:col-span-2 gap-1 text-sm text-slate-600",children:["Turma",c.jsxs("select",{value:u.turmaId,onChange:b=>d(H=>({...H,turmaId:b.target.value})),className:"form-control !py-2.5",required:!0,children:[c.jsx("option",{value:"",children:"Selecione a turma"}),n.map(b=>c.jsx("option",{value:b.id,children:b.nome},b.id))]})]})]})})]}),c.jsx("button",{type:"submit",disabled:w,className:"h-10 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors self-end disabled:opacity-60",children:o?"Salvar edio":"Salvar aluno"})]}),$.mensagem&&c.jsx("div",{className:`mb-4 rounded-lg border px-3 py-2 text-sm ${$.tipo==="erro"?"bg-red-50 border-red-200 text-red-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:$.mensagem}),c.jsxs("div",{className:"flex flex-col gap-3 mb-4 md:flex-row",children:[c.jsx("input",{value:f,onChange:b=>{p(b.target.value),T(1)},placeholder:"Buscar por nome",className:"form-control !py-2.5"}),c.jsxs("select",{value:g,onChange:b=>{S(b.target.value),T(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todos",children:"Todos os status"}),c.jsx("option",{value:"ativo",children:"Ativo"}),c.jsx("option",{value:"inativo",children:"Inativo"})]}),c.jsxs("select",{value:A,onChange:b=>{k(b.target.value),T(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todas",children:"Todas as turmas"}),n.map(b=>c.jsx("option",{value:b.id,children:b.nome},b.id))]})]}),j&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Carregando alunos..."}),!j&&C.map(b=>c.jsxs("div",{className:"py-3 border-b border-slate-100 last:border-b-0 text-slate-700 grid grid-cols-5 md:grid-cols-12 gap-3 items-center",children:[c.jsxs("div",{className:"md:col-span-2 flex flex-wrap mdgap-2",children:[c.jsxs("button",{onClick:()=>z(b),className:"h-8 px-2 rounded-lg text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors inline-flex items-center gap-1",children:[c.jsx(Fu,{size:12})," Editar"]}),c.jsx("button",{onClick:()=>B(b.id),className:`h-8 px-2 rounded-lg text-xs font-medium transition-colors ${b.status==="ativo"?"bg-red-50 text-red-600 hover:bg-red-100":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:b.status==="ativo"?"Inativar":"Ativar"})]}),c.jsx("div",{className:"col-span-3 md:col-span-9 min-w-0",children:c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-slate-200 bg-slate-100 shrink-0",children:b.fotoUrl?c.jsx("img",{src:b.fotoUrl,alt:b.nome,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-[10px] text-slate-400",children:"Sem"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-medium truncate",children:b.nome}),c.jsx("div",{className:"text-sm text-slate-500 truncate",children:P(b.turmaId)})]})]})}),c.jsx("div",{className:"col-span-1 md:text-right",children:c.jsxs("div",{className:`text-xs text-center px-2 py-1 min-h-6 rounded-full font-semibold ${b.status==="ativo"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:[c.jsx("span",{className:"hidden md:block",children:b.status}),b.status!=="ativo"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(Lu,{})}),b.status==="ativo"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(ia,{})})]})})]},b.id)),!j&&C.length===0&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Nenhum aluno encontrado."}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-slate-500",children:["Pgina ",I," de ",E]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{disabled:I===1,onClick:()=>T(b=>Math.max(1,b-1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 disabled:opacity-40 disabled:cursor-not-allowed",children:"Anterior"}),c.jsx("button",{disabled:I===E,onClick:()=>T(b=>Math.min(E,b+1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 disabled:opacity-40 disabled:cursor-not-allowed",children:"Prxima"})]})]})]})]})}const _d=5,xd={nome:"",disciplina:"",email:"",telefone:"",avatarUrl:""};async function ab(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.onerror=()=>n(new Error("Falha ao ler arquivo de imagem.")),r.readAsDataURL(t)})}async function lb(t){const e=await new Promise((u,d)=>{const f=new Image;f.onload=()=>u(f),f.onerror=()=>d(new Error("Falha ao processar imagem.")),f.src=t}),n=512,r=document.createElement("canvas"),s=r.getContext("2d");if(!s)return t;const i=Math.min(n/e.width,n/e.height,1),o=Math.max(1,Math.round(e.width*i)),l=Math.max(1,Math.round(e.height*i));return r.width=o,r.height=l,s.drawImage(e,0,0,o,l),r.toDataURL("image/jpeg",.85)}function ub(){const[t,e]=O.useState([]),[n,r]=O.useState(!1),[s,i]=O.useState(null),[o,l]=O.useState(xd),[u,d]=O.useState(""),[f,p]=O.useState("todos"),[g,S]=O.useState("todas"),[A,k]=O.useState(1),[V,T]=O.useState(!1),[w,N]=O.useState(!0),[j,M]=O.useState({tipo:"",mensagem:""});O.useEffect(()=>{if(!oe)return N(!1),M({tipo:"erro",mensagem:"Banco de dados no configurado."}),()=>{};const W=_u(Dn(oe,"users"),jm("role","==","teacher"));return rs(W,b=>{const H=b.docs.map(X=>{const Y=X.data();return{id:X.id,nome:Y.nome||"Sem nome",disciplina:Y.disciplina||"",email:Y.email||"",telefone:Y.telefone||"",avatarUrl:Y.avatarUrl||"",status:Y.status||"ativo"}}).sort((X,Y)=>X.nome.localeCompare(Y.nome,"pt-BR"));e(H),N(!1)},b=>{N(!1),M({tipo:"erro",mensagem:(b==null?void 0:b.message)||"No foi possvel carregar os professores do banco."})})},[]);const $=O.useMemo(()=>[...new Set(t.map(W=>W.disciplina).filter(Boolean))].sort(),[t]),x=O.useMemo(()=>t.filter(W=>{const B=W.nome.toLowerCase().includes(u.toLowerCase()),b=f==="todos"?!0:W.status===f,H=g==="todas"?!0:W.disciplina===g;return B&&b&&H}),[t,u,f,g]),v=Math.max(1,Math.ceil(x.length/_d)),E=Math.min(A,v),I=x.slice((E-1)*_d,E*_d),C=()=>{i(null),l(xd),r(!0)},P=W=>{i(W.id),l({nome:W.nome,disciplina:W.disciplina,email:W.email||"",telefone:W.telefone||"",avatarUrl:W.avatarUrl||""}),r(!0)},_=()=>{i(null),l(xd),r(!1)},z=W=>{W.preventDefault(),(async()=>{var Re;M({tipo:"",mensagem:""}),T(!0);const b=o.nome.trim(),H=o.disciplina.trim(),X=o.email.trim().toLowerCase(),Y=o.telefone.trim(),fe=o.avatarUrl.trim();if(!b||!X){T(!1);return}try{if(s){if(!oe)throw new Error("Banco de dados no configurado.");await pn(Nt(oe,"users",s),{nome:b,disciplina:H||null,telefone:Y||null,avatarUrl:fe||null,updatedAt:$e()}),M({tipo:"sucesso",mensagem:"Dados do professor atualizados com sucesso."})}else{if(!jr||!rt)throw new Error("Firebase no configurado para cadastro de professor.");const Me=await kE(RE,"createTeacherAccount")({nome:b,email:X,disciplina:H,telefone:Y,avatarUrl:fe}),Et=((Re=Me==null?void 0:Me.data)==null?void 0:Re.email)||X;await bx(rt,Et),M({tipo:"sucesso",mensagem:"Professor cadastrado e link para criao de senha enviado por e-mail."})}k(1),_()}catch(gt){const Me=(gt==null?void 0:gt.message)||"No foi possvel salvar o professor.";M({tipo:"erro",mensagem:Me})}finally{T(!1)}})()},de=W=>{(async()=>{if(!oe)throw new Error("Banco de dados no configurado.");const b=t.find(H=>H.id===W);b&&await pn(Nt(oe,"users",W),{status:b.status==="ativo"?"inativo":"ativo",updatedAt:$e()})})().catch(b=>{M({tipo:"erro",mensagem:(b==null?void 0:b.message)||"No foi possvel atualizar o status do professor."})})},ue=async W=>{var b;const B=(b=W.target.files)==null?void 0:b[0];if(B)try{const H=await ab(B),X=await lb(H);l(Y=>({...Y,avatarUrl:X}))}catch(H){M({tipo:"erro",mensagem:(H==null?void 0:H.message)||"No foi possvel carregar o avatar."})}finally{W.target.value=""}};return c.jsxs("div",{className:"flex flex-col gap-4 max-w-5xl mx-auto",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Professores"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Cadastro, edio e status do quadro docente."})]}),c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Professores"}),c.jsx("button",{onClick:n?_:C,className:"h-9 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors",children:n?"Cancelar":"Adicionar professor"})]}),n&&c.jsxs("form",{onSubmit:z,className:"mb-5 rounded-xl border border-slate-200 p-4 bg-white/80 flex flex-col gap-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-3 items-center",children:[c.jsx("div",{className:"col-span-3",children:c.jsx("div",{className:"grid grid-cols-1 gap-3 items-center",children:c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Upload de avatar",c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 ",children:c.jsx("div",{className:"mx-auto w-32 h-32  rounded-full overflow-hidden border border-slate-200 bg-slate-100",children:o.avatarUrl?c.jsx("img",{src:o.avatarUrl,alt:"Avatar do professor",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Sem avatar"})})}),c.jsx("input",{type:"file",accept:"image/*",onChange:ue,className:"form-control !py-2"})]})})}),c.jsx("div",{className:"col-span-5",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("label",{className:"flex flex-col md:col-span-2 gap-1 text-sm text-slate-600",children:["Nome completo",c.jsx("input",{value:o.nome,onChange:W=>l(B=>({...B,nome:W.target.value})),placeholder:"Nome completo",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2 text-sm text-slate-600",children:["E-mail",c.jsx("input",{type:"email",value:o.email,onChange:W=>l(B=>({...B,email:W.target.value})),placeholder:"E-mail",className:"form-control !py-2.5",required:!0,disabled:!!s})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Disciplina",c.jsx("input",{value:o.disciplina,onChange:W=>l(B=>({...B,disciplina:W.target.value})),placeholder:"Disciplina (opcional)",className:"form-control !py-2.5"})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Telefone",c.jsx("input",{value:o.telefone,onChange:W=>l(B=>({...B,telefone:W.target.value})),placeholder:"Telefone (opcional)",className:"form-control !py-2.5"})]})]})})]}),c.jsx("button",{type:"submit",disabled:V,className:"h-10 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors self-end disabled:opacity-60",children:s?"Salvar edio":"Salvar professor"})]}),j.mensagem&&c.jsx("div",{className:`mb-4 rounded-lg border px-3 py-2 text-sm ${j.tipo==="erro"?"bg-red-50 border-red-200 text-red-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:j.mensagem}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[c.jsx("input",{value:u,onChange:W=>{d(W.target.value),k(1)},placeholder:"Buscar por nome",className:"form-control !py-2.5"}),c.jsxs("select",{value:f,onChange:W=>{p(W.target.value),k(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todos",children:"Todos os status"}),c.jsx("option",{value:"ativo",children:"Ativo"}),c.jsx("option",{value:"inativo",children:"Inativo"})]}),c.jsxs("select",{value:g,onChange:W=>{S(W.target.value),k(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todas",children:"Todas as disciplinas"}),$.map(W=>c.jsx("option",{value:W,children:W},W))]})]}),w&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Carregando professores..."}),!w&&I.map(W=>c.jsxs("div",{className:"py-3 border-b border-slate-100 last:border-b-0 text-slate-700 grid grid-cols-5 md:grid-cols-12 gap-3 items-center",children:[c.jsxs("div",{className:"md:col-span-2 flex flex-wrap mdgap-2",children:[c.jsxs("button",{onClick:()=>P(W),className:"h-8 px-2 rounded-lg text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors inline-flex items-center gap-1",children:[c.jsx(Fu,{size:12})," Editar"]}),c.jsx("button",{onClick:()=>de(W.id),className:`h-8 px-2 rounded-lg text-xs font-medium transition-colors ${W.status==="ativo"?"bg-red-50 text-red-600 hover:bg-red-100":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:W.status==="ativo"?"Inativar":"Ativar"})]}),c.jsx("div",{className:"col-span-3 md:col-span-6 min-w-0",children:c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-slate-200 bg-slate-100 shrink-0",children:W.avatarUrl?c.jsx("img",{src:W.avatarUrl,alt:W.nome,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-[10px] text-slate-400",children:"Sem"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-medium text-slate-800 truncate",children:W.nome}),c.jsx("div",{className:"text-sm text-slate-500 truncate",children:W.disciplina||"Sem disciplina"})]})]})}),c.jsxs("div",{className:"md:col-span-3 min-w-0 hidden md:block",children:[c.jsx("div",{className:"text-sm text-slate-700 truncate",children:W.email}),c.jsx("div",{className:"text-sm text-slate-500 truncate",children:W.telefone||"Sem telefone"})]}),c.jsx("div",{className:"col-span-1 md:text-right",children:c.jsxs("div",{className:`text-xs text-center px-2 py-1 min-h-6 rounded-full font-semibold ${W.status==="ativo"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:[c.jsx("span",{className:"hidden md:block",children:W.status}),W.status!=="ativo"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(Lu,{})}),W.status==="ativo"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(ia,{})})]})})]},W.id)),!w&&I.length===0&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Nenhum professor encontrado."}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-slate-500",children:["Pgina ",E," de ",v]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{disabled:E===1,onClick:()=>k(W=>Math.max(1,W-1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 disabled:opacity-40",children:"Anterior"}),c.jsx("button",{disabled:E===v,onClick:()=>k(W=>Math.min(v,W+1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 disabled:opacity-40",children:"Prxima"})]})]})]})]})}const wd=5,Ed={nome:"",email:"",telefone:"",avatarUrl:""};async function cb(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.onerror=()=>n(new Error("Falha ao ler arquivo de imagem.")),r.readAsDataURL(t)})}async function db(t){const e=await new Promise((u,d)=>{const f=new Image;f.onload=()=>u(f),f.onerror=()=>d(new Error("Falha ao processar imagem.")),f.src=t}),n=512,r=document.createElement("canvas"),s=r.getContext("2d");if(!s)return t;const i=Math.min(n/e.width,n/e.height,1),o=Math.max(1,Math.round(e.width*i)),l=Math.max(1,Math.round(e.height*i));return r.width=o,r.height=l,s.drawImage(e,0,0,o,l),r.toDataURL("image/jpeg",.85)}function hb(){const[t,e]=O.useState([]),[n,r]=O.useState(!1),[s,i]=O.useState(null),[o,l]=O.useState(Ed),[u,d]=O.useState(""),[f,p]=O.useState("todos"),[g,S]=O.useState(1),[A,k]=O.useState(!1),[V,T]=O.useState(!0),[w,N]=O.useState({tipo:"",mensagem:""});O.useEffect(()=>{if(!oe)return T(!1),N({tipo:"erro",mensagem:"Banco de dados no configurado."}),()=>{};const z=_u(Dn(oe,"users"),jm("role","==","parent"));return rs(z,ue=>{const W=ue.docs.map(B=>{const b=B.data();return{id:B.id,nome:b.nome||"Sem nome",email:b.email||"",telefone:b.telefone||"",avatarUrl:b.avatarUrl||"",status:b.status||"ativo"}}).sort((B,b)=>B.nome.localeCompare(b.nome,"pt-BR"));e(W),T(!1)},ue=>{T(!1),N({tipo:"erro",mensagem:(ue==null?void 0:ue.message)||"No foi possvel carregar os responsveis do banco."})})},[]);const j=O.useMemo(()=>t.filter(z=>{const de=z.nome.toLowerCase().includes(u.toLowerCase()),ue=f==="todos"?!0:z.status===f;return de&&ue}),[t,u,f]),M=Math.max(1,Math.ceil(j.length/wd)),$=Math.min(g,M),x=j.slice(($-1)*wd,$*wd),v=()=>{i(null),l(Ed),r(!0)},E=z=>{i(z.id),l({nome:z.nome,email:z.email||"",telefone:z.telefone||"",avatarUrl:z.avatarUrl||""}),r(!0)},I=()=>{i(null),l(Ed),r(!1)},C=z=>{z.preventDefault(),(async()=>{var H;N({tipo:"",mensagem:""}),k(!0);const ue=o.nome.trim(),W=o.email.trim().toLowerCase(),B=o.telefone.trim(),b=o.avatarUrl.trim();if(!ue||!W){k(!1);return}try{if(s){if(!oe)throw new Error("Banco de dados no configurado.");await pn(Nt(oe,"users",s),{nome:ue,telefone:B||null,avatarUrl:b||null,updatedAt:$e()}),N({tipo:"sucesso",mensagem:"Dados do responsvel atualizados com sucesso."})}else{if(!jr||!rt)throw new Error("Firebase no configurado para cadastro de responsvel.");const Y=await kE(RE,"createParentAccount")({nome:ue,email:W,telefone:B,avatarUrl:b}),fe=((H=Y==null?void 0:Y.data)==null?void 0:H.email)||W;await bx(rt,fe),N({tipo:"sucesso",mensagem:"Responsvel cadastrado e link para criao de senha enviado por e-mail."})}S(1),I()}catch(X){const Y=(X==null?void 0:X.message)||"No foi possvel salvar o responsvel.";N({tipo:"erro",mensagem:Y})}finally{k(!1)}})()},P=z=>{(async()=>{if(!oe)throw new Error("Banco de dados no configurado.");const ue=t.find(W=>W.id===z);ue&&await pn(Nt(oe,"users",z),{status:ue.status==="ativo"?"inativo":"ativo",updatedAt:$e()})})().catch(ue=>{N({tipo:"erro",mensagem:(ue==null?void 0:ue.message)||"No foi possvel atualizar o status do responsvel."})})},_=async z=>{var ue;const de=(ue=z.target.files)==null?void 0:ue[0];if(de)try{const W=await cb(de),B=await db(W);l(b=>({...b,avatarUrl:B}))}catch(W){N({tipo:"erro",mensagem:(W==null?void 0:W.message)||"No foi possvel carregar o avatar."})}finally{z.target.value=""}};return c.jsxs("div",{className:"flex flex-col gap-4 max-w-5xl mx-auto",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Responsveis"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Cadastro e acompanhamento dos responsveis dos alunos."})]}),c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Responsveis"}),c.jsx("button",{onClick:n?I:v,className:"h-9 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors",children:n?"Cancelar":"Adicionar responsvel"})]}),n&&c.jsxs("form",{onSubmit:C,className:"mb-5 rounded-xl border border-slate-200 p-4 bg-white/80 flex flex-col gap-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-3 items-center",children:[c.jsx("div",{className:"col-span-3",children:c.jsx("div",{className:"grid grid-cols-1 gap-3 items-center",children:c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Upload de avatar",c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 ",children:c.jsx("div",{className:"mx-auto w-32 h-32 rounded-full overflow-hidden border border-slate-200 bg-slate-100",children:o.avatarUrl?c.jsx("img",{src:o.avatarUrl,alt:"Avatar do responsvel",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-400",children:"Sem avatar"})})}),c.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"form-control !py-2"})]})})}),c.jsx("div",{className:"col-span-5",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("label",{className:"flex flex-col md:col-span-2 gap-1 text-sm text-slate-600",children:["Nome completo",c.jsx("input",{value:o.nome,onChange:z=>l(de=>({...de,nome:z.target.value})),placeholder:"Nome completo",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2 text-sm text-slate-600",children:["E-mail",c.jsx("input",{type:"email",value:o.email,onChange:z=>l(de=>({...de,email:z.target.value})),placeholder:"E-mail",className:"form-control !py-2.5",required:!0,disabled:!!s})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Telefone",c.jsx("input",{value:o.telefone,onChange:z=>l(de=>({...de,telefone:z.target.value})),placeholder:"Telefone (opcional)",className:"form-control !py-2.5"})]})]})})]}),c.jsx("button",{type:"submit",disabled:A,className:"h-10 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors self-end disabled:opacity-60",children:s?"Salvar edio":"Salvar responsvel"})]}),w.mensagem&&c.jsx("div",{className:`mb-4 rounded-lg border px-3 py-2 text-sm ${w.tipo==="erro"?"bg-red-50 border-red-200 text-red-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:w.mensagem}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[c.jsx("input",{value:u,onChange:z=>{d(z.target.value),S(1)},placeholder:"Buscar por nome",className:"form-control !py-2.5"}),c.jsxs("select",{value:f,onChange:z=>{p(z.target.value),S(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todos",children:"Todos os status"}),c.jsx("option",{value:"ativo",children:"Ativo"}),c.jsx("option",{value:"inativo",children:"Inativo"})]})]}),V&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Carregando responsveis..."}),!V&&x.map(z=>c.jsxs("div",{className:"py-3 border-b border-slate-100 last:border-b-0 text-slate-700 grid grid-cols-5 md:grid-cols-12 gap-3 items-center",children:[c.jsxs("div",{className:"md:col-span-2 flex flex-wrap mdgap-2",children:[c.jsxs("button",{onClick:()=>E(z),className:"h-8 px-2 rounded-lg text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors inline-flex items-center gap-1",children:[c.jsx(Fu,{size:12})," Editar"]}),c.jsx("button",{onClick:()=>P(z.id),className:`h-8 px-2 rounded-lg text-xs font-medium transition-colors ${z.status==="ativo"?"bg-red-50 text-red-600 hover:bg-red-100":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:z.status==="ativo"?"Inativar":"Ativar"})]}),c.jsx("div",{className:"col-span-3 md:col-span-6 min-w-0",children:c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-slate-200 bg-slate-100 shrink-0",children:z.avatarUrl?c.jsx("img",{src:z.avatarUrl,alt:z.nome,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-[10px] text-slate-400",children:"Sem"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-medium text-slate-800 truncate",children:z.nome}),c.jsx("div",{className:"text-sm text-slate-500 truncate",children:"Responsvel"})]})]})}),c.jsxs("div",{className:"md:col-span-3 min-w-0 hidden md:block",children:[c.jsx("div",{className:"text-sm text-slate-700 truncate",children:z.email}),c.jsx("div",{className:"text-sm text-slate-500 truncate",children:z.telefone||"Sem telefone"})]}),c.jsx("div",{className:"col-span-1 md:text-right",children:c.jsxs("div",{className:`text-xs text-center px-2 py-1 min-h-6 rounded-full font-semibold ${z.status==="ativo"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:[c.jsx("span",{className:"hidden md:block",children:z.status}),z.status!=="ativo"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(Lu,{})}),z.status==="ativo"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(ia,{})})]})})]},z.id)),!V&&x.length===0&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Nenhum responsvel encontrado."}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-slate-500",children:["Pgina ",$," de ",M]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{disabled:$===1,onClick:()=>S(z=>Math.max(1,z-1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 disabled:opacity-40",children:"Anterior"}),c.jsx("button",{disabled:$===M,onClick:()=>S(z=>Math.min(M,z+1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 disabled:opacity-40",children:"Prxima"})]})]})]})]})}const Td=5,Id={nome:"",periodo:"Integral",professorId:""};function fb(){const[t,e]=O.useState([]),[n,r]=O.useState([]),[s,i]=O.useState([]),[o,l]=O.useState(!1),[u,d]=O.useState(null),[f,p]=O.useState(Id),[g,S]=O.useState(""),[A,k]=O.useState("todos"),[V,T]=O.useState("todos"),[w,N]=O.useState(1),[j,M]=O.useState(!1),[$,x]=O.useState(!1),[v,E]=O.useState(!0),[I,C]=O.useState(!0),[P,_]=O.useState({tipo:"",mensagem:""}),[z,de]=O.useState(null),[ue,W]=O.useState(!1),[B,b]=O.useState("");O.useEffect(()=>oe?rs(Dn(oe,"classrooms"),se=>{const ie=se.docs.map(ce=>{const _e=ce.data();return{id:ce.id,nome:_e.nome||"Sem nome",periodo:_e.periodo||"",professorId:_e.professorId||"",professorNome:_e.professorNome||"",status:_e.status||"ativa"}}).sort((ce,_e)=>ce.nome.localeCompare(_e.nome,"pt-BR"));e(ie),E(!1)},se=>{E(!1),_({tipo:"erro",mensagem:(se==null?void 0:se.message)||"No foi possvel carregar as turmas do banco."})}):(E(!1),_({tipo:"erro",mensagem:"Banco de dados no configurado."}),()=>{}),[]),O.useEffect(()=>{if(!oe)return()=>{};const U=_u(Dn(oe,"users"),jm("role","==","teacher"));return rs(U,ie=>{const ce=ie.docs.map(_e=>{const ln=_e.data();return{id:_e.id,nome:ln.nome||"Sem nome",status:ln.status||"ativo"}}).sort((_e,ln)=>_e.nome.localeCompare(ln.nome,"pt-BR"));i(ce)})},[]),O.useEffect(()=>oe?rs(_u(Dn(oe,"students")),se=>{const ie=se.docs.map(ce=>{const _e=ce.data();return{id:ce.id,nome:_e.nome||"Sem nome",turmaId:_e.turmaId||"",status:_e.status||"ativo",fotoUrl:_e.fotoUrl||""}}).sort((ce,_e)=>ce.nome.localeCompare(_e.nome,"pt-BR"));r(ie),C(!1)},()=>{C(!1)}):(C(!1),()=>{}),[]);const H=O.useMemo(()=>[...new Set(t.map(U=>U.periodo).filter(Boolean))],[t]),X=O.useMemo(()=>{const U=["Matutino","Vespertino","Integral"];return[...new Set([...U,...H])]},[H]),Y=O.useMemo(()=>t.filter(U=>{const se=U.nome.toLowerCase().includes(g.toLowerCase()),ie=A==="todos"?!0:U.status===A,ce=V==="todos"?!0:U.periodo===V;return se&&ie&&ce}),[t,g,A,V]),fe=Math.max(1,Math.ceil(Y.length/Td)),Re=Math.min(w,fe),gt=Y.slice((Re-1)*Td,Re*Td),Me=t.find(U=>U.id===z)||null,Et=O.useMemo(()=>z?n.filter(U=>U.turmaId===z):[],[n,z]),Es=O.useMemo(()=>{if(!z)return[];const U=B.trim().toLowerCase();return U?n.filter(se=>se.nome.toLowerCase().includes(U)).slice(0,20):[]},[n,z,B]),_a=()=>{d(null),p(Id),l(!0)},dc=U=>{d(U.id),p({nome:U.nome,periodo:U.periodo||"",professorId:U.professorId||""}),l(!0)},xa=()=>{d(null),p(Id),l(!1)},wa=U=>{U.preventDefault(),(async()=>{_({tipo:"",mensagem:""}),M(!0);const ie=f.nome.trim(),ce=f.periodo.trim(),_e=f.professorId,ln=s.find(Wn=>Wn.id===_e);if(!ie||!ce||!_e||!ln){M(!1);return}try{if(!oe)throw new Error("Banco de dados no configurado.");u?(await pn(Nt(oe,"classrooms",u),{nome:ie,periodo:ce,professorId:_e,professorNome:ln.nome,updatedAt:$e()}),_({tipo:"sucesso",mensagem:"Dados da turma atualizados com sucesso."})):(await IE(Dn(oe,"classrooms"),{nome:ie,periodo:ce,professorId:_e,professorNome:ln.nome,status:"ativa",createdAt:$e(),updatedAt:$e()}),_({tipo:"sucesso",mensagem:"Turma cadastrada com sucesso."})),N(1),xa()}catch(Wn){_({tipo:"erro",mensagem:(Wn==null?void 0:Wn.message)||"No foi possvel salvar a turma."})}finally{M(!1)}})()},Ai=U=>{(async()=>{if(!oe)throw new Error("Banco de dados no configurado.");const ie=t.find(ce=>ce.id===U);ie&&await pn(Nt(oe,"classrooms",U),{status:ie.status==="ativa"?"inativa":"ativa",updatedAt:$e()})})().catch(ie=>{_({tipo:"erro",mensagem:(ie==null?void 0:ie.message)||"No foi possvel atualizar o status da turma."})})},Ea=U=>{de(se=>se===U?null:U),W(!1),b("")},hc=async U=>{try{if(!oe||!z)throw new Error("Selecione uma turma para vincular alunos.");x(!0),_({tipo:"",mensagem:""}),await pn(Nt(oe,"students",U.id),{turmaId:z,updatedAt:$e()}),_({tipo:"sucesso",mensagem:U.turmaId&&U.turmaId!==z?"Aluno transferido para a turma com sucesso.":"Aluno vinculado  turma com sucesso."})}catch(se){_({tipo:"erro",mensagem:(se==null?void 0:se.message)||"No foi possvel vincular o aluno."})}finally{x(!1)}},Ni=async U=>{try{if(!oe)throw new Error("Dados no disponveis para remover aluno.");x(!0),_({tipo:"",mensagem:""}),await pn(Nt(oe,"students",U),{turmaId:null,updatedAt:$e()}),_({tipo:"sucesso",mensagem:"Aluno removido da turma com sucesso."})}catch(se){_({tipo:"erro",mensagem:(se==null?void 0:se.message)||"No foi possvel remover o aluno da turma."})}finally{x(!1)}};return c.jsxs("div",{className:"flex flex-col gap-4 max-w-5xl mx-auto",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Gesto de Turmas"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Organizao das turmas e perodos da escola."})]}),c.jsxs("div",{className:"glass-panel p-5 border border-slate-200/60",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Turmas"}),c.jsx("button",{onClick:o?xa:_a,className:"h-9 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors",children:o?"Cancelar":"Adicionar turma"})]}),o&&c.jsxs("form",{onSubmit:wa,className:"mb-5 rounded-xl border border-slate-200 p-4 bg-white/80 flex flex-col gap-3",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[c.jsxs("label",{className:"flex flex-col md:col-span-2 gap-1 text-sm text-slate-600",children:["Nome da turma",c.jsx("input",{value:f.nome,onChange:U=>p(se=>({...se,nome:U.target.value})),placeholder:"Nome da turma",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Perodo",c.jsx("select",{value:f.periodo,onChange:U=>p(se=>({...se,periodo:U.target.value})),className:"form-control !py-2.5",children:X.map(U=>c.jsx("option",{value:U,children:U},U))})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Professor responsvel",c.jsxs("select",{value:f.professorId,onChange:U=>p(se=>({...se,professorId:U.target.value})),className:"form-control !py-2.5",required:!0,children:[c.jsx("option",{value:"",children:"Selecione"}),s.filter(U=>U.status==="ativo"||U.id===f.professorId).map(U=>c.jsx("option",{value:U.id,children:U.nome},U.id))]})]})]}),c.jsx("button",{type:"submit",disabled:j,className:"h-10 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors self-end disabled:opacity-60",children:u?"Salvar edio":"Salvar turma"})]}),P.mensagem&&c.jsx("div",{className:`mb-4 rounded-lg border px-3 py-2 text-sm ${P.tipo==="erro"?"bg-red-50 border-red-200 text-red-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:P.mensagem}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[c.jsx("input",{value:g,onChange:U=>{S(U.target.value),N(1)},placeholder:"Buscar por turma",className:"form-control !py-2.5"}),c.jsxs("select",{value:A,onChange:U=>{k(U.target.value),N(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todos",children:"Todos os status"}),c.jsx("option",{value:"ativa",children:"Ativa"}),c.jsx("option",{value:"inativa",children:"Inativa"})]}),c.jsxs("select",{value:V,onChange:U=>{T(U.target.value),N(1)},className:"form-control !py-2.5",children:[c.jsx("option",{value:"todos",children:"Todos os perodos"}),H.map(U=>c.jsx("option",{value:U,children:U},U))]})]}),Me&&c.jsxs("div",{className:"mt-5 rounded-xl border border-slate-200 bg-white/80 p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-base font-bold text-slate-800",children:["Gerenciar alunos da turma: ",Me.nome]}),c.jsx("button",{onClick:()=>de(null),className:"h-8 px-3 rounded-lg text-xs font-medium text-slate-600 bg-slate-100 hover:bg-slate-200",children:"Fechar"})]}),I?c.jsx("div",{className:"text-sm text-slate-500",children:"Carregando alunos..."}):c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-slate-500",children:["Alunos vinculados: ",Et.length]}),c.jsx("button",{onClick:()=>W(!0),className:"h-9 px-3 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors",children:"Buscar e vincular aluno"})]}),c.jsxs("div",{className:"rounded-lg border border-slate-200 p-3",children:[c.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Alunos da turma"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 max-h-80 overflow-y-auto",children:[Et.map(U=>{var se,ie;return c.jsxs("div",{className:"flex items-center justify-between bg-slate-100 gap-3 rounded-lg border-1 border-slate-300 px-3 py-2",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden border border-slate-200 bg-slate-100 shrink-0",children:U.fotoUrl?c.jsx("img",{src:U.fotoUrl,alt:U.nome,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-500 font-semibold",children:((ie=(se=U.nome)==null?void 0:se.charAt(0))==null?void 0:ie.toUpperCase())||"?"})}),c.jsx("span",{className:"text-sm text-slate-700 truncate",children:U.nome})]}),c.jsx("button",{disabled:$,onClick:()=>Ni(U.id),className:"h-7 px-2 rounded-md text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 disabled:opacity-50",children:"Remover"})]},U.id)}),Et.length===0&&c.jsx("div",{className:"text-sm text-slate-400",children:"Nenhum aluno vinculado."})]})]}),c.jsx("div",{className:"text-xs text-slate-500",children:"Use Buscar e vincular aluno para localizar por nome e incluir na turma."})]})]}),ue&&Me&&c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/40 backdrop-blur-sm flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-2xl rounded-xl border border-slate-200 bg-white shadow-xl p-4 md:p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-base font-bold text-slate-800",children:["Vincular aluno  turma ",Me.nome]}),c.jsx("button",{onClick:()=>{W(!1),b("")},className:"h-8 px-3 rounded-lg text-xs font-medium text-slate-600 bg-slate-100 hover:bg-slate-200",children:"Fechar"})]}),c.jsx("input",{value:B,onChange:U=>b(U.target.value),placeholder:"Digite o nome do aluno",className:"form-control !py-2.5 mb-3"}),!B.trim()&&c.jsx("div",{className:"text-sm text-slate-500 py-4",children:"Digite um nome para buscar alunos."}),B.trim()&&c.jsxs("div",{className:"flex flex-col gap-2 max-h-96 overflow-y-auto",children:[Es.map(U=>{var ce,_e;const se=U.turmaId===z,ie=U.turmaId&&!se;return c.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border border-slate-200 px-3 py-2",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-slate-200 bg-slate-100 shrink-0",children:U.fotoUrl?c.jsx("img",{src:U.fotoUrl,alt:U.nome,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-slate-500 font-semibold",children:((_e=(ce=U.nome)==null?void 0:ce.charAt(0))==null?void 0:_e.toUpperCase())||"?"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-slate-700 truncate",children:U.nome}),se&&c.jsx("div",{className:"text-xs text-emerald-700",children:"J est nesta turma"}),ie&&c.jsx("div",{className:"text-xs text-amber-700",children:"Est em outra turma"})]})]}),c.jsx("button",{disabled:$||se,onClick:()=>hc(U),className:"h-8 px-2 rounded-lg text-xs font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 disabled:opacity-50",children:se?"Vinculado":ie?"Transferir":"Vincular"})]},U.id)}),Es.length===0&&c.jsx("div",{className:"text-sm text-slate-400",children:"Nenhum aluno encontrado."})]})]})}),v&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Carregando turmas..."}),!v&&gt.map(U=>c.jsxs("div",{className:"py-3 border-b border-slate-100 last:border-b-0 text-slate-700 grid grid-cols-5 md:grid-cols-12 gap-3 items-center",children:[c.jsxs("div",{className:"md:col-span-2 flex flex-wrap mdgap-2",children:[c.jsxs("button",{onClick:()=>dc(U),className:"h-8 px-2 rounded-lg text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors inline-flex items-center gap-1",children:[c.jsx(Fu,{size:12})," Editar"]}),c.jsx("button",{onClick:()=>Ai(U.id),className:`h-8 px-2 rounded-lg text-xs font-medium transition-colors ${U.status==="ativa"?"bg-red-50 text-red-600 hover:bg-red-100":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,children:U.status==="ativa"?"Inativar":"Ativar"})]}),c.jsxs("div",{className:"col-span-3 md:col-span-7 min-w-0",children:[c.jsx("div",{className:"font-medium text-slate-800 truncate",children:U.nome}),c.jsx("div",{className:"text-sm text-slate-500 truncate",children:U.periodo||"Sem perodo"}),c.jsxs("div",{className:"text-sm text-slate-500 truncate",children:["Responsvel: ",U.professorNome||"No definido"]})]}),c.jsx("div",{className:"col-span-2 md:text-right",children:c.jsxs("button",{onClick:()=>Ea(U.id),className:"h-8 px-2 rounded-lg text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 transition-colors inline-flex items-center gap-1",children:[c.jsx(Uu,{size:12})," Vincular alunos"]})}),c.jsx("div",{className:"col-span-1 md:text-right",children:c.jsxs("div",{className:`text-xs text-center px-2 py-1 min-h-6 rounded-full font-semibold ${U.status==="ativa"?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:[c.jsx("span",{className:"hidden md:block",children:U.status}),U.status!=="ativa"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(Lu,{})}),U.status==="ativa"&&c.jsx("div",{className:"block flex items-center justify-center md:hidden",children:c.jsx(ia,{})})]})})]},U.id)),!v&&gt.length===0&&c.jsx("div",{className:"py-6 text-sm text-slate-500",children:"Nenhuma turma encontrada."}),c.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.jsxs("span",{className:"text-sm text-slate-500",children:["Pgina ",Re," de ",fe]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{disabled:Re===1,onClick:()=>N(U=>Math.max(1,U-1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 disabled:opacity-40",children:"Anterior"}),c.jsx("button",{disabled:Re===fe,onClick:()=>N(U=>Math.min(fe,U+1)),className:"h-9 px-3 rounded-lg text-sm font-medium text-slate-600 bg-slate-100 disabled:opacity-40",children:"Prxima"})]})]})]})]})}async function mb(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.onerror=()=>n(new Error("Falha ao ler arquivo de imagem.")),r.readAsDataURL(t)})}function pb(){const{currentUser:t,userProfile:e}=cc(),[n,r]=O.useState(""),[s,i]=O.useState(""),[o,l]=O.useState(""),[u,d]=O.useState(""),[f,p]=O.useState(""),[g,S]=O.useState(""),[A,k]=O.useState(!1),[V,T]=O.useState(!1),[w,N]=O.useState(""),[j,M]=O.useState(""),[$,x]=O.useState(""),[v,E]=O.useState("");O.useEffect(()=>{r((e==null?void 0:e.nome)||""),i((e==null?void 0:e.telefone)||""),l((e==null?void 0:e.avatarUrl)||"")},[e]);const I=async _=>{var de;const z=(de=_.target.files)==null?void 0:de[0];if(z)try{const ue=await mb(z);l(ue)}catch(ue){M((ue==null?void 0:ue.message)||"No foi possvel carregar a imagem.")}finally{_.target.value=""}},C=async _=>{if(_.preventDefault(),!(!t||!oe)){N(""),M(""),k(!0);try{await Nl(Nt(oe,"users",t.uid),{nome:n.trim(),telefone:s.trim(),avatarUrl:o||null,updatedAt:$e()},{merge:!0}),N("Perfil atualizado com sucesso.")}catch(z){M((z==null?void 0:z.message)||"No foi possvel atualizar o perfil.")}finally{k(!1)}}},P=async _=>{if(_.preventDefault(),!(!(t!=null&&t.email)||!(rt!=null&&rt.currentUser))){if(x(""),E(""),!u.trim()){E("Informe sua senha atual.");return}if(f.length<6){E("A nova senha deve ter pelo menos 6 caracteres.");return}if(f!==g){E("A confirmao da senha no confere.");return}T(!0);try{const z=_s.credential(t.email,u);await qN(rt.currentUser,z),await GN(rt.currentUser,f),d(""),p(""),S(""),x("Senha atualizada com sucesso.")}catch(z){(z==null?void 0:z.code)==="auth/wrong-password"||(z==null?void 0:z.code)==="auth/invalid-credential"?E("Senha atual invlida."):E((z==null?void 0:z.message)||"No foi possvel alterar a senha.")}finally{T(!1)}}};return c.jsxs("div",{className:"flex flex-col gap-6 max-w-4xl mx-auto",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Meu Perfil"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Atualize suas informaes e sua senha de acesso."})]}),c.jsxs("form",{onSubmit:C,className:"glass-panel p-5 border border-slate-200/60 flex flex-col gap-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Dados pessoais"}),j&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:j}),w&&c.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:w}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center",children:[c.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border border-slate-200 bg-slate-100 shrink-0",children:o?c.jsx("img",{src:o,alt:"Avatar do usurio",className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 text-sm",children:"Sem avatar"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Avatar"}),c.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"form-control !py-2 mt-1"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Nome",c.jsx("input",{value:n,onChange:_=>r(_.target.value),placeholder:"Nome",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["E-mail",c.jsx("input",{value:(e==null?void 0:e.email)||(t==null?void 0:t.email)||"",disabled:!0,className:"form-control !py-2.5 bg-slate-100 text-slate-500"})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600 md:col-span-2",children:["Telefone",c.jsx("input",{value:s,onChange:_=>i(_.target.value),placeholder:"Telefone",className:"form-control !py-2.5"})]})]}),c.jsx("button",{type:"submit",disabled:A,className:"h-10 px-4 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors self-end disabled:opacity-60",children:"Salvar perfil"})]}),c.jsxs("form",{onSubmit:P,className:"glass-panel p-5 border border-slate-200/60 flex flex-col gap-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Alterar senha"}),v&&c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:v}),$&&c.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:$}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Senha atual",c.jsx("input",{type:"password",value:u,onChange:_=>d(_.target.value),placeholder:"Senha atual",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Nova senha",c.jsx("input",{type:"password",value:f,onChange:_=>p(_.target.value),placeholder:"Nova senha",className:"form-control !py-2.5",required:!0})]}),c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Confirmar nova senha",c.jsx("input",{type:"password",value:g,onChange:_=>S(_.target.value),placeholder:"Confirmar nova senha",className:"form-control !py-2.5",required:!0})]})]}),c.jsx("button",{type:"submit",disabled:V,className:"h-10 px-4 rounded-lg text-sm font-medium text-white bg-primary hover:bg-primary-dark transition-colors self-end disabled:opacity-60",children:"Alterar senha"})]})]})}const gb={1:{id:"1",turmaId:"t1",name:"Joo Pedro",status:"draft",avatar:"https://ui-avatars.com/api/?name=Joao+Pedro&background=e2e8f0&color=0f172a"},2:{id:"2",turmaId:"t2",name:"Maria Clara",status:"pending",avatar:"https://ui-avatars.com/api/?name=Maria+Clara&background=fef08a&color=854d0e"},3:{id:"3",turmaId:"t2",name:"Enzo Gabriel",status:"pending",avatar:"https://ui-avatars.com/api/?name=Enzo+G&background=bfdbfe&color=1e3a8a"},4:{id:"4",turmaId:"t1",name:"Sofia M.",status:"sent",avatar:"https://ui-avatars.com/api/?name=Sofia+M&background=fbcfe8&color=831843"},5:{id:"5",turmaId:"t1",name:"Lucas T.",status:"pending",avatar:"https://ui-avatars.com/api/?name=Lucas+T&background=dcfce7&color=166534"},6:{id:"6",turmaId:"t1",name:"Alice R.",status:"pending",avatar:"https://ui-avatars.com/api/?name=Alice+R&background=fce7f3&color=9d174d"}};function yb(){const{currentUser:t,userRole:e,userProfile:n,logout:r}=cc(),[s,i]=O.useState("caderneta"),[o,l]=O.useState("dashboard"),[u,d]=O.useState(null),[f,p]=O.useState(null),[g,S]=O.useState(gb),[A,k]=O.useState(!1),V=O.useRef(null);if(O.useEffect(()=>{e==="admin"&&!s.startsWith("admin-")&&s!=="perfil"&&i("admin-dashboard")},[e,s]),O.useEffect(()=>{const _=z=>{V.current&&!V.current.contains(z.target)&&k(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),!t)return c.jsx(XR,{});const T=_=>{d(_),l("diario")},w=_=>{p(_),l("aluno")},N=(_,z)=>{S(de=>({...de,[_]:{...de[_],status:z}}))},j=()=>o==="dashboard"?c.jsx(qg,{onOpenTurma:T}):o==="diario"&&u?c.jsx(sS,{turma:u,studentsStatus:g,onBack:()=>l("dashboard"),onOpenStudent:w}):o==="aluno"&&f?c.jsx(iS,{student:g[f],turma:u,onBack:()=>l("diario"),onUpdateStatus:_=>N(f,_)}):c.jsx(qg,{onOpenTurma:T}),M=()=>{if(s==="perfil")return c.jsx(pb,{});if(e==="admin")return s==="admin-dashboard"?c.jsx(rb,{}):s==="admin-professores"?c.jsx(ub,{}):s==="admin-responsaveis"?c.jsx(hb,{}):s==="admin-alunos"?c.jsx(Pv,{}):s==="admin-turmas"?c.jsx(fb,{}):c.jsx(Pv,{});if(e==="parent"){if(s==="caderneta")return c.jsx(ZR,{});if(s==="calendario")return c.jsx(Wg,{});if(s==="comunicacao")return c.jsx(Kg,{})}switch(s){case"caderneta":return j();case"calendario":return c.jsx(Wg,{});case"comunicacao":return c.jsx(Kg,{});default:return j()}},$=_=>{i(_),k(!1),_==="caderneta"&&l("dashboard")},x=()=>{i("perfil"),k(!1)},E=e==="admin"?[{id:"admin-dashboard",label:"Dashboard",icon:Xl},{id:"admin-professores",label:"Professores",icon:wo},{id:"admin-turmas",label:"Turmas",icon:G_},{id:"admin-responsaveis",label:"Responsveis",icon:Uu},{id:"admin-alunos",label:"Alunos",icon:vh}]:[{id:"caderneta",label:e==="admin"?"Viso Geral":e==="parent"?"Meu Filho":"Dirio de Classe",icon:vh},{id:"calendario",label:"Calendrio",icon:Xl},{id:"comunicacao",label:"Mensagens",icon:W_}],I=(n==null?void 0:n.nome)||(t==null?void 0:t.displayName)||"Usurio",C=(n==null?void 0:n.email)||(t==null?void 0:t.email)||"",P=(n==null?void 0:n.avatarUrl)||"";return c.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-app",children:[c.jsxs("div",{className:"lg:hidden fixed top-0 w-full h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 z-50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-primary-light flex items-center justify-center text-white font-bold text-sm shadow-[0_2px_8px_rgba(16,185,129,0.3)]",children:"V"}),c.jsx("span",{className:"font-bold text-slate-800 tracking-tight",children:"Verdy"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{className:"text-slate-500 hover:text-primary",children:c.jsx(Bg,{size:20})}),c.jsx("div",{onClick:r,className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center border border-slate-200 cursor-pointer",children:c.jsx(_h,{size:16,className:"text-red-500"})})]})]}),c.jsxs("aside",{className:"hidden lg:flex w-[280px] bg-white border-r border-slate-200 flex-col p-6 z-10 shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-10 mt-2",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-primary-light flex items-center justify-center text-white font-bold text-xl shadow-[0_4px_10px_rgba(16,185,129,0.3)]",children:"V"}),c.jsx("h2",{className:"font-bold text-2xl text-slate-800 tracking-tight",children:"Colgio Verdy"})]}),c.jsx("nav",{className:"flex flex-col gap-2 flex-1 mt-4",children:E.map(_=>c.jsxs("button",{onClick:()=>$(_.id),className:`flex items-center gap-3 w-full text-left px-4 py-3.5 rounded-xl font-medium text-[15px] transition-all ${s===_.id?"bg-primary text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-primary"}`,children:[c.jsx(_.icon,{size:20}),_.label]},_.id))})]}),c.jsxs("main",{className:"flex-1 flex flex-col pt-16 lg:pt-0 overflow-hidden relative",children:[c.jsx("header",{className:"hidden lg:flex h-20 items-center justify-between px-8 bg-white border-b border-slate-200 shrink-0",children:c.jsxs("div",{className:"flex ml-auto items-center gap-6",children:[c.jsx("button",{className:"p-2 text-slate-500 hover:text-primary hover:bg-slate-50 rounded-full transition-colors",children:c.jsx(Bg,{size:20})}),c.jsxs("div",{ref:V,className:"relative",children:[c.jsxs("button",{onClick:()=>k(_=>!_),className:"flex items-center gap-3 select-none hover:bg-slate-50 rounded-xl px-2 py-1.5 transition-colors",children:[c.jsx("div",{className:"w-11 h-11 rounded-full bg-slate-100 border-2 border-white shadow-sm overflow-hidden flex items-center justify-center text-slate-500",children:P?c.jsx("img",{src:P,alt:I,className:"w-full h-full object-cover"}):c.jsx(wo,{size:20})}),c.jsxs("div",{className:"flex flex-col text-left",children:[c.jsx("span",{className:"font-semibold text-sm text-slate-800 uppercase",children:I}),c.jsx("span",{className:"text-xs text-slate-500 truncate max-w-[180px]",children:C||"Conta ativa"})]}),c.jsx(zI,{size:16,className:`text-slate-400 transition-transform ${A?"rotate-180":""}`})]}),A&&c.jsxs("div",{className:"absolute right-0 top-[calc(100%+8px)] w-56 rounded-xl border border-slate-200 bg-white shadow-lg p-2 z-20",children:[c.jsxs("button",{onClick:x,className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-slate-700 hover:bg-slate-50",children:[c.jsx(wo,{size:16}),"Meu perfil"]}),c.jsxs("button",{onClick:r,className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50",children:[c.jsx(_h,{size:16}),"Sair do sistema"]})]})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-8 pb-24 lg:pb-8",children:M()})]}),c.jsx("nav",{className:"fixed bottom-0 w-full bg-white border-t border-slate-200 flex justify-around items-center h-16 lg:hidden pb-safe z-50",children:E.map(_=>c.jsxs("button",{onClick:()=>$(_.id),className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${s===_.id?"text-primary":"text-slate-400"}`,children:[c.jsx(_.icon,{size:22,className:s===_.id?"fill-primary/20":""}),c.jsx("span",{className:"text-[10px] font-medium",children:_.label})]},_.id))})]})}function vb(){return c.jsx(JR,{children:c.jsx(yb,{})})}VI({immediate:!0});Sd.createRoot(document.getElementById("root")).render(c.jsx(x1.StrictMode,{children:c.jsx(vb,{})}));
